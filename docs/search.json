[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Online reports and narrations of flood events",
    "section": "",
    "text": "Code\nlibrary(glitter)\nlibrary(tidyverse)\nlibrary(ggpubr)\nlibrary(tidytext)\nlibrary(leaflet)\nlibrary(rainette)\noptions(scipen = 9999)\nwd_events=readRDS(\"data/wd_events.RDS\")\nwm_full=readRDS(\"data/wm_full.RDS\")\nwp_20_words_per_event=readRDS(\"data/wp_20_words_per_event.RDS\")\nwm_full=wm_full %&gt;% \n  left_join(wp_20_words_per_event, by=c(\"flood\"))\ndfo_comp=readRDS(\"data/dfo_comp.RDS\")\nwm_comp=readRDS(\"data/wm_comp.RDS\")\nwm_dfo=readRDS(\"data/wm_dfo.RDS\")\nwm_dfo_corr=readRDS(\"data/wm_dfo_corr.RDS\")"
  },
  {
    "objectID": "index.html#aim-of-the-article",
    "href": "index.html#aim-of-the-article",
    "title": "Online reports and narrations of flood events",
    "section": "",
    "text": "This study’s objectives are to\n\ncollect and assess the information provided by the Wikimedia initiative (Wikidata, Wikipedia, Wikimedia Commons) on flood events.\ncompare this data, which is crowdsourced, to an institutionnally curated database on the same topic.\nuse this data to characterize and understand (in terms of human impact especially) the flood events documented."
  },
  {
    "objectID": "index.html#journaux-potentiels",
    "href": "index.html#journaux-potentiels",
    "title": "glourb_floods",
    "section": "",
    "text": "Open Access Journal. The journal’s scope includes but is not limited to:\n\nDigital Tools and Methods in Humanities Research: DHQ publishes articles that showcase innovative digital tools, methods, and approaches used in humanities scholarship. This can involve text analysis, data visualization, digital archives, GIS (Geographic Information Systems), network analysis, and more.\nCritical Assessment of Digital Technologies in Humanities Studies: DHQ features critical evaluations and discussions about the implications, challenges, and limitations of using digital technologies in humanities research. This includes considerations of ethics, accessibility, and cultural implications of digital humanities work.\nInterdisciplinary Collaborations: The journal promotes interdisciplinary collaborations by highlighting research at the intersection of humanities disciplines and technology. It covers collaborations between historians, literary scholars, linguists, cultural studies scholars, and experts in computer science, data science, and information technology.\nDigital Pedagogy and Teaching Approaches: DHQ discusses innovative pedagogical approaches that integrate digital tools and methods into humanities teaching. This includes case studies, reviews, and discussions on the use of technology in the classroom to enhance learning experiences.\nDigital Humanities Projects and Case Studies: The journal publishes case studies and reports on digital humanities projects, initiatives, and experiments, providing insights into the practical application of digital methods in various humanities fields.\nOpen Access and Open Data: DHQ supports open access and open data principles, often discussing issues related to data curation, preservation, and accessibility in the context of digital humanities research."
  },
  {
    "objectID": "index.html#get-coordinates-if-possible",
    "href": "index.html#get-coordinates-if-possible",
    "title": "glourb_floods",
    "section": "Get coordinates if possible",
    "text": "Get coordinates if possible\n\nGet coordinates and country of locations\nNow we try and complete geographical informations based on Wikidata. For each location identifier, we collect data about\n\ncountry of the location (country_loc)\ncoordinates of the location (coords_loc)\ntype of location (loc_type)\n\n\n\nCode\nget_loc_info=function(loc_id){\n  result=spq_init() %&gt;%\n    spq_set(loc=loc_id) %&gt;% \n    spq_add(\"?loc wdt:P17 ?country_loc\") %&gt;% \n    spq_add(\"?loc wdt:P625 ?coords_loc\") %&gt;% \n    spq_add(\"?loc wdt:P31 ?loc_type\") %&gt;% \n    spq_label(loc, country_loc, loc_type) %&gt;% \n    spq_select(-loc) %&gt;% \n    spq_perform()\n  result\n}\n\n\nWe apply this query to all locations mentioned in wd_raw:\n\n\nCode\nif(!file.exists(\"data/locs.RDS\")){\n  locs=wd_raw %&gt;%\n    select(loc) %&gt;% \n    unique() %&gt;% \n    na.omit() %&gt;% \n    mutate(data=purrr::map(loc,get_loc_info)) %&gt;% \n    tidyr::unnest(data)\n  saveRDS(locs, \"data/locs.RDS\")\n}\nlocs=readRDS(\"data/locs.RDS\")\n\n\nNow we update the data about floods taking into account that supplementary data about locations:\n\n\nCode\nwd_loc=wd_raw %&gt;% \n  left_join(locs,by=\"loc\") %&gt;%\n  mutate(country_label=case_when(country_label==\"\"~country_loc_label,\n                                 country_label!=\"\"~country_label)) %&gt;% \n  mutate(country=case_when(is.na(country)~country_loc,\n                           !is.na(country)~country)) %&gt;% \n  mutate(coords_from=case_when(!is.na(coords)~\"flood\",\n                               is.na(coords)~\"location\")) %&gt;% \n  mutate(country=stringr::str_replace_all(country, \"http://www.wikidata.org/entity/\", \"wd:\"))\n\n\nWarning in left_join(., locs, by = \"loc\"): Detected an unexpected many-to-many relationship between `x` and `y`.\nℹ Row 2 of `x` matches multiple rows in `y`.\nℹ Row 1 of `y` matches multiple rows in `x`.\nℹ If a many-to-many relationship is expected, set `relationship =\n  \"many-to-many\"` to silence this warning.\n\n\n\n\nGet coordinates of countries\nWe also want to get country coordinates\n\n\nCode\nget_country_info=function(country_id){\n  result=spq_init() %&gt;%\n    spq_set(country=country_id) %&gt;% \n    spq_add(\"?country wdt:P625 ?coords_country\") %&gt;%\n    spq_select(-country) %&gt;% \n    spq_perform() \n  result\n}\n\n\n\n\nCode\nif(!file.exists(\"data/countries.RDS\")){\n  countries=wd_loc %&gt;%\n    select(country) %&gt;% \n    unique() %&gt;% \n    na.omit() %&gt;% \n    mutate(data=purrr::map(country,get_country_info)) %&gt;% \n    tidyr::unnest(data)\n  saveRDS(countries, \"data/countries.RDS\")\n}\ncountries=readRDS(\"data/countries.RDS\")\n\n\nNow we update the data about floods taking into account that supplementary data about countries:\n\n\nCode\nwd_loc=wd_loc %&gt;% \n  left_join(countries,by=\"country\") %&gt;%\n  mutate(coords_from=case_when(is.na(coords) & is.na(coords_loc) & !is.na(coords_country) ~\"3) country\",\n                               !is.na(coords_loc)~\"2) location\",\n                               !is.na(coords)~\"1) not infered: direct\",\n                               TRUE~\"4) no coordinates\")) %&gt;% \n  mutate(coords=case_when(is.na(coords)~coords_loc,\n                          !is.na(coords)~coords)) %&gt;%\n  mutate(coords=case_when(is.na(coords)~coords_country,\n                          !is.na(coords)~coords)) %&gt;% \n  select(-country,-country_loc_label,-coords_country,-coords_loc\n         ,-loc_type_label,-contains(\"loc\")) %&gt;% \n  unique()\n\n\nThe coordinates for the flood events are thus inferred from:\n\n\nCode\nwd_loc %&gt;% \n  group_by(coords_from) %&gt;% \n  summarise(n=n())\n\n\n# A tibble: 4 × 2\n  coords_from                n\n  &lt;chr&gt;                  &lt;int&gt;\n1 1) not infered: direct   122\n2 2) location              696\n3 3) country               557\n4 4) no coordinates         94"
  },
  {
    "objectID": "index.html#clean-dates",
    "href": "index.html#clean-dates",
    "title": "glourb_floods",
    "section": "Clean dates",
    "text": "Clean dates\n\nwd_loc2=wd_loc %&gt;% \n  mutate(mstart=lubridate::round_date(start,\"month\"),\n         mend=lubridate::round_date(end,\"month\"),\n         mdate=lubridate::round_date(date,\"month\")) %&gt;% \n  mutate(mstart=case_when(is.na(mstart)~mdate,\n                          !is.na(mstart)~mstart)) %&gt;% \n  mutate(mend=case_when(is.na(mend)~mdate,\n                        !is.na(mend)~mend)) %&gt;% \n  group_by(mstart,mend,mdate) %&gt;% \n  tidyr::nest()# %&gt;% \n  #mutate()"
  },
  {
    "objectID": "index.html#select-variables-for-comparison",
    "href": "index.html#select-variables-for-comparison",
    "title": "glourb_floods",
    "section": "Select variables for comparison",
    "text": "Select variables for comparison\n\n# wd_comp=wd_loc %&gt;% \n#   select(flood,flood_label,country_label,deathtoll,start,end,date,coords)\n\nIn case coords are not provided, we approximate them with location coordinates (if available)."
  },
  {
    "objectID": "index.html#monthly-summary",
    "href": "index.html#monthly-summary",
    "title": "glourb_floods",
    "section": "monthly summary",
    "text": "monthly summary\n\ngfd= gfd_raw %&gt;%\n  mutate(month_began=floor_date(lubridate::mdy(dfo_began),\"month\"),\n         month_ended=ceiling_date(lubridate::mdy(dfo_ended),\"month\")) %&gt;%\n  tidyr::pivot_longer(cols=starts_with(\"month_\"),names_to=\"start_end\",values_to=\"month\")\n# \n# tt=tib_gdf %&gt;%\n#   select(index,month) %&gt;%\n#   group_by(index) %&gt;%\n#   tidyr::nest(data=month) %&gt;%\n#   mutate(month=purrr::map(.x=data, ~seq(first(.x$month),last(.x$month),\"month\"))) %&gt;%\n#   tidyr::unnest(month) %&gt;%\n#   ungroup() %&gt;%\n#   group_by(month) %&gt;%\n#   summarise(n=n())\n# ggplot(tt, aes(x=month,y=n))+geom_path()"
  },
  {
    "objectID": "index.html#monthly-summary-1",
    "href": "index.html#monthly-summary-1",
    "title": "glourb_floods",
    "section": "monthly summary",
    "text": "monthly summary\n\n# all_dates=tibble::tibble(date=seq(from=lubridate::ymd(\"2000-01-01\"),\n#                                   to=lubridate::ymd(\"2019-01-01\"),\n#                                   by=\"month\"))\n# wd=wd_raw%&gt;%\n#   mutate(date=lubridate::round_date(date,'month'))%&gt;%\n#   filter(date&gt;lubridate::ymd(\"2000-01-01\"),\n#          date&lt;lubridate::ymd(\"2019-01-01\")) %&gt;%\n#   group_by(date) %&gt;%\n#   summarise(n=n()) %&gt;%\n#   full_join(all_dates) %&gt;%\n#   mutate(n=replace_na(n,0)) %&gt;%\n#   arrange(date)\n\n# ggplot(tibs, aes(x=date,y=n))+geom_path()\n# dim(tib)"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "This site gathers elements regarding flood events documented both through participatory data (Wikidata, Wikipedia) and physical (remote sensing) assessment. It questions the link between these data and what we can infer from them, in particular regarding the impact of floods on humans."
  },
  {
    "objectID": "index.html#get-and-clean-dates",
    "href": "index.html#get-and-clean-dates",
    "title": "glourb_floods",
    "section": "Get and clean dates",
    "text": "Get and clean dates\n\n\nCode\nget_date_info=function(flood_id,type=\"P585\"){\n  result=spq_init() %&gt;%\n    spq_set(flood=flood_id) %&gt;% \n    spq_add(glue::glue(\"?flood p:{type}/psv:{type} ?datestatement\")) %&gt;% \n    spq_add(\"?datestatement wikibase:timeValue ?datetime\") %&gt;%\n    spq_add(\"?datestatement wikibase:timePrecision ?precision\",.required=FALSE) %&gt;%\n    spq_mutate(date=as.date(datetime)) %&gt;% \n    spq_select(-datestatement,-datetime) %&gt;% \n    spq_perform()\n  result\n}\n\n\nWe apply this query to all locations mentioned in wd_raw:\n\n\nCode\nfill_void=function(tib,name=\"date\"){\n  if(nrow(tib)==0){\n    tib=tibble::tibble(flood=NA,\n                       date=NA,\n                       precision=NA)\n  }\n  tib=tib %&gt;% select(date, precision)\n  colnames(tib)=c(name,paste0(name,\"_precision\"))\n  return(tib)\n}\nif(!file.exists(\"data/dates.RDS\")){\n  dates=wd_raw %&gt;%\n    select(flood,flood_label)%&gt;% \n    unique() %&gt;% \n    mutate(flood=stringr::str_replace_all(flood,\n                                          \"http://www.wikidata.org/entity/\", \"wd:\")) %&gt;%\n    mutate(date=purrr::map(flood,get_date_info)) %&gt;% \n    mutate(start=purrr::map(flood,get_date_info, type=\"P580\")) %&gt;%\n    mutate(end=purrr::map(flood,get_date_info, type=\"P582\")) %&gt;%\n    mutate(date=purrr::map(date,fill_void)) %&gt;% \n    mutate(start=purrr::map(start,fill_void,name=\"start\")) %&gt;% \n    mutate(end=purrr::map(end,fill_void,name=\"end\")) %&gt;% \n    tidyr::unnest(c(date,start,end))\n  saveRDS(dates, \"data/dates.RDS\")\n}\n\n\n\n\nCode\ndates=readRDS(\"data/dates.RDS\") %&gt;% \n  mutate(date_from=case_when(!is.na(date)~\"direct\",\n                        (is.na(date) & !is.na(start))~\"start\",\n                        (is.na(date) & !is.na(end))~\"end\")) %&gt;% \n  mutate(date=case_when(!is.na(date)~date,\n                        (is.na(date) & !is.na(start))~start,\n                        (is.na(date) & !is.na(end))~end)) %&gt;% \n  mutate(date_label=case_when(is.na(date)~stringr::str_extract(flood_label,\"\\\\d{4}\"))) %&gt;% \n  mutate(date_from=case_when(!is.na(date_label)~\"flood_label\",\n                             is.na(date_label)~date_from)) %&gt;% \n  mutate(date=case_when(is.na(date) & !is.na(date_label)~paste0(date_label,\"-01-01\"),\n                        TRUE~date)) %&gt;% \n  filter(date_precision&gt;9|is.na(date_precision)) %&gt;% \n  mutate(date=lubridate::ymd(date),\n         start=lubridate::ymd(start),\n         end=lubridate::ymd(end))\n\n\n\n\nCode\ndates %&gt;% \n  group_by(date_from) %&gt;% \n  tally()\n\n\n# A tibble: 4 × 2\n  date_from       n\n  &lt;chr&gt;       &lt;int&gt;\n1 direct        346\n2 flood_label   119\n3 start         190\n4 &lt;NA&gt;           48\n\n\nJoin to dates and remove geological scale events\n\n\nCode\nwd=wd_raw  %&gt;% \n  select(-coords,-country,-country_label) %&gt;% \n  left_join(floodlocs,by=c(\"flood\"),\n            relationship =\"many-to-many\") %&gt;% \n  left_join(dates, by=c(\"flood\"),\n            relationship =\"many-to-many\") %&gt;% \n  mutate(year=lubridate::year(date)) #%&gt;%\n  # filter(!is.na(coords)) %&gt;% \n  # group_by(flood) %&gt;%\n  # sf::st_as_sf(wkt=\"coords\") %&gt;% \n  # summarise(flood_label=first(flood_label),\n  #           coords_from=first(coords_from),\n  #           year=first(year),\n  #           date=first(date),\n  #           date_precision=first(date_precision),\n  #           start=first(start),\n  #           end=first(end),\n  #           country_label=paste0(unique(country_label),collapse=\";\"),\n  #           deathtoll=mean(deathtoll)) %&gt;% \n  # sf::st_centroid()"
  },
  {
    "objectID": "index.html#section",
    "href": "index.html#section",
    "title": "glourb_floods",
    "section": "",
    "text": "# spq_add(\"?article schema:about ?flood\",.required=FALSE) %&gt;%  \n    # spq_add(\"?article schema:isPartOf &lt;https://en.wikipedia.org/&gt;\",.required=FALSE)"
  },
  {
    "objectID": "index.html#join-and-create-map",
    "href": "index.html#join-and-create-map",
    "title": "glourb_floods",
    "section": "Join and create map",
    "text": "Join and create map\n\nwd_locdate=wd_loc %&gt;% \n  mutate(flood=stringr::str_replace_all(flood,\n                                        \"http://www.wikidata.org/entity/\", \"wd:\")) %&gt;% \n  left_join(dates,by=\"flood\") %&gt;%\n  filter(date_precision&gt;9)\n\nWarning in left_join(., dates, by = \"flood\"): Detected an unexpected many-to-many relationship between `x` and `y`.\nℹ Row 25 of `x` matches multiple rows in `y`.\nℹ Row 3 of `y` matches multiple rows in `x`.\nℹ If a many-to-many relationship is expected, set `relationship =\n  \"many-to-many\"` to silence this warning.\n\n\n\nlibrary(leaflet) \nwd_map=wd_locdate %&gt;% \n  filter(!is.na(coords)) %&gt;% \n  sf::st_as_sf(wkt=\"coords\") %&gt;% \n  mutate(year=lubridate::year(date)) %&gt;% \n  mutate(popup=glue::glue(\"&lt;h1&gt;{flood_label}&lt;/h1&gt;\n                          &lt;p&gt;date:{date}&lt;/p&gt;\n                          &lt;p&gt;deathtoll:{deathtoll}&lt;/p&gt;\"))\n# Définition d'une échelle colorée \n# (en fonction de date de sortie) \npal &lt;- colorNumeric(c(\"red\", \"green\", \"blue\"),\n                    c(1648,1800,1900,1950,1980,2000,2010,2023)) \n# Création de la carte \nmap=leaflet(wd_map) %&gt;% # déf carte \n  addTiles() %&gt;% # ajout fond de carte\n  addCircleMarkers(col=~pal(year),\n                   popup = ~popup,\n                   clusterOptions = markerClusterOptions()) \n\nWarning in pal(year): Some values were outside the color scale and will be\ntreated as NA\n\nWarning in pal(year): Some values were outside the color scale and will be\ntreated as NA\n\n\n\nmap"
  },
  {
    "objectID": "index.html#prepare-for-comparison",
    "href": "index.html#prepare-for-comparison",
    "title": "General purpose",
    "section": "Prepare for comparison",
    "text": "Prepare for comparison\n\n\nCode\n# seqdates=function(start,end){\n#   if(is.na(start)|is.na(end)){return(lubridate::as_datetime(NA))}\n#   seq=seq(start,end,by=\"month\")\n#   return(seq)\n# }"
  },
  {
    "objectID": "index.html#add-wiki-sites",
    "href": "index.html#add-wiki-sites",
    "title": "glourb_floods",
    "section": "Add wiki sites",
    "text": "Add wiki sites\n\n\nCode\nget_wikisites=function(flood_id){\n  result=spq_init() %&gt;%\n    spq_set(flood=flood_id) %&gt;% \n    spq_add(\"?article schema:about ?flood\") %&gt;%  \n    spq_select(-flood) %&gt;% \n    spq_perform() %&gt;% \n    filter(stringr::str_detect(article,\"wikipedia\"))\n  result\n}\n\n\n\n\nCode\nif(!file.exists(\"data/wikisites.RDS\")){\n  wikisites=wd %&gt;%\n    #sf::st_drop_geometry() %&gt;% \n    select(flood,flood_label) %&gt;% \n    unique() %&gt;% \n    mutate(flood=stringr::str_replace_all(flood,\n                                          \"http://www.wikidata.org/entity/\", \"wd:\")) %&gt;%\n    mutate(wikisites=purrr::map(flood,get_wikisites)) %&gt;% \n    tidyr::unnest(c(wikisites))\n  saveRDS(wikisites, \"data/wikisites.RDS\")\n}\nwikisites=readRDS(\"data/wikisites.RDS\")"
  },
  {
    "objectID": "index.html#join-to-dates-and-remove-geological-scale-events",
    "href": "index.html#join-to-dates-and-remove-geological-scale-events",
    "title": "glourb_floods",
    "section": "Join to dates and remove geological scale events",
    "text": "Join to dates and remove geological scale events\n\n\nCode\nwd_locdate=wd_loc %&gt;% \n  mutate(flood=stringr::str_replace_all(flood,\n                                        \"http://www.wikidata.org/entity/\", \"wd:\")) %&gt;% \n  left_join(dates,by=c(\"flood\",\"flood_label\")) %&gt;%\n  filter(date_precision&gt;9|is.na(date_precision)) %&gt;% \n  mutate(year=lubridate::year(date)) %&gt;%\n  filter(!is.na(coords)) %&gt;% \n  group_by(flood) %&gt;% \n  sf::st_as_sf(wkt=\"coords\") %&gt;% \n  summarise(flood_label=first(flood_label),\n            coords_from=first(coords_from),\n            year=first(year),\n            date=first(date),\n            date_precision=first(date_precision),\n            start=first(start),\n            end=first(end),\n            country_label=paste0(unique(country_label),collapse=\";\"),\n            deathtoll=mean(deathtoll)) %&gt;% \n  sf::st_centroid() \n\n\nWarning in left_join(., dates, by = c(\"flood\", \"flood_label\")): Detected an unexpected many-to-many relationship between `x` and `y`.\nℹ Row 25 of `x` matches multiple rows in `y`.\nℹ Row 3 of `y` matches multiple rows in `x`.\nℹ If a many-to-many relationship is expected, set `relationship =\n  \"many-to-many\"` to silence this warning."
  },
  {
    "objectID": "index.html#summary-data",
    "href": "index.html#summary-data",
    "title": "General purpose",
    "section": "",
    "text": "Code\nwd_events=readRDS(\"data/wd_events.RDS\")\nwd_full=readRDS(\"data/wd_full.RDS\")\nNwd=wd_events %&gt;% nrow()\nNaft1900=wd_events %&gt;% filter(year&gt;=1900) %&gt;% nrow()\nNaft2000=wd_events %&gt;% filter(year&gt;=2000) %&gt;% nrow()\nPropaft1900=Naft1900/Nwd\nPropaft2000=Naft2000/Nwd\n\n\nOur Wikidata base documents 811 flood events, 0.6300863% of which occurred after 1900 and 0.4401973% of which occurred after 2000.\n\n\nCode\nggplot(wd_events, aes(x=year))+\n  geom_histogram(breaks=c(0,1000,1100,1200,1300,1400,1500,1600,1700,1800,1850,1900,1950,2000,2023))\n\n\nWarning: Removed 157 rows containing non-finite values (`stat_bin()`).\n\n\nCode\nggplot(wd_events %&gt;% filter(year&gt;=2000), aes(x=year))+\n  geom_histogram(breaks=2000:2023)\n\n\n\n\n\nFigure 1: Distribution of flood events through time\n\n\n\n\n\n\n\nFigure 2: Distribution of flood events through time"
  },
  {
    "objectID": "index.html#try-and-find-correspondences",
    "href": "index.html#try-and-find-correspondences",
    "title": "General purpose",
    "section": "Try and find correspondences",
    "text": "Try and find correspondences\n\n\nCode\ntib=sf::st_as_sf(tib,wkt=\"coords\")\nflood_id=\"wd:Q106611659\"\n\n\nfind_corresponding_flood=function(flood_id){\n  tib_sub=tib %&gt;% filter(flood==flood_id)\n  tib_dist=tib %&gt;% \n    mutate(disttime=abs(tib$date-tib_sub$date),\n           distspace=sf::st_distance(tib,tib_sub)[,1]) %&gt;% \n    filter(flood!=flood_id) %&gt;% \n    filter(disttime&lt;60 & distspace&lt;10) %&gt;% \n    filter(disttime==min(disttime)|distspace==min(distspace)) %&gt;% \n    select(floodcorr=flood,\n           disttime,\n           distspace,\n           sourcecorr=source,\n           country_corr=country_label,\n           deathtoll_corr=deathtoll) %&gt;% \n    sf::st_drop_geometry()\n  if(nrow(tib_dist)==0){\n    tib_dist=tibble::tibble(floodcorr=NA,\n                            disttime=NA,\n                            distspace=NA,\n                            sourcecorr=NA,\n                            countrycorr=NA,\n                            deathtollcorr=NA)\n  }\n  return(tib_dist)\n}\nif(!file.exists(\"data/tibcorr.RDS\")){\ntibcorr=tib %&gt;% \n  mutate(data=purrr::map(flood,find_corresponding_flood)) %&gt;% \n  tidyr::unnest(data) %&gt;% \n  filter(source==\"wd\" & sourcecorr==\"gfd\")\nsaveRDS(tibcorr,\n        \"data/tibcorr.RDS\")\n}\ntibcorr=readRDS(\"data/tibcorr.RDS\")\ntruc=bind_rows(tibble::tibble(id=1:nrow(tibcorr),flood=tibcorr$flood),\n               tibble::tibble(id=1:nrow(tibcorr),flood=tibcorr$floodcorr))\ntruc=left_join(tib,truc, by=\"flood\",\n               relationship =\"many-to-many\") %&gt;% \n  select(id,flood) %&gt;%\n  filter(!is.na(id)) %&gt;% \n  group_by(id) %&gt;% \n  summarise(m =mean(id),do_union=FALSE) %&gt;% \n  sf::st_cast(\"LINESTRING\")"
  },
  {
    "objectID": "index.html#map-comparison",
    "href": "index.html#map-comparison",
    "title": "General purpose",
    "section": "Map comparison",
    "text": "Map comparison\n\n\nCode\nlibrary(leaflet) \n# Définition d'une échelle colorée \n# (en fonction de date de sortie) \n# Création de la carte \njoined_events=readRDS(\"data/joined_events.RDS\")\npal=colorFactor(c(\"red\",\"blue\"), domain=c(\"wd\",\"dfo\"))\ncomp_map=leaflet(wm_dfo %&gt;% \n  sf::st_drop_geometry())  %&gt;%\n  addProviderTiles(providers$Esri.WorldTopoMap) %&gt;% # ajout fond de carte\n  addCircleMarkers(col=~pal(source),\n                   popup =~popup,\n                   radius =~log(deathtoll+2)\n                   )  %&gt;%\n  addPolylines(data=joined_events,color=\"green\")\n\n\n\n\nCode\ncomp_map"
  },
  {
    "objectID": "index.html#basic-query",
    "href": "index.html#basic-query",
    "title": "glourb_floods",
    "section": "Basic query",
    "text": "Basic query\nWe query the Wikidata Triplestore through the {glitter} R package (ref).\n\n\nCode\nlibrary(glitter)\nlibrary(tidyverse)\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\nCode\nif(!file.exists(\"data/wd_raw.RDS\")){\n  wd_raw=spq_init() %&gt;%\n    spq_add(\"?flood wdt:P31/wdt:P279* wd:Q8068\") %&gt;% \n    spq_add(\"?flood wdt:P31 ?what\") %&gt;%\n    spq_add(\"?flood wdt:P625 ?coords\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P17 ?country\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P1120 ?deathtoll\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P276 ?loc\",.required=FALSE) %&gt;%\n    spq_label(flood,country,what) %&gt;%\n    spq_perform() %&gt;% \n    mutate(deathtoll=as.numeric(deathtoll)) %&gt;% \n    mutate(loc=stringr::str_replace_all(loc, \"http://www.wikidata.org/entity/\", \"wd:\"))\n  saveRDS(wd_raw,\"data/wd_raw.RDS\")\n}\nwd_raw=readRDS(\"data/wd_raw.RDS\") %&gt;% \n  mutate(country=stringr::str_replace_all(country, \"http://www.wikidata.org/entity/\", \"wd:\")) %&gt;% \n  mutate(flood=stringr::str_replace_all(flood, \"http://www.wikidata.org/entity/\", \"wd:\"))\nhead(wd_raw)\n\n\n# A tibble: 6 × 9\n  what        flood deathtoll country country_label flood_label what_label loc  \n  &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;\n1 http://www… wd:Q…      1666 wd:Q843 Pakistan      2022 Pakis… natural d… &lt;NA&gt; \n2 http://www… wd:Q…       116 wd:Q668 India         2022 India… natural d… &lt;NA&gt; \n3 http://www… wd:Q…       116 wd:Q902 Bangladesh    2022 India… natural d… &lt;NA&gt; \n4 http://www… wd:Q…       506 wd:Q258 South Africa  1987 South… natural d… wd:Q…\n5 http://www… wd:Q…       435 wd:Q258 South Africa  2022 KwaZu… natural d… wd:Q…\n6 http://www… wd:Q…        14 wd:Q258 South Africa  2022 East … natural d… wd:Q…\n# ℹ 1 more variable: coords &lt;chr&gt;\n\n\nThis table has 1587 rows and documents 804 flood events.\nThe degree of precision in the geographical location for each of these floods might vary. For each recorded flood event we might have access to all or part of these informations:\n\na location (loc) which might refer to a scale as varied as continent/sub-continent, country, basin, city, etc.\na country (country)\nspatial coordinates (coords)\n\nIn case location is not provided, we approximate it with country (if available).\n\n\nCode\nwd_raw=wd_raw %&gt;% \n  mutate(loc=case_when(is.na(loc)~country,\n                       !is.na(loc)~loc))"
  },
  {
    "objectID": "index.html#add-coordinates",
    "href": "index.html#add-coordinates",
    "title": "glourb_floods",
    "section": "Add coordinates",
    "text": "Add coordinates\nNow we try and complete geographical informations based on Wikidata. For each location identifier, we collect data about\n\ncountry of the location (country_loc)\ncoordinates of the location (coords_loc)\ntype of location (loc_type)\n\n\n\nCode\nget_loc_info=function(loc_id){\n  result=spq_init() %&gt;%\n    spq_set(loc=loc_id) %&gt;% \n    spq_add(\"?loc wdt:P17 ?country_loc\") %&gt;% \n    spq_add(\"?loc wdt:P625 ?coords_loc\") %&gt;% \n    spq_add(\"?loc wdt:P31 ?loc_type\") %&gt;% \n    spq_label(loc, country_loc, loc_type) %&gt;% \n    spq_select(-loc) %&gt;% \n    spq_perform()\n  result\n}\n\n\nWe apply this query to all locations mentioned in wd_raw:\n\n\nCode\nif(!file.exists(\"data/locs.RDS\")){\n  locs=wd_raw %&gt;%\n    select(loc) %&gt;% \n    unique() %&gt;% \n    na.omit() %&gt;% \n    mutate(data=purrr::map(loc,get_loc_info)) %&gt;% \n    tidyr::unnest(data)\n  saveRDS(locs, \"data/locs.RDS\")\n}\nlocs=readRDS(\"data/locs.RDS\")\n# summarise which loc_types are sub-categories of human settlement\n\n\nWe then update the data about floods taking into account that supplementary data about locations.\nGet coordinates of countries\nWe also want to get country coordinates\n\n\nCode\nget_country_info=function(country_id){\n  result=spq_init() %&gt;%\n    spq_set(country=country_id) %&gt;% \n    spq_add(\"?country wdt:P625 ?coords_country\") %&gt;%\n    spq_select(-country) %&gt;% \n    spq_perform() \n  result\n}\n\n\n\n\nCode\nif(!file.exists(\"data/countries.RDS\")){\n  countries=wd_raw %&gt;%\n    select(country) %&gt;% \n    unique() %&gt;% \n    na.omit() %&gt;% \n    mutate(data=purrr::map(country,get_country_info)) %&gt;% \n    tidyr::unnest(data)\n  saveRDS(countries, \"data/countries.RDS\")\n}\ncountries=readRDS(\"data/countries.RDS\")\n\n\nNow we update the data about floods taking into account that supplementary data about countries:\n\n\nCode\nfloodlocs=wd_raw %&gt;%\n  left_join(locs,by=\"loc\",\n            relationship =\"many-to-many\") %&gt;%\n  mutate(country_label=case_when(country_label==\"\"~country_loc_label,\n                                 is.na(country_label)~country_loc_label,\n                                 country_label!=\"\"~country_label)) %&gt;% \n  mutate(country=case_when(is.na(country)~country_loc,\n                           !is.na(country)~country)) %&gt;% \n  mutate(coords_from=case_when(!is.na(coords)~\"flood\",\n                               is.na(coords)~\"location\")) %&gt;% \n  select(flood,flood_label,coords,coords_loc,country,country_label) %&gt;% \n  left_join(countries,by=\"country\",\n            relationship =\"many-to-many\") %&gt;%\n  mutate(coords_from=case_when(is.na(coords) & is.na(coords_loc) & !is.na(coords_country) ~\"3) country\",\n                               !is.na(coords_loc)~\"2) location\",\n                               !is.na(coords)~\"1) not infered: direct\",\n                               TRUE~\"4) no coordinates\")) %&gt;% \n  mutate(coords=case_when(is.na(coords)~coords_loc,\n                          !is.na(coords)~coords)) %&gt;%\n  mutate(coords=case_when(is.na(coords)~coords_country,\n                          !is.na(coords)~coords)) %&gt;% \n  unique()\n\n\nThe coordinates for the flood events are thus inferred from:\n\n\nCode\nfloodlocs %&gt;%\n  group_by(flood,coords_from) %&gt;%\n  summarise(coords_from=unique(coords_from)) %&gt;% \n  ungroup() %&gt;% \n  group_by(coords_from) %&gt;% \n  summarise(n=n())\n\n\n`summarise()` has grouped output by 'flood'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 4 × 2\n  coords_from                n\n  &lt;chr&gt;                  &lt;int&gt;\n1 1) not infered: direct    80\n2 2) location              397\n3 3) country               261\n4 4) no coordinates         82"
  },
  {
    "objectID": "index.html#add-images",
    "href": "index.html#add-images",
    "title": "glourb_floods",
    "section": "Add images",
    "text": "Add images\n\n\nCode\nget_images=function(flood_id){\n  result=spq_init() %&gt;%\n    spq_set(flood=flood_id) %&gt;% \n    spq_add(\"?flood wdt:P18 ?image\") %&gt;%  \n    spq_select(-flood) %&gt;% \n    spq_perform()\n  result\n}\n\n\n\n\nCode\nif(!file.exists(\"data/images.RDS\")){\n  images=wd %&gt;%\n    #sf::st_drop_geometry() %&gt;% \n    select(flood,flood_label) %&gt;% \n    unique() %&gt;% \n    mutate(flood=stringr::str_replace_all(flood,\n                                          \"http://www.wikidata.org/entity/\", \"wd:\")) %&gt;%\n    mutate(images=purrr::map(flood,get_images)) %&gt;% \n    tidyr::unnest(c(images))\n  saveRDS(images, \"data/images.RDS\")\n}\nimages=readRDS(\"data/images.RDS\")"
  },
  {
    "objectID": "index.html#add-categories",
    "href": "index.html#add-categories",
    "title": "glourb_floods",
    "section": "Add categories",
    "text": "Add categories\n\n\nCode\nget_categories=function(flood_id){\n  result=spq_init() %&gt;%\n    spq_set(flood=flood_id) %&gt;% \n    spq_add(\"?flood wdt:P373 ?category\") %&gt;%  \n    spq_select(-flood) %&gt;% \n    spq_perform()\n  result\n}\n\n\n\n\nCode\nif(!file.exists(\"data/categories.RDS\")){\n  categories=wd %&gt;%\n    #sf::st_drop_geometry() %&gt;% \n    select(flood,flood_label) %&gt;% \n    unique() %&gt;% \n    mutate(flood=stringr::str_replace_all(flood,\n                                          \"http://www.wikidata.org/entity/\", \"wd:\")) %&gt;%\n    mutate(categories=purrr::map(flood,get_categories)) %&gt;% \n    tidyr::unnest(c(categories))\n  saveRDS(categories, \"data/categories.RDS\")\n}\ncategories=readRDS(\"data/categories.RDS\")"
  },
  {
    "objectID": "index.html#join-everything",
    "href": "index.html#join-everything",
    "title": "glourb_floods",
    "section": "Join everything",
    "text": "Join everything\n\n\nCode\nwd_events=wd %&gt;% \n  #sf::st_drop_geometry() %&gt;% \n  select(-date,-date_precision) %&gt;% \n  left_join(dates %&gt;% select(flood,date,date_precision),by=c(\"flood\"),\n            relationship =\"many-to-many\") %&gt;% \n  unique()\nwd_full=wd_events %&gt;% \n  left_join(wikisites,by=c(\"flood\",\"flood_label\"),\n            relationship =\"many-to-many\") %&gt;% \n  left_join(images,by=c(\"flood\",\"flood_label\"),\n            relationship =\"many-to-many\") %&gt;% \n  left_join(categories,by=c(\"flood\",\"flood_label\"),\n            relationship =\"many-to-many\")\nwd_events=wd_events %&gt;% select(flood,flood_label,date) %&gt;%\n  mutate(year=lubridate::year(date)) %&gt;% \n  unique()"
  },
  {
    "objectID": "collect_and_curate_wikidata.html",
    "href": "collect_and_curate_wikidata.html",
    "title": "Collect Wikidata about floods",
    "section": "",
    "text": "Code\nlibrary(glitter)\nlibrary(tidyverse)\nlibrary(sequins)\n\n\n\n\nWe query the Wikidata Triplestore through the {glitter} R package (ref).\n\n\nCode\nquery=spq_init() %&gt;%\n    spq_add(\"?flood wdt:P31/wdt:P279* wd:Q8068\") %&gt;% \n    spq_add(\"?flood wdt:P31 ?what\") %&gt;%\n    spq_add(\"?flood wdt:P625 ?coords\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P17 ?country\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P1120 ?deathtoll\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P276 ?loc\",.required=FALSE) %&gt;%\n    spq_label(flood,country,what) \nplot_query(query, labelling=TRUE)\n\n\n\n\n\nHere are the initial results we get when performing this query:\n\n\nCode\nif(!file.exists(\"data/wd_raw.RDS\")){\n  wd_raw=query %&gt;%\n    spq_perform(replace_prefixes=TRUE) %&gt;% \n    mutate(deathtoll=as.numeric(deathtoll))\n  saveRDS(wd_raw,\"data/wd_raw.RDS\")\n}\nwd_raw=readRDS(\"data/wd_raw.RDS\")\nkableExtra::kable(wd_raw %&gt;% head(20))\n\n\n\n\n\nwhat\nflood\nloc\ndeathtoll\ncountry\ncountry_label\nflood_label\nwhat_label\ncoords\n\n\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6886\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q7788\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q15175\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q19206\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q43934\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q45208\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6401352\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6886\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q7788\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q15175\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q19206\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q43934\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q45208\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6401352\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q119109771\nwd:Q790\n51\nwd:Q790\nHaiti\n2023 Haiti floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q122311510\nwd:Q10388860\n47\nwd:Q155\nBrazil\n2023 Rio Grande do Sul floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q1599758\nwd:Q183\n16\nwd:Q183\nGermany\nflood disaster\nnatural disaster\nPoint(9.44786 51.6426)\n\n\nwd:Q8065\nwd:Q113288859\nwd:Q843\n1666\nwd:Q843\nPakistan\n2022 Pakistan floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q20630431\nwd:Q1061\n70\nwd:Q668\nIndia\n2015 Gujarat flood\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q118433941\nwd:Q1263\n17\nwd:Q38\nItaly\n2023 Emilia-Romagna floods\nnatural disaster\nNA\n\n\n\n\n\n\n\nThis table has 1587 rows and documents 804 flood events.\nThe degree of precision in the geographical location for each of these floods might vary. For each recorded flood event we might have access to all or part of these informations:\n\na location (loc) which might refer to a scale as varied as continent/sub-continent, country, basin, city, etc.\na country (country)\nspatial coordinates (coords)\n\nIn case location is not provided, we approximate it with country (if available).\n\n\nCode\nwd_raw=wd_raw %&gt;% \n  mutate(loc=case_when(is.na(loc)~country,\n                       !is.na(loc)~loc))"
  },
  {
    "objectID": "collect_and_curate_wikidata.html#basic-query",
    "href": "collect_and_curate_wikidata.html#basic-query",
    "title": "Collect Wikidata about floods",
    "section": "",
    "text": "We query the Wikidata Triplestore through the {glitter} R package (ref).\n\n\nCode\nquery=spq_init() %&gt;%\n    spq_add(\"?flood wdt:P31/wdt:P279* wd:Q8068\") %&gt;% \n    spq_add(\"?flood wdt:P31 ?what\") %&gt;%\n    spq_add(\"?flood wdt:P625 ?coords\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P17 ?country\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P1120 ?deathtoll\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P276 ?loc\",.required=FALSE) %&gt;%\n    spq_label(flood,country,what) \nplot_query(query, labelling=TRUE)\n\n\n\n\n\nHere are the initial results we get when performing this query:\n\n\nCode\nif(!file.exists(\"data/wd_raw.RDS\")){\n  wd_raw=query %&gt;%\n    spq_perform(replace_prefixes=TRUE) %&gt;% \n    mutate(deathtoll=as.numeric(deathtoll))\n  saveRDS(wd_raw,\"data/wd_raw.RDS\")\n}\nwd_raw=readRDS(\"data/wd_raw.RDS\")\nkableExtra::kable(wd_raw %&gt;% head(20))\n\n\n\n\n\nwhat\nflood\nloc\ndeathtoll\ncountry\ncountry_label\nflood_label\nwhat_label\ncoords\n\n\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6886\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q7788\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q15175\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q19206\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q43934\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q45208\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6401352\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6886\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q7788\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q15175\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q19206\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q43934\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q45208\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6401352\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q119109771\nwd:Q790\n51\nwd:Q790\nHaiti\n2023 Haiti floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q122311510\nwd:Q10388860\n47\nwd:Q155\nBrazil\n2023 Rio Grande do Sul floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q1599758\nwd:Q183\n16\nwd:Q183\nGermany\nflood disaster\nnatural disaster\nPoint(9.44786 51.6426)\n\n\nwd:Q8065\nwd:Q113288859\nwd:Q843\n1666\nwd:Q843\nPakistan\n2022 Pakistan floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q20630431\nwd:Q1061\n70\nwd:Q668\nIndia\n2015 Gujarat flood\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q118433941\nwd:Q1263\n17\nwd:Q38\nItaly\n2023 Emilia-Romagna floods\nnatural disaster\nNA\n\n\n\n\n\n\n\nThis table has 1587 rows and documents 804 flood events.\nThe degree of precision in the geographical location for each of these floods might vary. For each recorded flood event we might have access to all or part of these informations:\n\na location (loc) which might refer to a scale as varied as continent/sub-continent, country, basin, city, etc.\na country (country)\nspatial coordinates (coords)\n\nIn case location is not provided, we approximate it with country (if available).\n\n\nCode\nwd_raw=wd_raw %&gt;% \n  mutate(loc=case_when(is.na(loc)~country,\n                       !is.na(loc)~loc))"
  },
  {
    "objectID": "collect_and_curate_wikidata.html#add-coordinates",
    "href": "collect_and_curate_wikidata.html#add-coordinates",
    "title": "Collect Wikidata about floods",
    "section": "",
    "text": "Now we try and complete our dataset with coordinates, for the events that do not come directly with coordinates. We perform the task thanks to the linked nature of Wikidata’s knowledge graph.\n\n\nHere is a function that collects data for each location identifier about:\n\ncountry of the location (country_loc)\ncoordinates of the location (coords_loc)\ntype of location (loc_type)\n\n\n\nCode\nget_loc_info=function(loc_id){\n  result=spq_init() %&gt;%\n    spq_set(loc=loc_id) %&gt;% \n    spq_add(\"?loc wdt:P17 ?country_loc\") %&gt;% \n    spq_add(\"?loc wdt:P625 ?coords_loc\") %&gt;% \n    spq_add(\"?loc wdt:P31 ?loc_type\") %&gt;% \n    spq_label(loc, country_loc, loc_type) %&gt;% \n    spq_select(-loc) %&gt;% \n    spq_perform(replace_prefixes=TRUE)\n  result\n}\n\n\nWe apply this function to all locations appearing in wd_raw:\n\n\nCode\nif(!file.exists(\"data/locs.RDS\")){\n  locs=wd_raw %&gt;%\n    select(loc) %&gt;% \n    unique() %&gt;% \n    na.omit() %&gt;% \n    mutate(data=purrr::map(loc,get_loc_info)) %&gt;% \n    tidyr::unnest(data)\n  saveRDS(locs, \"data/locs.RDS\")\n}\nlocs=readRDS(\"data/locs.RDS\")\n# summarise which loc_types are sub-categories of human settlement\n\n\n\n\n\nFor some events, location is not provided, only country. We still use this information, though imprecise, to locate these.\nHere is a function that collects data for each country identifier about the coordinates of the location (coords_country)\n\n\nCode\nget_country_info=function(country_id){\n  result=spq_init() %&gt;%\n    spq_set(country=country_id) %&gt;% \n    spq_add(\"?country wdt:P625 ?coords_country\") %&gt;%\n    spq_select(-country) %&gt;% \n    spq_perform(replace_prefixes=TRUE) \n  result\n}\n\n\nWe apply this function to all countries appearing in the raw dataset which might provide us with coordinates for the events, when missing.\n\n\nCode\nif(!file.exists(\"data/countries.RDS\")){\n  countries=wd_raw %&gt;%\n    select(country) %&gt;% \n    unique() %&gt;% \n    na.omit() %&gt;% \n    mutate(data=purrr::map(country,get_country_info)) %&gt;% \n    tidyr::unnest(data)\n  saveRDS(countries, \"data/countries.RDS\")\n}\ncountries=readRDS(\"data/countries.RDS\")\n\n\n\n\n\nNow we update the data about floods taking into account that supplementary data about countries, and locations:\n\n\nCode\nfloodlocs=wd_raw %&gt;%\n  left_join(locs,by=\"loc\",\n            relationship =\"many-to-many\") %&gt;%\n  mutate(country_label=case_when(country_label==\"\"~country_loc_label,\n                                 is.na(country_label)~country_loc_label,\n                                 country_label!=\"\"~country_label)) %&gt;% \n  mutate(country=case_when(is.na(country)~country_loc,\n                           !is.na(country)~country)) %&gt;% \n  mutate(coords_from=case_when(!is.na(coords)~\"flood\",\n                               is.na(coords)~\"location\")) %&gt;% \n  select(flood,flood_label,coords,coords_loc,country,country_label) %&gt;% \n  left_join(countries,by=\"country\",\n            relationship =\"many-to-many\") %&gt;%\n  mutate(coords_from=case_when(is.na(coords) & is.na(coords_loc) & !is.na(coords_country) ~\"3) country\",\n                               !is.na(coords_loc)~\"2) location\",\n                               !is.na(coords)~\"1) direct\",\n                               TRUE~\"4) no coordinates\")) %&gt;% \n  mutate(coords=case_when(is.na(coords)~coords_loc,\n                          !is.na(coords)~coords)) %&gt;%\n  mutate(coords=case_when(is.na(coords)~coords_country,\n                          !is.na(coords)~coords)) %&gt;% \n  unique()\n\n\nThe coordinates for the flood events are thus inferred from:\n\n\nCode\nfloodlocs %&gt;%\n  group_by(flood,coords_from) %&gt;%\n  summarise(coords_from=unique(coords_from),.groups=\"drop\") %&gt;% \n  ungroup() %&gt;% \n  group_by(coords_from) %&gt;% \n  summarise(n=n(),.groups=\"drop\")\n\n\n# A tibble: 4 × 2\n  coords_from           n\n  &lt;chr&gt;             &lt;int&gt;\n1 1) direct            12\n2 2) location         689\n3 3) country           28\n4 4) no coordinates    81"
  },
  {
    "objectID": "collect_and_curate_wikidata.html#get-and-clean-dates",
    "href": "collect_and_curate_wikidata.html#get-and-clean-dates",
    "title": "Collect Wikidata about floods",
    "section": "",
    "text": "Each flood event in Wikidata might come with all or part of the information regarding time of occurrence (wdt:P585), start time (wdt:P580) and end time (wdt:P582).\nWe write a function which collects this information for each flood event.\n\n\nCode\nget_date_info=function(flood_id,type=\"P585\"){\n  result=spq_init() %&gt;%\n    spq_set(flood=flood_id) %&gt;% \n    spq_add(glue::glue(\"?flood p:{type}/psv:{type} ?datestatement\")) %&gt;% \n    spq_add(\"?datestatement wikibase:timeValue ?datetime\") %&gt;%\n    spq_add(\"?datestatement wikibase:timePrecision ?precision\",.required=FALSE) %&gt;%\n    spq_mutate(date=as.date(datetime)) %&gt;% \n    spq_select(-datestatement,-datetime) %&gt;% \n    spq_perform(replace_prefixes=TRUE)\n  result\n}\n\n\nWe then apply this function to all locations mentioned in wd_raw:\n\n\nCode\nfill_void=function(tib,name=\"date\"){\n  if(nrow(tib)==0){\n    tib=tibble::tibble(flood=NA,\n                       date=NA,\n                       precision=NA)\n  }\n  tib=tib %&gt;% select(date, precision)\n  colnames(tib)=c(name,paste0(name,\"_precision\"))\n  return(tib)\n}\nif(!file.exists(\"data/dates.RDS\")){\n  dates=wd_raw %&gt;%\n    select(flood,flood_label)%&gt;% \n    unique() %&gt;%\n    mutate(date=purrr::map(flood,get_date_info)) %&gt;% \n    mutate(start=purrr::map(flood,get_date_info, type=\"P580\")) %&gt;%\n    mutate(end=purrr::map(flood,get_date_info, type=\"P582\")) %&gt;%\n    mutate(date=purrr::map(date,fill_void)) %&gt;% \n    mutate(start=purrr::map(start,fill_void,name=\"start\")) %&gt;% \n    mutate(end=purrr::map(end,fill_void,name=\"end\")) %&gt;% \n    tidyr::unnest(c(date,start,end))\n  saveRDS(dates, \"data/dates.RDS\")\n}\n\n\nThere is a certain heterogeneity in the way information about dates is provided. The flood events’ time of occurrence might be provided through the properties\n\npoint in time (P585)\nstart time (P580)\nend time (P582)\n\nWe infer the date of a flood event in that order of priority\n\nprimarily as the date provided by “point in time” (direct)\nOR by the average date between “start time” and “end time” if they are both provided (start or end),\nOR by start time or end time if only one of them is provided (av_start_end)\nOR by a year provided in flood labels in the form of 4 digits-words if possible (flood_label)\n\n\n\nCode\navdate=function(date1,date2){\n  date1=as.numeric(date1)\n  date2=as.numeric(date2)\n  result=as.Date(mean(c(date1,date2)))\n  return(result)\n}\n\n\n\n\nCode\ndates=readRDS(\"data/dates.RDS\") %&gt;% \n  filter(date_precision&gt;=9|is.na(date_precision)) %&gt;% \n  mutate(date=lubridate::ymd(date),\n         start=lubridate::ymd(start),\n         end=lubridate::ymd(end)) %&gt;%\n  mutate(date_from=case_when(!is.na(date)~\"direct\",\n                            (is.na(date) & !is.na(start) & !is.na(end))~\"av_start_end\",\n                            (is.na(date) & is.na(end) & !is.na(start))~\"start\",\n                            (is.na(date) & is.na(start) & !is.na(end))~\"end\")) %&gt;% \n  mutate(av_start_end=purrr::map2(start,end,avdate)) %&gt;% \n  tidyr::unnest(av_start_end) %&gt;% \n  mutate(date=case_when(!is.na(date)~date,\n                        (is.na(date) & !is.na(start) & !is.na(end))~av_start_end,\n                        (is.na(date) & is.na(end) & !is.na(start))~start,\n                        (is.na(date) & is.na(start) & !is.na(end))~end)) %&gt;% \n  mutate(date_label=stringr::str_extract(flood_label,\"\\\\d{4}\")) %&gt;% \n  mutate(date_label=case_when(!is.na(date_label)~paste0(date_label,\"-01-01\"),\n                              TRUE~NA)) %&gt;% \n  mutate(date_label=case_when(!is.na(date_label)~lubridate::ymd(date_label),\n                              TRUE~NA)) %&gt;% \n  mutate(date_from=case_when((is.na(date) & !is.na(date_label))~\"flood_label\",\n                              TRUE~date_from)) %&gt;% \n  mutate(date_precision=case_when((is.na(date) & !is.na(date_label))~9,\n                              TRUE~date_precision)) %&gt;% \n  mutate(date=case_when((is.na(date) & !is.na(date_label))~date_label,\n                        TRUE~date)) %&gt;% \n  select(-av_start_end)\n\n\nFinally, the dates provided in the dataset for the flood events correspond to the estimate given by:\n\n\nCode\ndates %&gt;% \n  group_by(date_from) %&gt;% \n  tally()\n\n\n# A tibble: 5 × 2\n  date_from        n\n  &lt;chr&gt;        &lt;int&gt;\n1 av_start_end   145\n2 direct         453\n3 flood_label    138\n4 start           45\n5 &lt;NA&gt;            31"
  },
  {
    "objectID": "collect_and_curate_wikidata.html#add-wiki-sites",
    "href": "collect_and_curate_wikidata.html#add-wiki-sites",
    "title": "Collect Wikidata about floods",
    "section": "Add wiki sites",
    "text": "Add wiki sites\nWe collect all wikipedia pages (in all languages) relative to the events.\n\n\nCode\nget_wikisites=function(flood_id){\n  result=spq_init() %&gt;%\n    spq_set(flood=flood_id) %&gt;% \n    spq_add(\"?article schema:about ?flood\") %&gt;%  \n    spq_select(-flood) %&gt;% \n    spq_perform() %&gt;% \n    filter(stringr::str_detect(article,\"wikipedia\"))\n  result\n}\n\n\n\n\nCode\nif(!file.exists(\"data/wikisites.RDS\")){\n  wikisites=wd %&gt;%\n    select(flood,flood_label) %&gt;% \n    unique() %&gt;%\n    mutate(wikisites=purrr::map(flood,get_wikisites)) %&gt;% \n    tidyr::unnest(c(wikisites))\n  saveRDS(wikisites, \"data/wikisites.RDS\")\n}\nwikisites=readRDS(\"data/wikisites.RDS\")\nwikisites=readRDS(\"data/wikisites_translated.RDS\")"
  },
  {
    "objectID": "collect_and_curate_wikidata.html#add-images",
    "href": "collect_and_curate_wikidata.html#add-images",
    "title": "Collect Wikidata about floods",
    "section": "Add images",
    "text": "Add images\nWe also collect images related to the flood events (wikidata property wdt:P18) when available\n\n\nCode\nget_images=function(flood_id){\n  result=spq_init() %&gt;%\n    spq_set(flood=flood_id) %&gt;% \n    spq_add(\"?flood wdt:P18 ?image\") %&gt;%  \n    spq_select(-flood) %&gt;% \n    spq_perform()\n  result\n}\n\n\n\n\nCode\nif(!file.exists(\"data/images.RDS\")){\n  images=wd %&gt;%\n    select(flood,flood_label) %&gt;% \n    unique() %&gt;% \n    mutate(images=purrr::map(flood,get_images)) %&gt;% \n    tidyr::unnest(c(images))\n  saveRDS(images, \"data/images.RDS\")\n}\nimages=readRDS(\"data/images.RDS\")"
  },
  {
    "objectID": "collect_and_curate_wikidata.html#add-categories",
    "href": "collect_and_curate_wikidata.html#add-categories",
    "title": "Collect Wikidata about floods",
    "section": "Add categories",
    "text": "Add categories\n\n\nCode\nget_categories=function(flood_id){\n  result=spq_init() %&gt;%\n    spq_set(flood=flood_id) %&gt;% \n    spq_add(\"?flood wdt:P373 ?category\") %&gt;%  \n    spq_select(-flood) %&gt;% \n    spq_perform()\n  result\n}\n\n\n\n\nCode\nif(!file.exists(\"data/categories.RDS\")){\n  categories=wd %&gt;%\n    select(flood,flood_label) %&gt;% \n    unique() %&gt;% \n    mutate(categories=purrr::map(flood,get_categories)) %&gt;% \n    tidyr::unnest(c(categories))\n  saveRDS(categories, \"data/categories.RDS\")\n}\ncategories=readRDS(\"data/categories.RDS\")"
  },
  {
    "objectID": "collect_and_curate_wikidata.html#join-everything",
    "href": "collect_and_curate_wikidata.html#join-everything",
    "title": "Collect Wikidata about floods",
    "section": "Join everything",
    "text": "Join everything\n\n\nCode\nwd_events=wd %&gt;% \n  select(-date,-date_precision) %&gt;% \n  left_join(dates %&gt;% select(flood,date,date_precision),by=c(\"flood\"),\n            relationship =\"many-to-many\") %&gt;% \n  unique()\nwd_full=wd_events %&gt;% \n  left_join(wikisites,by=c(\"flood\",\"flood_label\"),\n            relationship =\"many-to-many\") %&gt;% \n  left_join(images,by=c(\"flood\",\"flood_label\"),\n            relationship =\"many-to-many\") %&gt;% \n  left_join(categories,by=c(\"flood\",\"flood_label\"),\n            relationship =\"many-to-many\")\nwd_events=wd_events %&gt;% select(flood,flood_label,date) %&gt;%\n  mutate(year=lubridate::year(date)) %&gt;% \n  unique()\n\nsaveRDS(wd_full,\"data/wd_full.RDS\")\nsaveRDS(wd_events,\"data/wd_events.RDS\")"
  },
  {
    "objectID": "index.html#digital-humanities-quarterly-scope",
    "href": "index.html#digital-humanities-quarterly-scope",
    "title": "General purpose",
    "section": "",
    "text": "Open Access Journal. The journal’s scope includes but is not limited to:\n\nDigital Tools and Methods in Humanities Research: DHQ publishes articles that showcase innovative digital tools, methods, and approaches used in humanities scholarship. This can involve text analysis, data visualization, digital archives, GIS (Geographic Information Systems), network analysis, and more.\nCritical Assessment of Digital Technologies in Humanities Studies: DHQ features critical evaluations and discussions about the implications, challenges, and limitations of using digital technologies in humanities research. This includes considerations of ethics, accessibility, and cultural implications of digital humanities work.\nInterdisciplinary Collaborations: The journal promotes interdisciplinary collaborations by highlighting research at the intersection of humanities disciplines and technology. It covers collaborations between historians, literary scholars, linguists, cultural studies scholars, and experts in computer science, data science, and information technology.\nDigital Pedagogy and Teaching Approaches: DHQ discusses innovative pedagogical approaches that integrate digital tools and methods into humanities teaching. This includes case studies, reviews, and discussions on the use of technology in the classroom to enhance learning experiences.\nDigital Humanities Projects and Case Studies: The journal publishes case studies and reports on digital humanities projects, initiatives, and experiments, providing insights into the practical application of digital methods in various humanities fields.\nOpen Access and Open Data: DHQ supports open access and open data principles, often discussing issues related to data curation, preservation, and accessibility in the context of digital humanities research."
  },
  {
    "objectID": "index.html#basic-stats",
    "href": "index.html#basic-stats",
    "title": "General purpose",
    "section": "Basic stats",
    "text": "Basic stats\n\n\nCode\nwd_events=readRDS(\"data/wd_events.RDS\")\nwd_full=readRDS(\"data/wd_full.RDS\")\nNwd=wd_events %&gt;% nrow()\nNaft1900=wd_events %&gt;% filter(year&gt;=1900) %&gt;% nrow()\nNaft2000=wd_events %&gt;% filter(year&gt;=2000) %&gt;% nrow()\nPropaft1900=Naft1900/Nwd\nPropaft2000=Naft2000/Nwd\n\n\nOur Wikidata base documents 814 flood events, 0.7555283% of which occurred after 1900 and 0.5208845% of which occurred after 2000.\n\n\nCode\nwd_events_freq=wd_events %&gt;% \n  mutate(cat_year=cut(year,breaks=c(1000,1200,1400,1600,1800,\n                                    2000,2023),dig.lab=10)) %&gt;% \n  group_by(cat_year) %&gt;% tally()\np1=ggplot(wd_events_freq, aes(x=cat_year,y=n))+\n  geom_col()\np2=ggplot(wd_events %&gt;% filter(year&gt;=2000), aes(x=year))+\n  geom_histogram(breaks=2000:2023)\nfigure &lt;- ggarrange(p1,p2,\n                    labels = c(\"A\", \"B\"),\n                    ncol = 1, nrow = 2)\nfigure\n\n\n\n\n\nFigure 1: Distribution of flood events through time A) all events dated with a year-accuracy B) events dated with a year-accuracy starting in 2000"
  },
  {
    "objectID": "index.html#intro",
    "href": "index.html#intro",
    "title": "General purpose",
    "section": "",
    "text": "Sekajugo et al. (2022) explores the interest of citizen science for collecting data about floods, at a regional scale."
  },
  {
    "objectID": "index.html#map",
    "href": "index.html#map",
    "title": "Online reports and narrations of flood events",
    "section": "Map",
    "text": "Map\n\n\nCode\n# wm_map=readRDS(\"data/wm_map.RDS\")\n# # Définition d'une échelle colorée \n# # (en fonction de date de sortie) \n# pal &lt;- colorNumeric(c(\"red\", \"green\", \"blue\"),\n#                     c(1648,1900,1950,1980,2000,2010,2023)) \n# # Création de la carte \n# leaf_wm_map=leaflet(wm_map) %&gt;% # déf carte \n#   addProviderTiles(providers$Esri.WorldTopoMap) %&gt;% # ajout fond de carte\n#   addCircleMarkers(col=~pal(year),\n#                    popup = ~popup\n#                    ) \n# leaf_wm_map"
  },
  {
    "objectID": "index.html#data-from-the-dartmouth-flood-observatory",
    "href": "index.html#data-from-the-dartmouth-flood-observatory",
    "title": "General purpose",
    "section": "Data from the Dartmouth Flood Observatory",
    "text": "Data from the Dartmouth Flood Observatory\n\n\nCode\navdate=function(date1,date2){\n  date1=as.numeric(date1)\n  date2=as.numeric(date2)\n  result=as.Date(mean(c(date1,date2)))\n  return(result)\n}\n\n\n\n\nCode\ndfo_raw &lt;- readr::read_csv(\"data/FloodArchive.csv\", \n    locale = locale(decimal_mark = \",\"))\ncolnames(dfo_raw)=c(\"index\",\"GlideNumber\",\"dfo_country\",\"dfo_other_country\",\n           \"dfo_centroid_x\",\"dfo_centroid_y\",\"area\",\"dfo_began\",\"dfo_ended\",\n           \"validation\",\"dfo_dead\",\"displaced\",\"maincause\",\"severity\")\ndfo_raw=dfo_raw %&gt;% \n  mutate(start=lubridate::dmy(dfo_began),\n         end=lubridate::dmy(dfo_ended)) %&gt;% \n  mutate(dfo_other_country=case_when(is.na(dfo_other_country)~\"\",\n                                     dfo_other_country==0~\"\",\n                                     TRUE~dfo_other_country)) %&gt;% \n  mutate(flood=as.character(index),\n         flood_label=as.character(index),\n         country_label=paste(dfo_country,\" \",dfo_other_country),\n         deathtoll=dfo_dead,\n         coords=paste0(\"Point(\",dfo_centroid_x,\" \",dfo_centroid_y,\")\"))\ndfo_comp=dfo_raw %&gt;% \n  select(flood,flood_label,country_label,deathtoll, start, end,coords) %&gt;% \n  mutate(date=purrr::map2(start,end,avdate)) %&gt;% \n  tidyr::unnest(date)\n\n\n\n\nCode\ncoords_wd_map=sf::st_coordinates(wd_map) %&gt;%\n  as_tibble() %&gt;%\n  mutate(coords=glue::glue(\"Point({X} {Y})\")) %&gt;%\n  pull(coords)\nwd_comp=wd_map %&gt;%\n  sf::st_drop_geometry() %&gt;% \n  mutate(coords=coords_wd_map) %&gt;% \n  select(flood,flood_label,country_label,deathtoll, date ,start, end,coords,popup) %&gt;% \n  mutate(flood=stringr::str_replace(flood,\"wd:\",\"\"))\n\n\nThis dataset documents 5130 flood events that occurred between 1985-01-01 and 2021-10-09.\n\n\nCode\nNwd_in_range=wd_events %&gt;% \n  filter(year&gt;=1985 & year&lt;=2021) %&gt;% \n  sf::st_drop_geometry() %&gt;%\n  summarise(n=length(unique(flood))) %&gt;% \n  pull(n)\n\n\nBased on the dates of observations for the dfo data base, 417 out of the 814 flood events in our Wikidata base might fall into it."
  },
  {
    "objectID": "index.html#basic-stats-1",
    "href": "index.html#basic-stats-1",
    "title": "General purpose",
    "section": "Basic stats",
    "text": "Basic stats\n\n\nCode\nwd_comp=wd_comp  %&gt;% \n   mutate(source=\"wd\") %&gt;% \n   mutate(flood=paste0(\"wd:\",flood)) %&gt;% \n   sf::st_drop_geometry() %&gt;% \n   filter(date&gt;lubridate::ymd(\"1985-01-01\") & \n          date&lt;lubridate::ymd(\"2021-12-31\")) \ndfo_comp=dfo_comp %&gt;%\n   mutate(source=\"dfo\") %&gt;%\n   mutate(popup=glue::glue(\"&lt;h1&gt;{flood_label}&lt;/h1&gt;\n                            &lt;p&gt;date: {date}&lt;/p&gt;\n                            &lt;p&gt;deathtoll:{deathtoll}&lt;/p&gt;\"))  \ntib=bind_rows(wd_comp,dfo_comp) %&gt;% \n  mutate(date=lubridate::round_date(date,\"month\")) %&gt;% \n   sf::st_as_sf(wkt=\"coords\")\n\n\nBased on the spatial and temporal data in both datasets, we try to find correspondences between the events described in Wikidata and those described in the Dartmouth Flood Observatory.\n\n\nCode\n# tib %&gt;% \n#   sf::st_transform(crs=\"\")\n\nfind_corresponding_flood=function(flood_id,tib){\n  tib_sub=tib %&gt;% filter(flood==flood_id)\n  tib_dist=tib %&gt;% \n    mutate(disttime=abs(tib$date-tib_sub$date),\n           distspace=sf::st_distance(tib,tib_sub)[,1]) %&gt;% \n    filter(flood!=flood_id) %&gt;%  \n    filter(disttime==min(disttime)|distspace==min(distspace)) %&gt;% \n    filter(disttime&lt;60 & distspace&lt;2) %&gt;%\n    select(floodcorr=flood,\n           disttime,\n           distspace,\n           sourcecorr=source,\n           country_corr=country_label,\n           deathtoll_corr=deathtoll) %&gt;% \n    sf::st_drop_geometry()\n  if(nrow(tib_dist)==0){\n    tib_dist=tibble::tibble(floodcorr=NA,\n                            disttime=NA,\n                            distspace=NA,\n                            sourcecorr=NA,\n                            countrycorr=NA,\n                            deathtollcorr=NA)\n  }\n  return(tib_dist)\n}\n\n\n\n\nCode\nif(!file.exists(\"data/tibcorr.RDS\")){\ntibcorr= tib %&gt;% \n  mutate(data=purrr::map(flood,find_corresponding_flood,tib=tib)) %&gt;% \n  tidyr::unnest(data) %&gt;% \n  filter(source==\"wd\" & sourcecorr==\"dfo\")\nsaveRDS(tibcorr,\n        \"data/tibcorr.RDS\")\n}\n\n\n\n\nCode\ntib=sf::st_as_sf(tib,wkt=\"coords\")\ntibcorr=readRDS(\"data/tibcorr.RDS\") %&gt;% \n  sf::st_drop_geometry()\njoined_events=bind_rows(tibble::tibble(id=1:nrow(tibcorr),flood=tibcorr$flood),\n               tibble::tibble(id=1:nrow(tibcorr),flood=tibcorr$floodcorr))\njoined_events=tib %&gt;% \n  left_join(joined_events, by=\"flood\") %&gt;%  \n  select(id,flood) %&gt;% \n  group_by(id) %&gt;% \n  summarise(m =mean(id),do_union=FALSE) %&gt;% \n  sf::st_cast(\"LINESTRING\")\njoined_events=joined_events[1:(nrow(joined_events)-1),]"
  },
  {
    "objectID": "use_wikipedia.html",
    "href": "use_wikipedia.html",
    "title": "Use Wikipedia to complete Wikidata",
    "section": "",
    "text": "Use Wikipedia to complete Wikidata\n\n\nCode\nlibrary(tidyverse)\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\n\n\nCode\nif(!file.exists(\"data/wikisites_translated.RDS\")){\n  wikisites=readRDS(\"data/wikisites.RDS\") %&gt;% \n     mutate(lang=stringr::str_extract(article,\"(?&lt;=https://)[[:alpha:]]{2}\"))%&gt;% \n     mutate(title=stringr::str_extract(article,\"(?&lt;=\\\\/wiki\\\\/).*\")) %&gt;% \n     mutate(title=purrr::map_chr(title,URLdecode)) %&gt;% \n     mutate(title=stringr::str_replace_all(title,\"_\",\" \")) %&gt;% \n     mutate(translated_title=purrr::map2(title,lang,\n                                         ~safely(polyglotr::google_translate)(.x,,source_language=.y,target_language=\"en\"))) %&gt;% \n    mutate(translated_title=purrr::map(translated_title,\n                                       ~.$result)) %&gt;%\n    mutate(translated_title=purrr::map_chr(translated_title,\n                                           ~replace(.x,is.null(.x),NA)))\n  saveRDS(wikisites,\"data/wikisites_translated.RDS\")\n}\nwikisites=readRDS(\"data/wikisites_translated.RDS\")\n\n\n\n\nCode\nif(!file.exists(\"data/wikisites_text.RDS\")){\n  library(rvest)\n  # Get text paragraphs from all Wikipedia articles\n  wikisites_text=wikisites %&gt;%\n    mutate(html=purrr::map(article,read_html)) %&gt;% \n    mutate(html=purrr::map(html,~html_nodes(.x,\"p\"))) %&gt;%\n    mutate(text=purrr::map(html,html_text)) %&gt;% \n    mutate(text=purrr::map(text,~paste0(.x,collapse=\"\"))) %&gt;%\n    mutate(text=purrr::map(text,~str_replace_all(.x,\"\\\\[\\\\d*\\\\]\",\"\")))\n  # Translate them all to English with Google Translate (if possible)\n  wikisites_text=wikisites_text %&gt;% \n    mutate(textt=purrr::map2(text,lang,\n                            ~safely(polyglotr::google_translate)(.x,\n                                                                 source_language=.y,\n                                                                 target_language=\"en\"))) %&gt;% \n    mutate(error=purrr::map(textt,\"error\")) %&gt;% \n    mutate(textt=purrr::map(textt,\"result\")) %&gt;% \n    mutate(textt=purrr::map_chr(textt,\n                               ~replace(.x,is.null(.x),NA))) \nsaveRDS(wikisites_text,\"data/wikisites_text.RDS\")\n}\n\n# text=text %&gt;% \n#   mutate(dead=purrr::map(textt,\n#                          ~unlist(stringr::str_extract_all(.x,\n#     \"[\\\\d\\\\.\\\\,]+\\\\s(dead|victims)\"))))\n\n\n\n\nCode\n# lexicon_en=mixr::get_lexicon(\"en\")\n# words=wikisites_text %&gt;% \n#   tidytext::unnest_tokens(output=\"word\",input=\"textt\",token=\"words\") %&gt;% \n#   left_join(lexicon_en,by=c(\"word\")) %&gt;% \n#   filter(type!=\"sw\" & lemma!=\"flood\") %&gt;% \n#   group_by(flood,flood_label,lemma) %&gt;% \n#   summarise(n=n()) %&gt;% \n#   arrange(flood,flood_label,desc(n)) %&gt;% \n#   slice_head(n=20) %&gt;%\n#   ungroup() %&gt;% \n#   group_by(flood,flood_label) %&gt;% \n#   summarise(words=paste(lemma,collapse=\"; \"))"
  },
  {
    "objectID": "index.html#participatory-local-data-about-floods",
    "href": "index.html#participatory-local-data-about-floods",
    "title": "Online reports and narrations of flood events",
    "section": "Participatory local data about floods",
    "text": "Participatory local data about floods\nParticipatory data collection holds significant potential in enhancing the understanding and management of flood events. This approach involves engaging local communities, citizens, and grassroots organizations in the collection, analysis, and sharing of data related to flood occurrences. Examples of such initiatives show the potential of participatory data to complement institutional data about floods at a local scale (Dixon, Johns, and Fernandez 2021; Sekajugo et al. 2022). By incorporating local knowledge, experiences, and observations, participatory methods complement traditional data sources, offering valuable insights into flood-prone areas that might be overlooked by centralized or remote monitoring systems, controlled by certain systems in power (Nation-states, heterogeneous colaition of technologically savvy individuals, private technology companies). More broadly, volunteered geographical data at a local scale has been shown to be a valuable source of data regarding hazards (Herfort et al. 2021).\nCommunities living in flood-prone regions possess unique, context-specific, even vernacular knowledge about local environmental changes, historical flood memory, vulnerable areas, and coping mechanisms. Engaging these communities in data collection through citizen science initiatives, mobile applications, community mapping, or participatory workshops allows for the collection of granular, real-time information that supplements existing datasets. Ideally, this bottom-up approach not only enhances the accuracy and granularity of flood data but also fosters community empowerment in terms of resilience, engaging all communities to participate, including those excluded from decision-making or digital access (from a material point of view and in terms of skills).\nMoreover, participatory data can bridge gaps in official reporting by capturing small-scale or localized flood events that are not publicized and thus recognized by institutions. Integrating participatory data with conventional datasets enables a more comprehensive understanding of flood dynamics, aiding in the development of anticipation policies effective early warning systems, and disaster response plans.\nHowever, challenges such as ensuring data accuracy, reliability, and standardization persist in participatory approaches. While establishing protocols for data validation and quality control between participatory and formal datasets is important to maximize the potential of participatory data and to maintain data integrity (Senaratne et al. 2017), the participatory data can be standardized. In other words, the subtelties perceived by local communities can be smoothed out (i) in interfaces designed by situated engineers and (ii) in data collection via protocols designed by situated scientists. However, the stakes around data validation and homogenization are particularly high in the prospect of studying floods at a global scale.\nOverall, leveraging participatory data in conjunction with conventional methods has the potential to enrich global flood databases, improve resilience, and empower communities to better respond to and mitigate the impacts of flood events. This collaborative approach can contribute significantly to more holistic and inclusive strategies for managing floods worldwide, to question (i) the data (how, by whom and for what purpose they are collected) and (ii) the collection process (highlighting ethnocentric biases by comparison)."
  },
  {
    "objectID": "index.html#institutional-global-data-about-floods",
    "href": "index.html#institutional-global-data-about-floods",
    "title": "Online reports and narrations of flood events",
    "section": "Institutional global data about floods",
    "text": "Institutional global data about floods\nThe Dartmouth Flood Observatory (DFO) is a research group specializing in the collection and analysis of global flood data. Combining remote sensing and news reports’ analysis, the DFO produces detailed information on the extent, frequency, and impacts of floods worldwide (Kundzewicz, Pińskwar, and Brakenridge 2013). It constitutes an invaluable source of information on the subject, used in many scientific studies on flood events [add refs]."
  },
  {
    "objectID": "index.html#how-does-wikidata-provide-unique-data",
    "href": "index.html#how-does-wikidata-provide-unique-data",
    "title": "General purpose",
    "section": "How does Wikidata provide unique data",
    "text": "How does Wikidata provide unique data\nThis study demonstrates the possibility to list and collect information on flood events on a large temporal and spatial scale through Wikidata, Wikimedia and Wikipedia projects. Although these data exhibit some heterogeneity Ruprechter, Burghardt, and Helic (2023) due to economic and digital inequities, being able to rely on a preexistent, rich global dataset spanning a large time period is still a priceless asset in studying floods, and could be a first step to better-quality curated datasets. Besides, large-scale institutional data sources themselves are not immune to spatial heterogeneities due to scarcity of research activity in some areas, linguistic barriers, varying degrees of public investment in disaster management, or other sources of environmental, political and social inequities.\nLinked Open Data such as Wikidata hold immense interest for the study of natural or social events due to their inherent ability to offer contextual information to documented items. The interconnected nature of Wikidata’s knowledge graph as well as their link to other data silos indeed allow users to easily access additional information or related resources linked to a particular event. The present study hence demonstrates the strength of such a data source to provide context (in particular through the integration of Wikipedia discourse elements and Wikimedia Commons images) as well as the difficulties inherent to identifying particular flood events based solely on presumably objective information, such as coordinates and dates for these events."
  },
  {
    "objectID": "join_data.html",
    "href": "join_data.html",
    "title": "join",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\nCode\nwd_events=readRDS(\"data/wd_events.RDS\")\nwd_full=readRDS(\"data/wd_full.RDS\")"
  },
  {
    "objectID": "join_data.html#data-from-the-dartmouth-flood-observatory",
    "href": "join_data.html#data-from-the-dartmouth-flood-observatory",
    "title": "join",
    "section": "Data from the Dartmouth Flood Observatory",
    "text": "Data from the Dartmouth Flood Observatory\n\n\nCode\navdate=function(date1,date2){\n  date1=as.numeric(date1)\n  date2=as.numeric(date2)\n  result=as.Date(mean(c(date1,date2)))\n  return(result)\n}\n\n\n\n\nCode\ndfo_raw &lt;- readr::read_csv(\"data/FloodArchive.csv\", \n    locale = locale(decimal_mark = \",\"))\ncolnames(dfo_raw)=c(\"index\",\"GlideNumber\",\"dfo_country\",\"dfo_other_country\",\n           \"dfo_centroid_x\",\"dfo_centroid_y\",\"area\",\"dfo_began\",\"dfo_ended\",\n           \"validation\",\"dfo_dead\",\"displaced\",\"maincause\",\"severity\")\ndfo_raw=dfo_raw %&gt;% \n  mutate(start=lubridate::dmy(dfo_began),\n         end=lubridate::dmy(dfo_ended)) %&gt;% \n  mutate(dfo_other_country=case_when(is.na(dfo_other_country)~\"\",\n                                     dfo_other_country==0~\"\",\n                                     TRUE~dfo_other_country)) %&gt;% \n  mutate(flood=as.character(index),\n         flood_label=as.character(index),\n         country_label=paste(dfo_country,\" \",dfo_other_country),\n         deathtoll=dfo_dead,\n         coords=paste0(\"Point(\",dfo_centroid_x,\" \",dfo_centroid_y,\")\"))\ndfo_comp=dfo_raw %&gt;% \n  select(flood,flood_label,country_label,deathtoll, start, end,coords) %&gt;% \n  mutate(date=purrr::map2(start,end,avdate)) %&gt;% \n  tidyr::unnest(date)\n\n\n\n\nCode\ncoords_wd_map=sf::st_coordinates(wd_map) %&gt;%\n  as_tibble() %&gt;%\n  mutate(coords=glue::glue(\"Point({X} {Y})\")) %&gt;%\n  pull(coords)\nwd_comp=wd_map %&gt;%\n  sf::st_drop_geometry() %&gt;% \n  mutate(coords=coords_wd_map) %&gt;% \n  select(flood,flood_label,country_label,deathtoll, date ,start, end,coords,popup) %&gt;% \n  mutate(flood=stringr::str_replace(flood,\"wd:\",\"\"))\n\n\nThis dataset documents 5130 flood events that occurred between 1985-01-01 and 2021-10-09.\n\n\nCode\nNwd_in_range=wd_events %&gt;% \n  filter(year&gt;=1985 & year&lt;=2021) %&gt;% \n  sf::st_drop_geometry() %&gt;%\n  summarise(n=length(unique(flood))) %&gt;% \n  pull(n)\n\n\nBased on the dates of observations for the DFO data base, 417 out of the 814 flood events in our Wikidata base might fall into it."
  },
  {
    "objectID": "join_data.html#basic-stats",
    "href": "join_data.html#basic-stats",
    "title": "join",
    "section": "Basic stats",
    "text": "Basic stats\n\n\nCode\nwd_comp=wd_comp  %&gt;% \n   mutate(source=\"wd\") %&gt;% \n   mutate(flood=paste0(\"wd:\",flood)) %&gt;% \n   sf::st_drop_geometry() %&gt;% \n   filter(date&gt;lubridate::ymd(\"1985-01-01\") & \n          date&lt;lubridate::ymd(\"2021-12-31\")) \ndfo_comp=dfo_comp %&gt;%\n   mutate(source=\"dfo\") %&gt;%\n   mutate(popup=glue::glue(\"&lt;h1&gt;{flood_label}&lt;/h1&gt;\n                            &lt;p&gt;date: {date}&lt;/p&gt;\n                            &lt;p&gt;deathtoll:{deathtoll}&lt;/p&gt;\"))  \ntib=bind_rows(wd_comp,dfo_comp) %&gt;% \n  mutate(date=lubridate::round_date(date,\"month\")) %&gt;% \n   sf::st_as_sf(wkt=\"coords\")\n\n\nBased on the spatial and temporal data in both datasets, we try to find correspondences between the events described in Wikidata and those described in the Dartmouth Flood Observatory.\n\n\nCode\ntibproj= tib %&gt;% \n  sf::st_set_crs(4326) %&gt;% \n   sf::st_transform(3857)\n\nfind_corresponding_flood=function(flood_id,tib=tibproj){\n  tib_sub=tib %&gt;% filter(flood==flood_id)\n  tib_dist=tib %&gt;% \n    mutate(disttime=abs(tib$date-tib_sub$date),\n           distspace=sf::st_distance(tib,tib_sub)[,1]) %&gt;% \n    mutate(disttime=as.numeric(disttime),\n           distspace=as.numeric(distspace)) %&gt;% \n    filter(flood!=flood_id) %&gt;%  \n    filter(disttime&lt;60 & distspace&lt;400000)%&gt;%\n    #filter(disttime==min(disttime)|distspace==min(distspace)) %&gt;% \n    select(floodcorr=flood,\n           disttime,\n           distspace,\n           sourcecorr=source,\n           country_corr=country_label,\n           deathtoll_corr=deathtoll) %&gt;% \n    sf::st_drop_geometry()\n  if(nrow(tib_dist)==0){\n    tib_dist=tibble::tibble(floodcorr=NA,\n                            disttime=NA,\n                            distspace=NA,\n                            sourcecorr=NA,\n                            countrycorr=NA,\n                            deathtollcorr=NA)\n  }\n  return(tib_dist)\n}\n\n\n\n\nCode\nif(!file.exists(\"data/tibcorr.RDS\")){\ntibcorr= tib %&gt;% \n  mutate(data=purrr::map(flood,find_corresponding_flood,tib=tib)) %&gt;% \n  tidyr::unnest(data) %&gt;% \n  filter(source==\"wd\" & sourcecorr==\"dfo\")\nsaveRDS(tibcorr,\n        \"data/tibcorr.RDS\")\n}\n\n\n\n\nCode\ntib=sf::st_as_sf(tib,wkt=\"coords\")\ntibcorr=readRDS(\"data/tibcorr.RDS\") %&gt;% \n  sf::st_drop_geometry()\njoined_events=bind_rows(tibble::tibble(id=1:nrow(tibcorr),flood=tibcorr$flood),\n               tibble::tibble(id=1:nrow(tibcorr),flood=tibcorr$floodcorr))\njoined_events=tib %&gt;% \n  left_join(joined_events, by=\"flood\") %&gt;%  \n  select(id,flood) %&gt;% \n  group_by(id) %&gt;% \n  summarise(m =mean(id),do_union=FALSE) %&gt;% \n  sf::st_cast(\"LINESTRING\")\njoined_events=joined_events[1:(nrow(joined_events)-1),]"
  },
  {
    "objectID": "join_data.html#map-comparison",
    "href": "join_data.html#map-comparison",
    "title": "join",
    "section": "Map comparison",
    "text": "Map comparison\n\n\nCode\nlibrary(leaflet) \ntib_comp_map=tib %&gt;%\n  sf::st_as_sf(wkt=\"coords\")\n# Définition d'une échelle colorée \n# (en fonction de date de sortie) \n# Création de la carte \npal=colorFactor(c(\"red\",\"blue\"), domain=c(\"wd\",\"dfo\"))\ncomp_map=leaflet(tib_comp_map)  %&gt;%\n  addProviderTiles(providers$Esri.NatGeoWorldMap) %&gt;% # ajout fond de carte\n  addCircleMarkers(col=~pal(source),\n                   popup =~popup,\n                   radius =~log(deathtoll+2)\n                   )  %&gt;%\n  addPolylines(data=joined_events,color=\"green\")\n\n\n\n\nCode\ncomp_map"
  },
  {
    "objectID": "index.html#wikidata-on-floods",
    "href": "index.html#wikidata-on-floods",
    "title": "Online reports and narrations of flood events",
    "section": "Wikidata on floods",
    "text": "Wikidata on floods\nThe initial query provided 1018 Wikidata flood events. In terms of spatial precision, most coordinates are inferred from either country or location (the major part of provided locations being countries too).\n\n\nCode\nreadRDS(\"data/precision_coords.RDS\") %&gt;% \n  knitr::kable()\n\n\n\n\n\ncoords_from\nis_country\nn\n\n\n\n\n1) direct\n\n11\n\n\n2) location\nno\n189\n\n\n2) location\nyes\n495\n\n\n3) country\n\n17\n\n\n4) no coordinates\n\n86\n\n\n\n\n\nCode\nreadRDS(\"data/dates_precision.RDS\") %&gt;% \n  group_by(date_from) %&gt;% \n  tally() %&gt;% \n  knitr::kable()\n\n\n\n\n\ndate_from\nn\n\n\n\n\nav_start_end\n145\n\n\ndirect\n453\n\n\nflood_label\n138\n\n\nstart\n45\n\n\nNA\n31\n\n\n\n\n\nCode\nreadRDS(\"data/dates_precision.RDS\") %&gt;% \n  group_by(date_precision) %&gt;% \n  tally() %&gt;% \n  knitr::kable()\n\n\n\n\n\ndate_precision\nn\n\n\n\n\nday\n414\n\n\nmonth\n122\n\n\nyear\n245\n\n\nNA\n31\n\n\n\n\n\n: tables"
  },
  {
    "objectID": "index.html#compare-to-dfo-data",
    "href": "index.html#compare-to-dfo-data",
    "title": "Online reports and narrations of flood events",
    "section": "Compare to DFO data",
    "text": "Compare to DFO data\n\n\nCode\nsource(\"scripts/comp_dfo_wd.R\")\nwm_dfo_comparison=readRDS(\"data/wm_dfo_comparison.RDS\") %&gt;% \n  mutate(total_length=ceiling(total_length/1000))\n\n\nWe compare the number of events in both datasets (WD and DFO) according to Human Development Index of the country where the event took place.\n\n\nCode\nggplot(wm_dfo_comparison,\n       aes(x=HDI_class,fill=in_data))+\n  geom_bar()\n\n\n\n\n\nFigure 1: Number of flood events documented in Wikidata (wd), DFO (dfo) or both datasets according to our matching algorithm. The number of events is displayed according to the Human Development Index (HDI) class of the country where the event took place (countries are pooled in the first, second, third or fourth quartile).\n\n\n\n\n\n\nCode\nggplot(wm_dfo_comparison, \n       aes(x=HDI_class,y=deathtoll,fill=in_data))+\n  geom_boxplot()+\n  scale_y_continuous(trans=\"log1p\")\n\n\nWarning: Removed 463 rows containing non-finite values (`stat_boxplot()`).\n\n\n\n\n\nFigure 2: Deathtoll per event according to HDI class and occurrence in one or both datasets. This shows that Wikidata tends to over-represent events with important deathtoll, and/or overestimate deathtolls. This is particularly the case for events occurring in low HDI countries.\n\n\n\n\n\n\nCode\n# #| label: fig-deathtoll_length\n# #| fig-cap: \"Length of articles vs deathtoll\"\n# \n# dat=wm_dfo_comparison %&gt;%\n#   select(deathtoll,\n#          HDI_class,\n#          HDI,\n#          total_length,\n#          in_data) %&gt;% \n#   na.omit() %&gt;% unique() %&gt;%\n#   filter(in_data %in% c(\"wd\",\"in_both\"))\n#  v=var(dat$total_length)\n# mu=mean(dat$total_length)\n#  thetastart=(mu^2)/(v-mu)\n#  myglm=MASS::glm.nb(total_length ~ deathtoll*HDI_class,\n#                   data = dat,\n#                   init.theta=1)\n# # fscale=function(x){log10(x+1)}\n# # anova(myglm)\n# dat=dat %&gt;%\n#   mutate(fitted_raw=predict(myglm,data=wm_dfo_comparison),\n#          fitted=exp(fitted_raw))\n# datfit=dat %&gt;%\n#   select(HDI_class,deathtoll,fitted) %&gt;%\n#   arrange(deathtoll)\n# ggplot(dat, \n#        aes(x=deathtoll,y=total_length))+ \n#   geom_point(aes(col=in_data),alpha=0.5)+\n#   geom_path(data=datfit,aes(x=deathtoll,y=fitted,group=HDI_class))+\n#   facet_wrap(facets=vars(HDI_class))+\n#   scale_x_continuous(trans=\"log1p\")+\n#   scale_y_continuous(trans=\"log1p\")+\n#   geom_smooth()"
  },
  {
    "objectID": "collect_and_curate_wikidata.html#join-wd_raw-to-locations-and-dates",
    "href": "collect_and_curate_wikidata.html#join-wd_raw-to-locations-and-dates",
    "title": "Collect Wikidata about floods",
    "section": "Join wd_raw to locations and dates",
    "text": "Join wd_raw to locations and dates\n\n\nCode\nwd=wd_raw  %&gt;% \n  select(-coords,-country,-country_label) %&gt;% \n  left_join(floodlocs,by=c(\"flood\",\"flood_label\"),\n            relationship =\"many-to-many\") %&gt;% \n  left_join(dates, by=c(\"flood\",\"flood_label\"),\n            relationship =\"many-to-many\") %&gt;% \n  mutate(year=lubridate::year(date))"
  },
  {
    "objectID": "index.html#primary-census-of-flood-events",
    "href": "index.html#primary-census-of-flood-events",
    "title": "Online reports and narrations of flood events",
    "section": "Primary census of flood events",
    "text": "Primary census of flood events\nWe collect Wikidata about floods, using the glitter R package (an API-client to the Wikidata SPARQL endpoint API) (Vaudor and Salmon 2023)."
  },
  {
    "objectID": "index.html#description-of-events",
    "href": "index.html#description-of-events",
    "title": "Online reports and narrations of flood events",
    "section": "Description of events",
    "text": "Description of events\nWe complete the database regarding flood events with attributes corresponding to\n\nlocation\ncountry\ncoordinates\ndeathtoll\nrelated Wikipedia articles\nlinked images"
  },
  {
    "objectID": "index.html#comparison-to-an-institutional-database",
    "href": "index.html#comparison-to-an-institutional-database",
    "title": "Online reports and narrations of flood events",
    "section": "Comparison to an institutional database",
    "text": "Comparison to an institutional database\nWe compare this data to the DFO database, trying to establish a link between events described on both datasets, based on distance and time gap."
  },
  {
    "objectID": "2_use_wikipedia.html",
    "href": "2_use_wikipedia.html",
    "title": "Use Wikipedia to complete Wikidata",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(rainette)\nwd_raw=readRDS(\"data/wd_raw.RDS\")\n\n\nWe translate all Wikipedia pages’ titles and texts to English (when Google translate allows it).\n\n\nCode\nif(!file.exists(\"data/wikisites_translated.RDS\")){\n  wikisites=readRDS(\"data/wikisites.RDS\") %&gt;% \n     mutate(lang=stringr::str_extract(article,\"(?&lt;=https://)([[:alpha:]]|-)*(?=\\\\.)\"))%&gt;%\n     mutate(lang=case_when(lang==\"simple\"~\"en\",\n                           TRUE~lang)) %&gt;% \n     mutate(title=stringr::str_extract(article,\"(?&lt;=\\\\/wiki\\\\/).*\")) %&gt;% \n     mutate(title=purrr::map_chr(title,URLdecode)) %&gt;% \n     mutate(title=stringr::str_replace_all(title,\"_\",\" \")) %&gt;% \n     mutate(translated_title=purrr::map2(title,lang,\n                                         ~safely(polyglotr::google_translate)(.x,,source_language=.y,target_language=\"en\"))) %&gt;% \n    mutate(translated_title=purrr::map(translated_title,\n                                       ~.$result)) %&gt;%\n    mutate(translated_title=purrr::map_chr(translated_title,\n                                           ~replace(.x,is.null(.x),NA)))\n  saveRDS(wikisites,\"data/wikisites_translated.RDS\")\n}\nwikisites=readRDS(\"data/wikisites_translated.RDS\")%&gt;% \n  filter(flood %in% wd_raw$flood)\n\n\nWe define a translate function, based on the polyglotr package.\n\n\nCode\ntranslate &lt;- function(i){\n    text=wikisites_text$text[i][[1]]\n    if(wikisites_text$lang[i]==\"en\"){return(text)}\n    tryCatch(\n        #try to do this\n        {texts=unlist(stringr::str_split(text,\"\\n\"))\n         result=purrr::map_chr(texts,\n                               polyglotr::google_translate,\n                               source_language=wikisites_text$lang[i])\n         result=paste0(result, collapse=\"\\n\")\n         return(result)\n        },\n        #if an error occurs, tell me the error\n        error=function(e) {\n            message('An Error Occurred')\n            print(e)\n            return(NA)\n        },\n        #if a warning occurs, tell me the warning\n        warning=function(w) {\n            message('A Warning Occurred')\n            print(w)\n            return(NA)\n        }\n    )\n}\n\n\n\n\n\n\nCode\nis_language_local=function(lang_id,data){\n  result=countries %&gt;% \n    filter(country %in% data$country) %&gt;% \n    filter(lang_id==language_code)\n  result=case_when(nrow(result)&gt;=1~TRUE,\n                   nrow(result)==0~FALSE)\n  return(result)\n}\n\ncountries=readRDS(\"data/countries.RDS\") %&gt;% \n  select(country,language_code) %&gt;% \n  unique()\nwp_pages=readRDS(\"data/wp_pages.RDS\") %&gt;% \n  unique()\nif(!(\"local\" %in% colnames(wp_pages))){\n    wd_events=readRDS(\"data/wd_events.RDS\") \n    wp_pages_local_articles=wd_events %&gt;% select(flood,country) %&gt;% \n      group_by(flood) %&gt;% \n      tidyr::nest() %&gt;% \n      left_join(wp_pages %&gt;% select(flood,article,lang),\n                by=\"flood\",relationship=\"many-to-many\") %&gt;% \n      mutate(local=purrr::map2_lgl(lang,data,is_language_local)) %&gt;% \n      select(article,local)\n    wp_pages=wp_pages %&gt;% \n      left_join(wp_pages_local_articles,by=c(\"flood\",\"article\"))\n    saveRDS(wp_pages,\"data/wp_pages.RDS\")\n}\n\n\n\n\n\n\n\nCode\nclean_banners=function(text){\n  banner=str_detect(text,\"This article|this banner|your knowledge\")\n  if(banner & !is.na(text)){\n  result=text %&gt;% \n    str_replace(\"This article is.*\\\\n\",\"\") %&gt;% \n    str_replace(\"This article is a draft concerning.*\\\\.\\\\n\\\\n\",\"\") %&gt;% \n    str_replace(\"\\\\nedit - edit code - edit Wikidata\\\\n\",\"\") %&gt;% \n    str_replace(\"You can share your knowledge by.*\\\\.\",\"\") %&gt;% \n    str_replace(\"This article is based.*$\",\"\") %&gt;% \n    str_replace(\"^(.|\\\\n)*If you think these points have been resolved, you can remove this banner and improve the formatting of another article\\\\.\",\"\")%&gt;% \n    str_replace(\"This .*article.*\\\\. You can help Wikipedia by expanding it\\\\.\") %&gt;% \n    str_replace(\"\\\\..*\\\\}\",\"\")\n  }else{result=text}\n  return(result)\n}\n\n\n\n\nCode\nif(!file.exists(\"data/wikisites_text.RDS\")){\n  library(rvest)\n  # Get text paragraphs from all Wikipedia articles\n\n  get_text=function(html){\n    html_nodes(html,\"h1, h2, h3, h4, h5, h6, p\") %&gt;%\n    purrr::map(html_text) %&gt;% \n    stringr::str_replace(\"\\\\[.*\\\\]$\",\"\")\n  }\n  wikisites_text=wikisites %&gt;%\n    mutate(html=purrr::map(article,read_html)) %&gt;% \n    mutate(text=purrr::map(html,safely(get_text))) %&gt;% \n    mutate(text=purrr::map(text,\"result\")) %&gt;% \n    select(-html) %&gt;% \n    mutate(text=purrr::map(text,~paste0(.x,collapse=\"\\n\"))) \n\n  \n  # Translate them all to English with Google Translate (if possible)\n  wikisites_textt=wikisites_text %&gt;% \n    mutate(textt=NA)\n  tmp=Sys.time()\n  for(i in 1:nrow(wikisites_textt)){\n    print(i)\n    result=translate(i)\n    if(length(result)&gt;0){\n    wikisites_textt$textt[i]=result}\n  }  \n  print(Sys.time()-tmp) \nsaveRDS(wikisites_textt,\"data/wp_pages.RDS\")\n\n  wp_pages=wikisites_textt %&gt;% \n    mutate(textt=purrr::map_chr(textt,clean_banners)) %&gt;% \n    mutate(textt=stringr::str_replace(textt,\"mw-parser-output.*$\",\"\")) %&gt;% \n    mutate(length=map_dbl(textt,str_length)) %&gt;% \n    select(-flood_label)\n  saveRDS(wp_pages,\"data/wp_pages.RDS\")\n}\n\n\n\nwp_pages=readRDS(\"data/wp_pages.RDS\")\n\n\n\n\n\n\n\nCode\nif(!file.exists(\"data/wp_words.RDS\")){\n  library(mixr)\n  lexicon_en=get_lexicon(\"en\")\n  wp_words=wp_pages %&gt;%\n    tidytext::unnest_tokens(output=\"word\",input=\"textt\",token=\"words\") %&gt;%\n    left_join(lexicon_en,by=c(\"word\")) %&gt;%\n    filter(type!=\"sw\" & lemma!=\"flood\") %&gt;%\n    group_by(flood,lemma) %&gt;%\n    summarise(n=n(),.groups=\"drop\") %&gt;%\n    arrange(flood,desc(n)) \n\nwp_words_spec &lt;- mixr::tidy_specificities(wp_words %&gt;% filter(n&gt;3),lemma, flood) %&gt;% \n  filter(spec&gt;2) %&gt;% \n  group_by(flood) %&gt;% \n  summarise(specific_words=paste(lemma,collapse=\"; \"),.groups=\"drop\")\nsaveRDS(wp_words_spec,\"data/wp_words_spec.RDS\")\nsaveRDS(wp_words,\"data/wp_words.RDS\")\nwp_20_words_per_event=wp_words %&gt;% \n  group_by(flood) %&gt;% \n  arrange(desc(n)) %&gt;% \n  slice_head(n=20) %&gt;% \n  summarise(words=paste(lemma,collapse=\"; \"), .groups=\"drop\")\nsaveRDS(wp_20_words_per_event,\"data/wp_20_words_per_event.RDS\")\n}\nwp_words=readRDS(\"data/wp_words.RDS\") %&gt;% \n  filter(flood %in% wd_raw$flood)\n\n\n\n\n\n\n\nCode\nif(!file.exists(\"data/wp_segments.RDS\")){\n  library(quanteda)\n  library(rainette)\n  library(mixr)\n    lexicon_en=get_lexicon(\"en\")\n    wp_segments=readRDS(\"data/wp_pages.RDS\") %&gt;%\n    tidytext::unnest_tokens(output=\"word\",input=\"textt\",token=\"words\") %&gt;%\n    left_join(lexicon_en,by=c(\"word\")) %&gt;%\n    mutate(keep=(type!=\"sw\" & lemma!=\"flood\")) %&gt;% \n    group_by(flood,flood_label,article) %&gt;%\n    mutate(lemma=case_when(is.na(lemma)|(!keep)~\"\",\n                           TRUE~lemma)) %&gt;% \n    mutate(keep=as.numeric(keep)) %&gt;% \n    mutate(num_lemma=case_when(is.na(keep)~0,\n                     TRUE~keep)) %&gt;% \n    mutate(num_lemma=cumsum(num_lemma)) %&gt;% \n    mutate(num_segment=ceiling(num_lemma/10+0.000001)) %&gt;% \n    ungroup() %&gt;% \n    group_by(flood,flood_label,article,num_segment) %&gt;% \n    summarise(text_all=paste0(word, collapse=\" \"),\n              text_sig=paste0(lemma,collapse=\" \"),\n              .groups=\"drop\") %&gt;% \n    mutate(num_segment=paste0(article,\"_\",num_segment)) %&gt;% \n    mutate(text_sig_dontkeep=text_sig)\n\n  corpus=corpus(wp_segments,docid_field=\"num_segment\",text_field=\"text_sig_dontkeep\")\n  tok &lt;- tokens(corpus, remove_punct = TRUE, remove_numbers = TRUE)\n  dtm &lt;- dfm(tok)\n  dtm &lt;- dfm_trim(dtm, min_docfreq = 30)\n  set.seed(123)\n  res=rainette(dtm,k=10,min_split_members=10)\n  saveRDS(res,\"data/res_rainette_wp.RDS\")\n  saveRDS(corpus,\"data/corpus.RDS\")\n  saveRDS(dtm,\"data/dtm.RDS\")\n}\nres=readRDS(\"data/res_rainette_wp.RDS\")\ncorpus=readRDS(\"data/corpus.RDS\")\ndtm=readRDS(\"data/dtm.RDS\")\n#rainette_explor(res,dtm,corpus)\n\n\n\n\nCode\nrainette_plot(\n  res, dtm, k = 6,\n  n_terms = 20,\n  free_scales = TRUE,\n  measure = \"chi2\",\n  show_negative = FALSE,\n  text_size = 12\n)\n\n\n\n\n\n\n\nCode\nif(!file.exists(\"data/wp_segments.RDS\")){\n  corpus$class=paste0(\"class_\",cutree_rainette(res, k = 6))\n  \n  tib_classes=tibble::tribble(~class,~class_name,~color,\n                  \"class_1\",\"governance\",\"#4E79A7\",\n                  \"class_2\",\"relief\",\"#F28E2B\",\n                  \"class_3\",\"damage\",\"#E15759\",\n                  \"class_4\",\"hydrology\", \"#76B7B2\", \n                  \"class_5\",\"anticipation\",\"#59A14F\",\n                  \"class_6\",\"weather\",\"#EDC948\")\n  wp_segments=docvars(corpus) %&gt;% \n    left_join(tib_classes,by=\"class\") %&gt;% \n    mutate(class=as.factor(class),\n           class_name=as.factor(class_name)) %&gt;% \n    select(-flood,-flood_label)\n  saveRDS(wp_segments,\"data/wp_segments.RDS\")\n}\n\n\n\n\n\n\n\nCode\nwp_segments=readRDS(\"data/wp_segments.RDS\")\nwp_segments_summary=wp_segments %&gt;% \n  group_by(article,class,class_name,color) %&gt;% \n  tally()\nspec=mixr::tidy_specificities(wp_segments,\n                              article,\n                              class_name)\nwp_pages_class=wp_pages %&gt;% \n  left_join(wp_segments_summary,\n            by=\"article\") %&gt;% \n  left_join(spec,by=c(\"article\",\"class_name\",\"n\"))\n\nsaveRDS(wp_pages_class,\"data/wp_pages_class.RDS\")\n\n\n\n\n\n\n\nCode\n# dat %&gt;% \n#   mutate(mentions_death=stringr::str_detect(text_all,\"dead|death|decease\")) %&gt;% \n#   filter(mentions_death) %&gt;% \n\n\n\n\n\n\n\nCode\nsource(\"scripts/get_revs.R\")\n\n\n\n\nCode\nif(!file.exists(\"data/wp_revisions.RDS\")){\nlibrary(httr)\nwp_revisions=wp_pages %&gt;% \n  select(-text,-textt) %&gt;% \n  mutate(revisions=purrr::map2(lang,title,get_revs)) %&gt;% \n  tidyr::unnest(cols=c(revisions)) %&gt;% \n  select(-flood,-flood_label,-lang,-title,-translated_title)\nsaveRDS(wp_revisions,\"data/wp_revisions.RDS\")\n}"
  },
  {
    "objectID": "1_collect_wikidata.html",
    "href": "1_collect_wikidata.html",
    "title": "Collect Wikidata about floods",
    "section": "",
    "text": "Code\nlibrary(glitter)\nlibrary(tidyverse)\nlibrary(sequins)\n\n\n\n\nWe query the Wikidata Triplestore through the {glitter} R package (ref).\n\n\nCode\nquery=spq_init() %&gt;%\n    spq_add(\"?flood wdt:P31/wdt:P279* wd:Q8068\") %&gt;% \n    spq_add(\"?flood wdt:P31 ?what\") %&gt;%\n    spq_add(\"?flood wdt:P625 ?coords\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P17 ?country\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P1120 ?deathtoll\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P276 ?loc\",.required=FALSE) %&gt;%\n    spq_label(flood,country,what) \nplot_query(query, labelling=TRUE)\n\n\n\n\n\nHere are the initial results we get when performing this query:\n\n\nCode\nif(!file.exists(\"data/wd_raw.RDS\")){\n  wd_raw=query %&gt;%\n    spq_perform(replace_prefixes=TRUE) %&gt;% \n    mutate(deathtoll=as.numeric(deathtoll))\n  saveRDS(wd_raw,\"data/wd_raw.RDS\")\n}\nwd_raw=readRDS(\"data/wd_raw.RDS\")\n\n\nwd_weird_events=wd_raw %&gt;% \n  mutate(weird=(what_label %in% c(\"Bible story\",\n                                  \"deluge myth\",\n                                  \"creation myth\",\n                                  \"episode in Greek mythology\",\n                                  \"reflective writing\",\n                                  \"non-water flood\"))) %&gt;% \n  group_by(flood) %&gt;% \n  summarise(any_weird=any(weird), .groups=\"drop\") %&gt;% \n  filter(any_weird)\n\nwd_raw = wd_raw %&gt;%\n  filter(!(flood %in% wd_weird_events$flood))\n\nsaveRDS(wd_raw, \"data/wd_raw.RDS\")\nkableExtra::kable(wd_raw %&gt;% head(20))\n\n\n\n\n\nwhat\nflood\nloc\ndeathtoll\ncountry\ncountry_label\nflood_label\nwhat_label\ncoords\n\n\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6886\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q7788\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q15175\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q19206\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q43934\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q45208\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6401352\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6886\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q7788\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q15175\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q19206\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q43934\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q45208\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6401352\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q119109771\nwd:Q790\n51\nwd:Q790\nHaiti\n2023 Haiti floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q122311510\nwd:Q10388860\n47\nwd:Q155\nBrazil\n2023 Rio Grande do Sul floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q1599758\nwd:Q183\n16\nwd:Q183\nGermany\nflood disaster\nnatural disaster\nPoint(9.44786 51.6426)\n\n\nwd:Q8065\nwd:Q113288859\nwd:Q843\n1666\nwd:Q843\nPakistan\n2022 Pakistan floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q20630431\nwd:Q1061\n70\nwd:Q668\nIndia\n2015 Gujarat flood\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q118433941\nwd:Q1263\n17\nwd:Q38\nItaly\n2023 Emilia-Romagna floods\nnatural disaster\nNA\n\n\n\n\n\n\n\nThis table has 1516 rows and documents 792 flood events."
  },
  {
    "objectID": "1_collect_wikidata.html#basic-query",
    "href": "1_collect_wikidata.html#basic-query",
    "title": "Collect Wikidata about floods",
    "section": "",
    "text": "We query the Wikidata Triplestore through the {glitter} R package (ref).\n\n\nCode\nquery=spq_init() %&gt;%\n    spq_add(\"?flood wdt:P31/wdt:P279* wd:Q8068\") %&gt;% \n    spq_add(\"?flood wdt:P31 ?what\") %&gt;%\n    spq_add(\"?flood wdt:P625 ?coords\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P17 ?country\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P1120 ?deathtoll\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P276 ?loc\",.required=FALSE) %&gt;%\n    spq_label(flood,country,what) \nplot_query(query, labelling=TRUE)\n\n\n\n\n\nHere are the initial results we get when performing this query:\n\n\nCode\nif(!file.exists(\"data/wd_raw.RDS\")){\n  wd_raw=query %&gt;%\n    spq_perform(replace_prefixes=TRUE) %&gt;% \n    mutate(deathtoll=as.numeric(deathtoll))\n  saveRDS(wd_raw,\"data/wd_raw.RDS\")\n}\nwd_raw=readRDS(\"data/wd_raw.RDS\")\n\n\nwd_weird_events=wd_raw %&gt;% \n  mutate(weird=(what_label %in% c(\"Bible story\",\n                                  \"deluge myth\",\n                                  \"creation myth\",\n                                  \"episode in Greek mythology\",\n                                  \"reflective writing\",\n                                  \"non-water flood\"))) %&gt;% \n  group_by(flood) %&gt;% \n  summarise(any_weird=any(weird), .groups=\"drop\") %&gt;% \n  filter(any_weird)\n\nwd_raw = wd_raw %&gt;%\n  filter(!(flood %in% wd_weird_events$flood))\n\nsaveRDS(wd_raw, \"data/wd_raw.RDS\")\nkableExtra::kable(wd_raw %&gt;% head(20))\n\n\n\n\n\nwhat\nflood\nloc\ndeathtoll\ncountry\ncountry_label\nflood_label\nwhat_label\ncoords\n\n\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6886\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q7788\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q15175\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q19206\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q43934\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q45208\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6401352\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6886\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q7788\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q15175\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q19206\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q43934\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q45208\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6401352\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q119109771\nwd:Q790\n51\nwd:Q790\nHaiti\n2023 Haiti floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q122311510\nwd:Q10388860\n47\nwd:Q155\nBrazil\n2023 Rio Grande do Sul floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q1599758\nwd:Q183\n16\nwd:Q183\nGermany\nflood disaster\nnatural disaster\nPoint(9.44786 51.6426)\n\n\nwd:Q8065\nwd:Q113288859\nwd:Q843\n1666\nwd:Q843\nPakistan\n2022 Pakistan floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q20630431\nwd:Q1061\n70\nwd:Q668\nIndia\n2015 Gujarat flood\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q118433941\nwd:Q1263\n17\nwd:Q38\nItaly\n2023 Emilia-Romagna floods\nnatural disaster\nNA\n\n\n\n\n\n\n\nThis table has 1516 rows and documents 792 flood events."
  },
  {
    "objectID": "3_curate_wikidata.html",
    "href": "3_curate_wikidata.html",
    "title": "Curate wikidata",
    "section": "",
    "text": "Code\nlibrary(glitter)\nlibrary(tidyverse)\nlibrary(sequins)"
  },
  {
    "objectID": "3_curate_wikidata.html#add-coordinates",
    "href": "3_curate_wikidata.html#add-coordinates",
    "title": "Curate wikidata",
    "section": "Add coordinates",
    "text": "Add coordinates\nNow we try and complete our dataset with coordinates, for the events that do not come directly with coordinates. We perform the task thanks to the linked nature of Wikidata’s knowledge graph.\n\nLocations\nHere is a function that collects data for each location identifier about:\n\ncountry of the location (country_loc)\ncoordinates of the location (coords_loc)\ntype of location (loc_type)\n\n\n\nCode\nget_loc_info=function(loc_id){\n  result=spq_init() %&gt;%\n    spq_set(loc=loc_id) %&gt;% \n    spq_add(\"?loc wdt:P17 ?country_loc\") %&gt;% \n    spq_add(\"?loc wdt:P625 ?coords_loc\") %&gt;% \n    spq_add(\"?loc wdt:P31 ?loc_type\") %&gt;% \n    spq_label(loc, country_loc, loc_type) %&gt;% \n    spq_select(-loc) %&gt;% \n    spq_perform(replace_prefixes=TRUE)\n  result\n}\n\n\nWe apply this function to all locations appearing in wd_raw:\n\n\nCode\nif(!file.exists(\"data/locs.RDS\")){\n  locs=wd_raw %&gt;%\n    select(loc) %&gt;% \n    unique() %&gt;% \n    na.omit() %&gt;% \n    mutate(data=purrr::map(loc,get_loc_info)) %&gt;% \n    tidyr::unnest(data)\n  saveRDS(locs, \"data/locs.RDS\")\n}\nlocs=readRDS(\"data/locs.RDS\")\n# summarise which loc_types are sub-categories of human settlement\n\n\n\n\nCountries\nFor some events, location is not provided, only country. We still use this information, though imprecise, to locate these.\nHere is a function that collects data for each country identifier about the coordinates of the location (coords_country)\n\n\nCode\nquery_country=spq_init() %&gt;%\n    spq_add(\"?country wdt:P625 ?coords_country\") %&gt;%\n    spq_add(\"?country wdt:P37 ?language_official\") %&gt;% \n    spq_add(\"?language_official wdt:P424 ?language_official_code\") %&gt;% \n    spq_add(\"?country wdt:P1081 ?HDI\") %&gt;%\n    spq_add(\"?country wdt:P2936 ?language_used\") %&gt;% \n    spq_add(\"?language_used wdt:P424 ?language_used_code\") %&gt;% \n    spq_label(country,language_official,language_used)\npng(\"figure/fig-graph_query_country.png\",width=900,height=300)\nplot_query(query_country)\ndev.off()\n\n\npng \n  2 \n\n\n\n\n\nCode\nlibrary(glitter)\nget_country_info=function(country_id){\n  result=query_country=spq_init() %&gt;%\n    spq_set(country=country_id) %&gt;% \n    spq_add(\"?country wdt:P625 ?coords_country\") %&gt;%\n    spq_add(\"?country wdt:P37 ?language_official\") %&gt;% \n    spq_add(\"?language_official wdt:P424 ?language_official_code\") %&gt;% \n    spq_add(\"?country wdt:P1081 ?HDI\") %&gt;%\n    spq_add(\"?country wdt:P2936 ?language_used\") %&gt;% \n    spq_add(\"?language_used wdt:P424 ?language_used_code\") %&gt;% \n    spq_label(country,language_official,language_used) %&gt;% \n    spq_perform(replace_prefixes=TRUE) %&gt;% \n    mutate(country_label=country_label,\n           language_official=language_official_label,\n           language_used=language_used_label) %&gt;% \n    select(-country,-language_official_label,-language_used_label)\n  return(result)\n}\n\n\nWe apply this function to all countries appearing in the raw dataset which might provide us with coordinates for the events, when missing.\n\n\nCode\nif(!file.exists(\"data/countries.RDS\")){\n  countries=wd_raw %&gt;%\n    select(country) %&gt;% \n    unique() %&gt;% \n    na.omit() %&gt;% \n    mutate(data=purrr::map(country,get_country_info)) %&gt;% \n    tidyr::unnest(data) %&gt;% \n    mutate(HDI=as.numeric(HDI))\n  getlang=function(tib){\n    result=bind_rows(\n      tibble::tibble(lang_type=\"official\",\n                     language=tib$language_official,\n                     language_code=tib$language_official_code),\n      tibble::tibble(lang_type=\"used\",\n                     language=tib$language_used,\n                     language_code=tib$language_used_code)\n    )\n    result=unique(result)\n    return(result)\n  }\n  countries=countries %&gt;% \n    group_by(country,country_label,coords_country,HDI) %&gt;% \n    tidyr::nest() %&gt;% \n    mutate(data=purrr::map(data,getlang)) %&gt;% \n    tidyr::unnest(cols=c(data)) %&gt;% \n    ungroup() %&gt;% \n    select(country,country_label,everything())\n  saveRDS(countries, \"data/countries.RDS\")\n}\ncountries=readRDS(\"data/countries.RDS\")\n\n\n\n\nIncorporate to data\nNow we update the data about floods taking into account that supplementary data about countries, and locations:\n\n\nCode\nfloodlocs=wd_raw %&gt;%\n  left_join(locs,by=\"loc\",\n            relationship =\"many-to-many\") %&gt;%\n  mutate(country_label=case_when(country_label==\"\"~country_loc_label,\n                                 is.na(country_label)~country_loc_label,\n                                 country_label!=\"\"~country_label)) %&gt;% \n  mutate(country=case_when(is.na(country)~country_loc,\n                           !is.na(country)~country)) %&gt;% \n  mutate(coords_from=case_when(!is.na(coords)~\"flood\",\n                               is.na(coords)~\"location\")) %&gt;% \n  select(flood,flood_label,coords,coords_loc,country,country_label,loc_label,loc_type_label) %&gt;% \n  left_join(countries %&gt;% select(country,coords_country),\n            by=\"country\",\n            relationship =\"many-to-many\") %&gt;%\n  mutate(coords_from=case_when(is.na(coords) & is.na(coords_loc) & !is.na(coords_country) ~\"3) country\",\n                               !is.na(coords_loc)~\"2) location\",\n                               !is.na(coords)~\"1) direct\",\n                               TRUE~\"4) no coordinates\")) %&gt;% \n  mutate(coords=case_when(is.na(coords)~coords_loc,\n                          !is.na(coords)~coords)) %&gt;%\n  mutate(coords=case_when(is.na(coords)~coords_country,\n                          !is.na(coords)~coords)) %&gt;% \n  unique()\n\n\nThe coordinates for the flood events are thus inferred from:\n\n\nCode\nprecision_coords=floodlocs %&gt;%\n  group_by(flood) %&gt;% \n  mutate(loc_type_label=paste0(loc_type_label,collapse=\";\")) %&gt;% \n  ungroup() %&gt;% \n  group_by(flood,coords_from,loc_type_label) %&gt;%\n  summarise(coords_from=unique(coords_from),\n            .groups=\"drop\") %&gt;% \n  ungroup() %&gt;% \n  mutate(loc_type_label=case_when(coords_from!=\"2) location\"~\" \",\n                                  TRUE~loc_type_label)) %&gt;%\n  mutate(detect_country=str_detect(loc_type_label,\"country\")) %&gt;% \n  mutate(is_country=case_when(coords_from!=\"2) location\"~\" \",\n                              detect_country~\"yes\",\n                              !detect_country~\"no\",\n                              TRUE~NA_character_)) %&gt;% \n  group_by(coords_from,is_country) %&gt;% \n  unique() %&gt;% \n  summarise(n=n(),.groups=\"drop\")\nsaveRDS(precision_coords,\"data/precision_coords.RDS\")"
  },
  {
    "objectID": "3_curate_wikidata.html#get-and-clean-dates",
    "href": "3_curate_wikidata.html#get-and-clean-dates",
    "title": "Curate wikidata",
    "section": "Get and clean dates",
    "text": "Get and clean dates\nEach flood event in Wikidata might come with all or part of the information regarding time of occurrence (wdt:P585), start time (wdt:P580) and end time (wdt:P582).\nWe write a function which collects this information for each flood event.\n\n\nCode\n# query_dates=spq_init() %&gt;%\n#   spq_add(glue::glue(\"?flood p:P585/psv:P585 ?time_statement\")) %&gt;% \n#   spq_add(\"?time_statement wikibase:timeValue ?time\") %&gt;%\n#   spq_add(\"?time_statement wikibase:timePrecision ?time_precision\",.required=FALSE) %&gt;%  \n#   spq_add(glue::glue(\"?flood p:P580/psv:P580 ?start_statement\")) %&gt;% \n#   spq_add(\"?start_statement wikibase:timeValue ?start\") %&gt;%\n#   spq_add(\"?start_statement wikibase:timePrecision ?start_precision\",.required=FALSE) %&gt;% \n#   spq_add(glue::glue(\"?flood p:P582/psv:P582 ?end_statement\")) %&gt;% \n#   spq_add(\"?end_statement wikibase:timeValue ?end\") %&gt;%\n#   spq_add(\"?end_statement wikibase:timePrecision ?end_precision\",.required=FALSE)\n# png(\"figure/fig-graph_query_dates.png\",width=900,height=400)\n# plot_query(query_dates)\n# dev.off()\n\n\n\n\nCode\nget_date_info=function(flood_id,type=\"P585\"){\n  result=spq_init() %&gt;%\n    spq_set(flood=flood_id) %&gt;% \n    spq_add(glue::glue(\"?flood p:{type}/psv:{type} ?datestatement\")) %&gt;% \n    spq_add(\"?datestatement wikibase:timeValue ?datetime\") %&gt;%\n    spq_add(\"?datestatement wikibase:timePrecision ?precision\",.required=FALSE) %&gt;%\n    spq_mutate(date=as.date(datetime)) %&gt;% \n    spq_select(-datestatement,-datetime) %&gt;% \n    spq_perform(replace_prefixes=TRUE)\n  result\n}\n\n\nWe then apply this function to all locations mentioned in wd_raw:\n\n\nCode\nfill_void=function(tib,name=\"date\"){\n  if(nrow(tib)==0){\n    tib=tibble::tibble(flood=NA,\n                       date=NA,\n                       precision=NA)\n  }\n  tib=tib %&gt;% select(date, precision)\n  colnames(tib)=c(name,paste0(name,\"_precision\"))\n  return(tib)\n}\nif(!file.exists(\"data/dates.RDS\")){\n  dates=wd_raw %&gt;%\n    select(flood,flood_label)%&gt;% \n    unique() %&gt;%\n    mutate(date=purrr::map(flood,get_date_info)) %&gt;% \n    mutate(start=purrr::map(flood,get_date_info, type=\"P580\")) %&gt;%\n    mutate(end=purrr::map(flood,get_date_info, type=\"P582\")) %&gt;%\n    mutate(date=purrr::map(date,fill_void)) %&gt;% \n    mutate(start=purrr::map(start,fill_void,name=\"start\")) %&gt;% \n    mutate(end=purrr::map(end,fill_void,name=\"end\")) %&gt;% \n    tidyr::unnest(c(date,start,end))\n  saveRDS(dates, \"data/dates.RDS\")\n}\n\n\nThere is a certain heterogeneity in the way information about dates is provided. The flood events’ time of occurrence might be provided through the properties\n\npoint in time (P585)\nstart time (P580)\nend time (P582)\n\nWe infer the date of a flood event in that order of priority\n\nprimarily as the date provided by “point in time” (direct)\nOR by the average date between “start time” and “end time” if they are both provided (start or end),\nOR by start time or end time if only one of them is provided (av_start_end)\nOR by a year provided in flood labels in the form of 4 digits-words if possible (flood_label)\n\n\n\nCode\navdate=function(date1,date2){\n  date1=as.numeric(date1)\n  date2=as.numeric(date2)\n  result=as.Date(mean(c(date1,date2)))\n  return(result)\n}\n\n\n\n\nCode\nprecision_dates=readRDS(\"data/dates.RDS\") %&gt;% \n  filter(date_precision&gt;=9|is.na(date_precision)) %&gt;% \n  mutate(date=lubridate::ymd(date),\n         start=lubridate::ymd(start),\n         end=lubridate::ymd(end)) %&gt;%\n  mutate(date_from=case_when(!is.na(date)~\"1) direct\",\n                            (is.na(date) & !is.na(start) & !is.na(end))~\"2) av_start_end\",\n                            (is.na(date) & is.na(end) & !is.na(start))~\"3) start_or_end\",\n                            (is.na(date) & is.na(start) & !is.na(end))~\"3) start_or_end\")) %&gt;% \n  mutate(av_start_end=purrr::map2(start,end,avdate)) %&gt;% \n  tidyr::unnest(av_start_end) %&gt;% \n  mutate(date=case_when(!is.na(date)~date,\n                        (is.na(date) & !is.na(start) & !is.na(end))~av_start_end,\n                        (is.na(date) & is.na(end) & !is.na(start))~start,\n                        (is.na(date) & is.na(start) & !is.na(end))~end)) %&gt;% \n  mutate(date_label=stringr::str_extract(flood_label,\"\\\\d{4}\")) %&gt;% \n  mutate(date_label=case_when(!is.na(date_label)~paste0(date_label,\"-01-01\"),\n                              TRUE~NA)) %&gt;% \n  mutate(date_label=case_when(!is.na(date_label)~lubridate::ymd(date_label),\n                              TRUE~NA)) %&gt;% \n  mutate(date_from=case_when((is.na(date) & !is.na(date_label))~\"4) flood_label\",\n                              TRUE~date_from)) %&gt;% \n  mutate(date_precision=case_when(date_from==\"4) flood_label\"~9,\n                                  date_from==\"2) av_start_end\"~start_precision,\n                                  date_from==\"3) start_or_end\"~start_precision,\n                                  TRUE~date_precision)) %&gt;% \n    mutate(date_precision=case_when(date_precision==9~\"year\",\n                                  date_precision==10~\"month\",\n                                  date_precision==11~\"day\",\n                                  TRUE~NA)) %&gt;% \n  mutate(date=case_when((is.na(date) & !is.na(date_label))~date_label,\n                        TRUE~date)) %&gt;% \n  select(-av_start_end)\nsaveRDS(precision_dates,\"data/precision_dates.RDS\")\n\n\nFinally, the dates provided in the dataset for the flood events correspond to the estimate given by:\n\n\nCode\nprecision_dates %&gt;% \n  group_by(date_from) %&gt;% \n  tally()\n\n\n# A tibble: 5 × 2\n  date_from           n\n  &lt;chr&gt;           &lt;int&gt;\n1 1) direct         453\n2 2) av_start_end   145\n3 3) start_or_end    45\n4 4) flood_label    138\n5 &lt;NA&gt;               31\n\n\nand they correspond to a precision of:\n\n\nCode\nprecision_dates %&gt;% \n  group_by(date_precision) %&gt;% \n  tally()\n\n\n# A tibble: 4 × 2\n  date_precision     n\n  &lt;chr&gt;          &lt;int&gt;\n1 day              380\n2 month            147\n3 year             254\n4 &lt;NA&gt;              31"
  },
  {
    "objectID": "3_curate_wikidata.html#join-wd_raw-to-locations-and-dates",
    "href": "3_curate_wikidata.html#join-wd_raw-to-locations-and-dates",
    "title": "Curate wikidata",
    "section": "Join wd_raw to locations and dates",
    "text": "Join wd_raw to locations and dates\n\n\nCode\nwd=wd_raw  %&gt;% \n  select(-coords,-country,-country_label) %&gt;% \n  left_join(floodlocs,by=c(\"flood\",\"flood_label\"),\n            relationship =\"many-to-many\") %&gt;% \n  left_join(precision_dates, by=c(\"flood\",\"flood_label\"),\n            relationship =\"many-to-many\") %&gt;% \n  mutate(year=lubridate::year(date))"
  },
  {
    "objectID": "3_curate_wikidata.html#add-wiki-sites",
    "href": "3_curate_wikidata.html#add-wiki-sites",
    "title": "Curate wikidata",
    "section": "Add wiki sites",
    "text": "Add wiki sites\nWe collect all wikipedia pages (in all languages) relative to the events.\n\n\nCode\nget_wikisites=function(flood_id){\n  result=spq_init() %&gt;%\n    spq_set(flood=flood_id) %&gt;% \n    spq_add(\"?article schema:about ?flood\") %&gt;%  \n    spq_select(-flood) %&gt;% \n    spq_perform() %&gt;% \n    filter(stringr::str_detect(article,\"wikipedia\"))\n  result\n}\n\n\n\n\nCode\nif(!file.exists(\"data/wikisites.RDS\")){\n  wikisites=wd %&gt;%\n    select(flood,flood_label) %&gt;% \n    unique() %&gt;%\n    mutate(wikisites=purrr::map(flood,get_wikisites)) %&gt;% \n    tidyr::unnest(c(wikisites))\n  saveRDS(wikisites, \"data/wikisites.RDS\")\n}\nwikisites=readRDS(\"data/wikisites.RDS\") %&gt;% \n  filter(flood %in% wd_raw$flood)\nwikisites=readRDS(\"data/wikisites_translated.RDS\")%&gt;% \n  filter(flood %in% wd_raw$flood)"
  },
  {
    "objectID": "3_curate_wikidata.html#add-images",
    "href": "3_curate_wikidata.html#add-images",
    "title": "Curate wikidata",
    "section": "Add images",
    "text": "Add images\nWe also collect images related to the flood events (wikidata property wdt:P18) when available\n\n\nCode\nget_images=function(flood_id){\n  result=spq_init() %&gt;%\n    spq_set(flood=flood_id) %&gt;% \n    spq_add(\"?flood wdt:P18 ?image\") %&gt;%  \n    spq_select(-flood) %&gt;% \n    spq_perform()\n  result\n}\n\n\n\n\nCode\nif(!file.exists(\"data/images.RDS\")){\n  images=wd %&gt;%\n    select(flood,flood_label) %&gt;% \n    unique() %&gt;% \n    mutate(images=purrr::map(flood,get_images)) %&gt;% \n    tidyr::unnest(c(images))\n  saveRDS(images, \"data/images.RDS\")\n}\nimages=readRDS(\"data/images.RDS\")%&gt;% \n  filter(flood %in% wd_raw$flood)"
  },
  {
    "objectID": "3_curate_wikidata.html#add-categories",
    "href": "3_curate_wikidata.html#add-categories",
    "title": "Curate wikidata",
    "section": "Add categories",
    "text": "Add categories\n\n\nCode\nget_categories=function(flood_id){\n  result=spq_init() %&gt;%\n    spq_set(flood=flood_id) %&gt;% \n    spq_add(\"?flood wdt:P373 ?category\") %&gt;%  \n    spq_select(-flood) %&gt;% \n    spq_perform()\n  result\n}\n\n\n\n\nCode\nif(!file.exists(\"data/categories.RDS\")){\n  categories=wd %&gt;%\n    select(flood,flood_label) %&gt;% \n    unique() %&gt;% \n    mutate(categories=purrr::map(flood,get_categories)) %&gt;% \n    tidyr::unnest(c(categories))\n  saveRDS(categories, \"data/categories.RDS\")\n}\ncategories=readRDS(\"data/categories.RDS\")%&gt;% \n  filter(flood %in% wd_raw$flood)"
  },
  {
    "objectID": "3_curate_wikidata.html#join-everything",
    "href": "3_curate_wikidata.html#join-everything",
    "title": "Curate wikidata",
    "section": "Join everything",
    "text": "Join everything\n\n\nCode\nwd_events=wd %&gt;% \n  select(-date,-date_precision) %&gt;% \n  left_join(precision_dates %&gt;% select(flood,date,date_precision),by=c(\"flood\"),\n            relationship =\"many-to-many\") %&gt;% \n  unique()\nwm_full=wd_events %&gt;% \n  left_join(wikisites,by=c(\"flood\",\"flood_label\"),\n            relationship =\"many-to-many\") %&gt;% \n  left_join(images,by=c(\"flood\",\"flood_label\"),\n            relationship =\"many-to-many\") %&gt;% \n  left_join(categories,by=c(\"flood\",\"flood_label\"),\n            relationship =\"many-to-many\")\nwd_events=wd_events %&gt;% select(flood,flood_label,date,country,country_label) %&gt;%\n  mutate(year=lubridate::year(date)) %&gt;% \n  unique()\n\nsaveRDS(wm_full,\"data/wm_full.RDS\")\nsaveRDS(wd_events,\"data/wd_events.RDS\")"
  },
  {
    "objectID": "4_join_data.html",
    "href": "4_join_data.html",
    "title": "Wikidata Map",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nwd_events=readRDS(\"data/wd_events.RDS\")\nwm_full=readRDS(\"data/wm_full.RDS\")\nwp_20_words_per_event=readRDS(\"data/wp_20_words_per_event.RDS\")\nwm_full=wm_full %&gt;% \n  left_join(wp_20_words_per_event, by=c(\"flood\",\"flood_label\"))"
  },
  {
    "objectID": "4_join_data.html#data-from-the-dartmouth-flood-observatory",
    "href": "4_join_data.html#data-from-the-dartmouth-flood-observatory",
    "title": "Wikidata Map",
    "section": "Data from the Dartmouth Flood Observatory",
    "text": "Data from the Dartmouth Flood Observatory\n\n\nCode\navdate=function(date1,date2){\n  date1=as.numeric(date1)\n  date2=as.numeric(date2)\n  result=as.Date(mean(c(date1,date2)))\n  return(result)\n}\n\n\n\n\nCode\ndfo_raw=readr::read_csv(\"data/FloodArchive.csv\", \n    locale = locale(decimal_mark = \",\"))\ncolnames(dfo_raw)=c(\"index\",\"GlideNumber\",\"dfo_country\",\"dfo_other_country\",\n           \"dfo_centroid_x\",\"dfo_centroid_y\",\"area\",\"dfo_began\",\"dfo_ended\",\n           \"validation\",\"dfo_dead\",\"displaced\",\"maincause\",\"severity\")\ndfo_raw=dfo_raw %&gt;% \n  mutate(start=lubridate::dmy(dfo_began),\n         end=lubridate::dmy(dfo_ended)) %&gt;% \n  mutate(flood=as.character(index),\n         flood_label=as.character(index),\n         country_label=dfo_country,\n         deathtoll=dfo_dead,\n         coords=paste0(\"Point(\",dfo_centroid_x,\" \",dfo_centroid_y,\")\"))\n\ndfo_comp=dfo_raw %&gt;% \n  select(flood,flood_label,country_label,deathtoll, start, end,coords) %&gt;% \n  mutate(date=purrr::map2(start,end,avdate)) %&gt;% \n  tidyr::unnest(date)\nsaveRDS(dfo_comp,\"data/dfo_comp_befcorrection.RDS\")\nsource(\"correct_dfo_countries.R\")\ndfo_comp=readRDS(\"data/dfo_comp.RDS\")\n\n\nThis dataset documents 5129 flood events that occurred between 1985-01-01 and 2021-10-09.\n\n\nCode\nwm_comp=wm_map %&gt;%\n  select(flood,flood_label,country_label,deathtoll, date ,start, end,popup) %&gt;% \n  mutate(flood=stringr::str_replace(flood,\"wd:\",\"\")) %&gt;% \n  filter(date&gt;lubridate::ymd(\"1985-01-01\") & \n         date&lt;lubridate::ymd(\"2021-12-31\")) %&gt;% \n  mutate(source=\"wd\") %&gt;% \n  mutate(flood=paste0(\"wd:\",flood)) %&gt;% \n  sf::st_set_crs(4326) %&gt;% \n  sf::st_transform(3857)\nsaveRDS(wm_comp,\"data/wm_comp.RDS\")\n\n\n\n\nCode\ndfo_comp=dfo_comp %&gt;%\n  sf::st_set_crs(4326) %&gt;% \n  sf::st_transform(3857) %&gt;% \n   mutate(source=\"dfo\",\n          geometry=coords) %&gt;%\n   select(-coords) %&gt;% \n   mutate(popup=glue::glue(\"&lt;h1&gt;{flood_label}&lt;/h1&gt;\n                            &lt;p&gt;date: {date}&lt;/p&gt;\n                            &lt;p&gt;deathtoll:{deathtoll}&lt;/p&gt;\"))  \nwm_dfo=bind_rows(wm_comp,dfo_comp)"
  },
  {
    "objectID": "4_join_data.html#basic-stats",
    "href": "4_join_data.html#basic-stats",
    "title": "Wikidata Map",
    "section": "Basic stats",
    "text": "Basic stats\nBased on the spatial and temporal data in both datasets, we try to find correspondences between the events described in Wikidata and those described in the Dartmouth Flood Observatory.\n\n\nCode\nfind_corresponding_flood=function(flood_id,tib=wm_dfo){\n  tib_sub=tib %&gt;% filter(flood==flood_id)\n  tib_dist=tib %&gt;% \n    mutate(disttime=abs(tib$date-tib_sub$date),\n           distspace=sf::st_distance(tib,tib_sub)[,1]) %&gt;% \n    mutate(disttime=as.numeric(disttime),\n           distspace=as.numeric(distspace)) %&gt;% \n    filter(flood!=flood_id) %&gt;%  \n    mutate(cond1=disttime&lt;395 & distspace&lt;400000,\n           cond2=disttime&lt;395 & str_detect(country_label,tib_sub$country_label)) %&gt;%\n    filter(cond1|cond2) %&gt;% \n    select(floodcorr=flood,\n           disttime,\n           distspace,\n           sourcecorr=source,\n           country_corr=country_label,\n           deathtoll_corr=deathtoll) %&gt;% \n    sf::st_drop_geometry()\n  if(nrow(tib_dist)==0){\n    tib_dist=tibble::tibble(floodcorr=NA,\n                            disttime=NA,\n                            distspace=NA,\n                            sourcecorr=NA,\n                            countrycorr=NA,\n                            deathtollcorr=NA)\n  }else{\n    tib_dist=tib_dist %&gt;%\n    filter(disttime==min(disttime,na.rm=TRUE)) \n  }\n  \n  return(tib_dist)\n}\n\n\nFor each flood event defined in the WD dataset, we filter the DFO dataset to only keep the event corresponding to the minimum distance in space and time, then we consider the events concur if they occurred less than 400 days apart and 400 kms away. This is a rather loose correspondence which is explained by the sometimes low precision in the WD information corresponding to time or coordinates of occurrence (not to mention the inherent difficulty, for contributors of both datasets, of associating a flood event to a precise time and place).\n\n\nCode\nif(!file.exists(\"data/wm_dfo.RDS\")){\nwm_dfo= wm_dfo %&gt;%\n  mutate(data=purrr::map(flood,find_corresponding_flood,tib=wm_dfo)) %&gt;% \n  tidyr::unnest(data) %&gt;% \n  filter(source==\"wd\" & sourcecorr==\"dfo\")\nsaveRDS(wm_dfo,\n        \"data/wm_dfo.RDS\")\n}\nwm_dfo=readRDS(\"data/wm_dfo.RDS\")\n\n\n\n\nCode\nwm_dfo=wm_dfo%&gt;%\n  sf::st_transform(4326) %&gt;% \n  select(-coords)\n\n\nWe create lines to join events from one dataset to the other.\n\n\nCode\nwm_dfo_nogeom=readRDS(\"data/wm_dfo.RDS\") %&gt;% \n  sf::st_drop_geometry()\njoined_events=bind_rows(\n  tibble::tibble(id=1:nrow(wm_dfo),flood=wm_dfo$flood),\n  tibble::tibble(id=1:nrow(wm_dfo),flood=wm_dfo$floodcorr)) %&gt;% \n  arrange(id)\njoined_events=wm_dfo %&gt;% \n  left_join(joined_events, by=\"flood\") %&gt;%  \n  select(id)%&gt;%\n  filter(!is.na(id)) %&gt;% \n  arrange(id)%&gt;% \n  group_by(id) %&gt;% \n  summarise(m =mean(id),do_union=FALSE) %&gt;% \n  sf::st_cast(\"LINESTRING\")\n\n\nWarning in sf_column %in% names(g): Detected an unexpected many-to-many relationship between `x` and `y`.\nℹ Row 8 of `x` matches multiple rows in `y`.\nℹ Row 15 of `y` matches multiple rows in `x`.\nℹ If a many-to-many relationship is expected, set `relationship =\n  \"many-to-many\"` to silence this warning.\n\n\nCode\njoined_events=joined_events[1:(nrow(joined_events)-1),]"
  },
  {
    "objectID": "4_join_data.html#map-comparison",
    "href": "4_join_data.html#map-comparison",
    "title": "Wikidata Map",
    "section": "Map comparison",
    "text": "Map comparison\n\n\nCode\nlibrary(leaflet) \n# Définition d'une échelle colorée \n# (en fonction de date de sortie) \n# Création de la carte \npal=colorFactor(c(\"red\",\"blue\"), domain=c(\"wd\",\"dfo\"))\ncomp_map=leaflet(wm_dfo)  %&gt;%\n  addProviderTiles(providers$Esri.WorldTopoMap) %&gt;% # ajout fond de carte\n  addCircleMarkers(col=~pal(source),\n                   popup =~popup,\n                   radius =~log(deathtoll+2)\n                   )  %&gt;%\n  addPolylines(data=joined_events,color=\"green\")\n\n\n\n\nCode\ncomp_map"
  },
  {
    "objectID": "index.html#why-is-it-complicated-to-produce-worldwide-data-about-floods",
    "href": "index.html#why-is-it-complicated-to-produce-worldwide-data-about-floods",
    "title": "Online reports and narrations of flood events",
    "section": "Why is it complicated to produce worldwide data about floods",
    "text": "Why is it complicated to produce worldwide data about floods\nProducing a worldwide dataset about flood events poses numerous challenges due to the complexity of semantics, collection, standardization, and accessibility of such data. One primary obstacle is the lack of uniform reporting standards leading to inconsistencies in definitions of flood events and in data collection methods. Varying technological capabilities (in terms of material access and practice’s acculturation)across geographical regions of the world also contribute to disparities in data availability. Disasters like floods might occur in areas where communication and infrastructure are limited, and/or not used for real-time data collection. Political, social, and economic factors also play a role, as some regions may under-report or document flood occurrences differently, due to reasons such as insufficient resources and infrastructures, lack of governmental transparency, or competing priorities [add ref]. Additionally, there are inequalities in the geographies of data production that reflect and reproduced global economic core-peripheries [Graham (2014); graham_towards_2015; haklay_why_2016]. [Ash et al. ref] refers to some “informational magnetism” resulting in the over-representation of the global North (the “core”). As a result, and despite advancements in satellite technology and remote sensing, ensuring comprehensive, accurate, and up-to-date global flood data remains a persistent challenge that requires better data curation; efforts to collaborate and improve information-sharing mechanisms on a global scale; and the development of a critical eye on the reasons for data production, on the geographical contexts in which it has been produced, and on its uses."
  },
  {
    "objectID": "index.html#wikimedia-data",
    "href": "index.html#wikimedia-data",
    "title": "Online reports and narrations of flood events",
    "section": "Wikimedia data",
    "text": "Wikimedia data\nIn parallel to that kind of research-related, expert database on the subject, the Wikimedia project stands as a remarkable source of structured or semi-structured participatory data with its vast array of user-generated content across platforms like Wikipedia, Wikidata, and Wikimedia Commons. Wikipedia, being one of the largest collaborative encyclopedias, and one of the most used and visited websites globally [Graham, De Sabbata, and Zook (2015); ballatore_digital_2017] harnesses the collective knowledge of volunteers worldwide who contribute, edit, and curate articles on diverse subjects, including geographical features, history, and environmental events such as floods. It can be viewed both as a source of breaking news and as an encyclopedia, providing information and narrative regarding ongoing and past events, in particular crises and controversies (Moats 2019). Wikidata, an open database, provides structured data that can be used to categorize and link information, potentially cataloging flood events, affected regions, and relevant details. Wikimedia Commons serves as a repository for multimedia files, housing images, maps, and other visual resources related to floods, contributing to a more comprehensive understanding of such events. The open nature of Wikimedia projects allows for continual updates and contributions, making it a valuable resource for researchers, policymakers, and the public seeking information on various topics, including flood events, across the globe. The Wikimedia projects are an example of user-generated content on web 2.0 (O’Reilly 2020). Moreover, flood events are generally associated with a location or toponymic information: as such, the produced data can also be included in what Goodchild (2007) calls “volunteered geographic information” (VGI)."
  },
  {
    "objectID": "index.html#wikimedia",
    "href": "index.html#wikimedia",
    "title": "General purpose",
    "section": "Wikimedia",
    "text": "Wikimedia"
  },
  {
    "objectID": "index.html#wikimedia-for-crisis-management",
    "href": "index.html#wikimedia-for-crisis-management",
    "title": "Online reports and narrations of flood events",
    "section": "Wikimedia for crisis management",
    "text": "Wikimedia for crisis management"
  },
  {
    "objectID": "4_join_data.html#number-of-correspondences",
    "href": "4_join_data.html#number-of-correspondences",
    "title": "Wikidata Map",
    "section": "Number of correspondences",
    "text": "Number of correspondences\n\n\nCode\nNwd_in_range=wd_events %&gt;% \n  filter(year&gt;=1985 & year&lt;=2021) %&gt;% \n  sf::st_drop_geometry() %&gt;%\n  summarise(n=length(unique(flood))) %&gt;% \n  pull(n)\n\n\nBased on the dates of observations for the DFO data base, 417 out of the 813 flood events in our Wikidata base might fall into it.\n\n\nCode\nnb_wm=wm_comp %&gt;% group_by(flood) %&gt;% tally() %&gt;% nrow()\nnb_wm_in_dfo=wm_dfo %&gt;% group_by(flood) %&gt;% tally() %&gt;% nrow()\nnb_dfo=dfo_comp %&gt;% group_by(flood) %&gt;% tally() %&gt;% nrow()\nnb_dfo_in_wd=wm_dfo %&gt;% group_by(floodcorr) %&gt;% tally() %&gt;% nrow()\n\n\nOut of 391 flood events documented in the WD comparison data subset, 334 have at least one correspondence in the DFO comparison data subset (85.42%).\nOut of 5129 flood events documented in the DFO comparison data subset, 367 have at least one correspondence in the WD comparison data subset (7.16%)."
  },
  {
    "objectID": "4_join_data.html#why-are-flood-events-documented-in-wikidata",
    "href": "4_join_data.html#why-are-flood-events-documented-in-wikidata",
    "title": "Wikidata Map",
    "section": "Why are flood events documented in Wikidata",
    "text": "Why are flood events documented in Wikidata\n1st hypothesis: number of dead explains the occurrence of the event in WD. =&gt; nope, actually it’s the opposite because events are documented in rich countries in which the number of dead is lower. How to account for this effect?\n\n\nCode\n#severity\ndfo_raw %&gt;%  pull(severity) %&gt;% mean()\n\n\n[1] 1.242495\n\n\nCode\ndfo_raw %&gt;% filter(flood %in% wm_dfo$floodcorr) %&gt;% pull(severity) %&gt;% mean()\n\n\n[1] 1.448229\n\n\nCode\n#deathtoll\ndfo_raw %&gt;%  pull(deathtoll) %&gt;% mean()\n\n\n[1] 134.199\n\n\nCode\ndfo_raw %&gt;% filter(flood %in% wm_dfo$floodcorr) %&gt;% pull(deathtoll) %&gt;% mean()\n\n\n[1] 78.58583\n\n\n\n\nCode\nmean(dfo_comp$deathtoll)\n\n\n[1] 134.2184\n\n\n\n\nCode\ntib_wd_in_dfo=wm_dfo %&gt;% \n  select(country_label,flood) %&gt;% \n  unique() %&gt;% \n  group_by(country_label) %&gt;% \n  summarise(n_wd_in_dfo=n()) \n\ntib_dfo=dfo_comp %&gt;% \n  mutate(country_label=stringr::str_trim(country_label)) %&gt;% \n  tidyr::separate_longer_delim(country_label, delim=\"   \") %&gt;% \n  select(country_label,flood) %&gt;% \n  unique() %&gt;% \n  group_by(country_label) %&gt;% \n  summarise(n_dfo=n())\n\ntruc=left_join(tib_dfo,tib_wd_in_dfo,by=\"country_label\") %&gt;% \n  mutate(prop=n_wd_in_dfo/n_dfo)"
  },
  {
    "objectID": "index.html#wd_events",
    "href": "index.html#wd_events",
    "title": "General purpose",
    "section": "wd_events",
    "text": "wd_events\n\n\nCode\nwd_events=readRDS(\"data/wd_events.RDS\")\nNwde=wd_events %&gt;% nrow()\n\n\nThere are 814 events documented in this table. They took place during these periods of time:\n\n\nCode\nwd_events %&gt;% \n  mutate(period=case_when(year&gt;=1900~\"after1900\",\n                          year&gt;=2000~\"after2000\",\n                          TRUE~\"before1900\")) %&gt;% \n  group_by(period) %&gt;% \n  tally()\n\n\n# A tibble: 2 × 2\n  period         n\n  &lt;chr&gt;      &lt;int&gt;\n1 after1900    615\n2 before1900   199"
  },
  {
    "objectID": "index.html#wp_pages",
    "href": "index.html#wp_pages",
    "title": "General purpose",
    "section": "wp_pages",
    "text": "wp_pages\n\n\nCode\nwp_pages=readRDS(\"data/wikisites_translated.RDS\")\nNwpp=nrow(wp_pages)\n\n\n\n\nCode\nNwde_with_wpp=wp_pages %&gt;% \n  group_by(flood) %&gt;% \n  tally() %&gt;% \n  nrow()\n\n\nThere are 2790 Wikipedia pages associated to the Wikidata flood events (i.e. on average 3.4275184 Wikipedia pages per event). Nwde_with_wpp flood events (90.79) are associated to at least one Wikipedia page."
  },
  {
    "objectID": "index.html#wp_texts",
    "href": "index.html#wp_texts",
    "title": "General purpose",
    "section": "wp_texts",
    "text": "wp_texts"
  },
  {
    "objectID": "index.html#wp_revisions",
    "href": "index.html#wp_revisions",
    "title": "General purpose",
    "section": "wp_revisions",
    "text": "wp_revisions"
  },
  {
    "objectID": "2_use_wikipedia.html#wp_words",
    "href": "2_use_wikipedia.html#wp_words",
    "title": "Use Wikipedia to complete Wikidata",
    "section": "",
    "text": "Code\nif(!file.exists(\"data/wp_words.RDS\")){\n  library(mixr)\n  lexicon_en=get_lexicon(\"en\")\n  wp_words=wp_pages %&gt;%\n    tidytext::unnest_tokens(output=\"word\",input=\"textt\",token=\"words\") %&gt;%\n    left_join(lexicon_en,by=c(\"word\")) %&gt;%\n    filter(type!=\"sw\" & lemma!=\"flood\") %&gt;%\n    group_by(flood,lemma) %&gt;%\n    summarise(n=n(),.groups=\"drop\") %&gt;%\n    arrange(flood,desc(n)) \n\nwp_words_spec &lt;- mixr::tidy_specificities(wp_words %&gt;% filter(n&gt;3),lemma, flood) %&gt;% \n  filter(spec&gt;2) %&gt;% \n  group_by(flood) %&gt;% \n  summarise(specific_words=paste(lemma,collapse=\"; \"),.groups=\"drop\")\nsaveRDS(wp_words_spec,\"data/wp_words_spec.RDS\")\nsaveRDS(wp_words,\"data/wp_words.RDS\")\nwp_20_words_per_event=wp_words %&gt;% \n  group_by(flood) %&gt;% \n  arrange(desc(n)) %&gt;% \n  slice_head(n=20) %&gt;% \n  summarise(words=paste(lemma,collapse=\"; \"), .groups=\"drop\")\nsaveRDS(wp_20_words_per_event,\"data/wp_20_words_per_event.RDS\")\n}\nwp_words=readRDS(\"data/wp_words.RDS\") %&gt;% \n  filter(flood %in% wd_raw$flood)"
  },
  {
    "objectID": "2_use_wikipedia.html#wp_revisions",
    "href": "2_use_wikipedia.html#wp_revisions",
    "title": "Use Wikipedia to complete Wikidata",
    "section": "",
    "text": "Code\nsource(\"scripts/get_revs.R\")\n\n\n\n\nCode\nif(!file.exists(\"data/wp_revisions.RDS\")){\nlibrary(httr)\nwp_revisions=wp_pages %&gt;% \n  select(-text,-textt) %&gt;% \n  mutate(revisions=purrr::map2(lang,title,get_revs)) %&gt;% \n  tidyr::unnest(cols=c(revisions)) %&gt;% \n  select(-flood,-flood_label,-lang,-title,-translated_title)\nsaveRDS(wp_revisions,\"data/wp_revisions.RDS\")\n}"
  },
  {
    "objectID": "about.html#digital-humanities-quarterly-scope",
    "href": "about.html#digital-humanities-quarterly-scope",
    "title": "About",
    "section": "Digital Humanities Quarterly scope:",
    "text": "Digital Humanities Quarterly scope:\nOpen Access Journal. The journal’s scope includes but is not limited to:\n\nDigital Tools and Methods in Humanities Research: DHQ publishes articles that showcase innovative digital tools, methods, and approaches used in humanities scholarship. This can involve text analysis, data visualization, digital archives, GIS (Geographic Information Systems), network analysis, and more.\nCritical Assessment of Digital Technologies in Humanities Studies: DHQ features critical evaluations and discussions about the implications, challenges, and limitations of using digital technologies in humanities research. This includes considerations of ethics, accessibility, and cultural implications of digital humanities work.\nInterdisciplinary Collaborations: The journal promotes interdisciplinary collaborations by highlighting research at the intersection of humanities disciplines and technology. It covers collaborations between historians, literary scholars, linguists, cultural studies scholars, and experts in computer science, data science, and information technology.\nDigital Pedagogy and Teaching Approaches: DHQ discusses innovative pedagogical approaches that integrate digital tools and methods into humanities teaching. This includes case studies, reviews, and discussions on the use of technology in the classroom to enhance learning experiences.\nDigital Humanities Projects and Case Studies: The journal publishes case studies and reports on digital humanities projects, initiatives, and experiments, providing insights into the practical application of digital methods in various humanities fields.\nOpen Access and Open Data: DHQ supports open access and open data principles, often discussing issues related to data curation, preservation, and accessibility in the context of digital humanities research."
  },
  {
    "objectID": "index.html#textual-content",
    "href": "index.html#textual-content",
    "title": "Online reports and narrations of flood events",
    "section": "Textual content",
    "text": "Textual content\nWe applied a structural topic modelling (STM) algorithm to identify topics in the Wikipedia text corpus and selected a number of topics of 6 (Weston et al. 2023). The STM method provides topics characterized by a set of most probable words (see fig. Figure 2). To help with the interpretation of subsequent results and figures, and although the corpus does not exhibit very distinct topics (which is unsurprising given the inherent specificity and formal homogeneity of the corpus) we propose a short label for each topic (“spatial range”,“weather”,“hydrology”,“management”,“historical importance”,“human toll”)\n\n\nCode\ntopic_model=readRDS(\"data/topic_model.RDS\")\ntermes_thematiques=readRDS(\"data/termes_thematiques.RDS\")\ntib_gamma=readRDS(\"data/tib_gamma.RDS\")\n\n\n\n\nCode\nggplot(termes_thematiques  %&gt;%\n         mutate(topic=as.factor(topic_label)) %&gt;%\n         mutate(term=reorder_within(term,by=beta,within=topic)),\n       aes(x=beta,y=term, fill=topic_label))+\n  geom_bar(stat=\"identity\")+\n    facet_wrap(facets=vars(topic), scales=\"free\")+\n    theme(legend.position=\"none\")+\n  scale_y_reordered()\n\n\n\n\n\nFigure 2: Topics identified by an STM process for the Wikipedia articles’ corpus\n\n\n\n\n\n\nCode\ntib_meta_thematiques=wp_words %&gt;% \n  group_by(flood,flood_label) %&gt;% \n  summarise(n=sum(n),.groups=\"drop\") %&gt;% \n  mutate(length=case_when(n&gt;median(n)~\"long document\",\n                          n&lt;=median(n)~\"short document\")) %&gt;% \n  left_join(tib_gamma, by=\"flood\",relationship = \"many-to-many\") %&gt;%\n         group_by(topic,topic_label,length) %&gt;% \n         summarise(sgamma=sum(gamma),.groups=\"drop\") %&gt;% \n         ungroup() %&gt;% \n         na.omit()\n\n\n\n\nCode\nggplot(tib_meta_thematiques,\n       aes(x=forcats::fct_reorder(topic_label,desc(topic_label)),y=sgamma,fill=topic_label))+\n  geom_col()+\n  facet_grid(cols=vars(length))+\n  coord_flip()+\n  theme(legend.position=\"none\")+\n  labs(x=\"topic_label\")\n\n\n\n\n\nFigure 3: Topics identified by an STM process for the Wikipedia articles’ corpus\n\n\n\n\nFigure 3 shows that the length of the article is probably a very important factor in the topics addressed (or conversely, the topics addressed determine the length of the article), with shorter articles corresponding to factual statements regarding spatial range and hydrology, and bringing justification of the existence of the article through a discussion of the historical importance of the event, while longer articles might convey more extensive reports of weather conditions and management of the crisis."
  },
  {
    "objectID": "5_text_analysis.html",
    "href": "5_text_analysis.html",
    "title": "Text analysis",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(stm)\nlibrary(tidytext)\nwp_words=readRDS(\"data/wp_words.RDS\")\n\n\n\n\nCode\nwp_words_freq=wp_words %&gt;%\n  group_by(lemma) %&gt;% \n  tally() %&gt;% \n  arrange(desc(n)) %&gt;% \n  slice_max(n,n=30)\n\nggplot(wp_words_freq,aes(x=forcats::fct_reorder(lemma,n),\n                         y=n) )+\n  geom_col()+\n  coord_flip()+\n  labs(x=\"lemma\",y=\"frequency\")\n\n\n\n\n\n\n\nCode\ntib_sparse=wp_words %&gt;% \n  group_by(lemma) %&gt;% # compte pour chaque lemme...\n  mutate(n=n()) %&gt;% # ...son nombre d'occurrences puis\n  filter(n&gt;20) %&gt;%  # retire ceux représentés moins de 20 fois dans le corpus\n  ungroup() %&gt;% \n  cast_sparse(row=flood, column=lemma, value=n)\n\n\n\n\nCode\nif(!file.exists(\"data/topic_model.RDS\")){\nset.seed(123)\ntopic_model&lt;-stm(tib_sparse,K=6, verbose=FALSE)\nsaveRDS(topic_model,\"data/topic_model.RDS\")\n}\ntopic_model=readRDS(\"data/topic_model.RDS\")\n\n\n\n\nCode\ntermes_thematiques=tidy(topic_model, matrix=\"beta\") %&gt;% \n  group_by(topic) %&gt;% \n  slice_max(beta,n=30) %&gt;%  \n  mutate(rank=row_number()) %&gt;% \n  arrange(topic,desc(beta)) %&gt;% \n  ungroup()\ntermes_thematiques\n\n\n# A tibble: 180 × 4\n   topic term     beta  rank\n   &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt;\n 1     1 water  0.0154     1\n 2     1 cause  0.0153     2\n 3     1 area   0.0151     3\n 4     1 river  0.0148     4\n 5     1 person 0.0147     5\n 6     1 damage 0.0146     6\n 7     1 rain   0.0144     7\n 8     1 affect 0.0140     8\n 9     1 heavy  0.0138     9\n10     1 occur  0.0137    10\n# ℹ 170 more rows\n\n\n\n\nCode\ntopics=tibble::tribble(~topic,~topic_label,\n                       1,\"1) spatial range\",\n                       2,\"2) weather\",\n                       3,\"3) hydrology\",\n                       4,\"4) management\",\n                       5,\"5) historical importance\",\n                       6,\"6) human toll\")\n\ntermes_thematiques=termes_thematiques %&gt;% \n  left_join(topics,by=\"topic\")\nsaveRDS(termes_thematiques,\"data/termes_thematiques.RDS\")\n\n\n\n\nCode\ntib_gamma &lt;- tidy(topic_model, matrix = \"gamma\") %&gt;% \n  left_join(wp_words %&gt;%\n              group_by(flood) %&gt;%\n              summarise(nwords=n()) %&gt;%\n              mutate(document=1:n()),by=\"document\") %&gt;% \n  arrange(flood,desc(gamma)) %&gt;% \n  left_join(topics,by=\"topic\")\nsaveRDS(tib_gamma,\"data/tib_gamma.RDS\")\n\n\n\n\n\n\nCode\nwp_texts=wp_words %&gt;% group_by(flood,flood_label) %&gt;% summarise(text=str_c(lemma,collapse=\" \"),.groups=\"drop\")\ntemp=textProcessor(documents=wp_texts$text,\n                   metadata=wp_texts %&gt;% select(-text))\n\n\nBuilding corpus... \nConverting to Lower Case... \nRemoving punctuation... \nRemoving stopwords... \nRemoving numbers... \nStemming... \nCreating Output... \n\n\nCode\nout &lt;- prepDocuments(temp$documents, temp$vocab, temp$meta)\n\n\nRemoving 2543 of 8582 terms (2543 of 191072 tokens) due to frequency \nYour corpus now has 724 documents, 6039 terms and 188529 tokens.\n\n\n\n\nCode\nif(file.exists(\"data/kresult.RDS\")){\n  documents &lt;- out$documents\n  vocab &lt;- out$vocab\n  meta &lt;- out$meta\n  set.seed(02138)\n  K&lt;-c(3:8)\n  kresult &lt;- searchK(documents, vocab, K, data=meta)\n  saveRDS(kresult,\"data/kresult.RDS\")\n\n}\n\n\nBeginning Spectral Initialization \n     Calculating the gram matrix...\n     Finding anchor words...\n    ...\n     Recovering initialization...\n    ............................................................\nInitialization complete.\n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 1 (approx. per word bound = -7.633) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 2 (approx. per word bound = -7.554, relative change = 1.040e-02) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 3 (approx. per word bound = -7.530, relative change = 3.167e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 4 (approx. per word bound = -7.522, relative change = 1.008e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 5 (approx. per word bound = -7.519, relative change = 4.456e-04) \nTopic 1: oper, manag, build, prevent, locat \n Topic 2: water, caus, area, day, river \n Topic 3: evacu, rain, person, heavi, caus \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 6 (approx. per word bound = -7.517, relative change = 2.357e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 7 (approx. per word bound = -7.516, relative change = 1.373e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 8 (approx. per word bound = -7.515, relative change = 8.452e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 9 (approx. per word bound = -7.515, relative change = 5.523e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 10 (approx. per word bound = -7.515, relative change = 3.758e-05) \nTopic 1: oper, manag, organ, prevent, build \n Topic 2: water, caus, area, day, build \n Topic 3: evacu, person, rain, heavi, caus \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 11 (approx. per word bound = -7.514, relative change = 2.630e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 12 (approx. per word bound = -7.514, relative change = 1.907e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 13 (approx. per word bound = -7.514, relative change = 1.415e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 14 (approx. per word bound = -7.514, relative change = 1.088e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nModel Converged \nBeginning Spectral Initialization \n     Calculating the gram matrix...\n     Finding anchor words...\n    ....\n     Recovering initialization...\n    ............................................................\nInitialization complete.\n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 1 (approx. per word bound = -7.632) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 2 (approx. per word bound = -7.535, relative change = 1.263e-02) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 3 (approx. per word bound = -7.510, relative change = 3.333e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 4 (approx. per word bound = -7.502, relative change = 1.045e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 5 (approx. per word bound = -7.499, relative change = 4.989e-04) \nTopic 1: oper, build, manag, warn, organ \n Topic 2: water, caus, area, day, damag \n Topic 3: rain, evacu, person, heavi, caus \n Topic 4: locat, origin, find, local, natur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 6 (approx. per word bound = -7.497, relative change = 2.847e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 7 (approx. per word bound = -7.495, relative change = 1.872e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 8 (approx. per word bound = -7.494, relative change = 1.351e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 9 (approx. per word bound = -7.493, relative change = 1.035e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 10 (approx. per word bound = -7.493, relative change = 8.591e-05) \nTopic 1: oper, manag, build, warn, organ \n Topic 2: water, caus, area, day, build \n Topic 3: evacu, rain, person, heavi, rainfal \n Topic 4: locat, origin, find, popul, natur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 11 (approx. per word bound = -7.492, relative change = 7.525e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 12 (approx. per word bound = -7.492, relative change = 6.670e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 13 (approx. per word bound = -7.491, relative change = 6.024e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 14 (approx. per word bound = -7.491, relative change = 5.601e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 15 (approx. per word bound = -7.490, relative change = 5.244e-05) \nTopic 1: oper, manag, warn, organ, transport \n Topic 2: water, caus, area, day, build \n Topic 3: evacu, rain, person, heavi, rainfal \n Topic 4: origin, locat, popul, find, natur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 16 (approx. per word bound = -7.490, relative change = 4.867e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 17 (approx. per word bound = -7.490, relative change = 4.636e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 18 (approx. per word bound = -7.489, relative change = 4.516e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 19 (approx. per word bound = -7.489, relative change = 4.347e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 20 (approx. per word bound = -7.489, relative change = 4.049e-05) \nTopic 1: oper, manag, warn, announc, transport \n Topic 2: water, caus, area, day, build \n Topic 3: evacu, person, rain, heavi, rainfal \n Topic 4: origin, locat, popul, find, natur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 21 (approx. per word bound = -7.488, relative change = 3.752e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 22 (approx. per word bound = -7.488, relative change = 3.456e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 23 (approx. per word bound = -7.488, relative change = 3.456e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 24 (approx. per word bound = -7.488, relative change = 3.329e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 25 (approx. per word bound = -7.488, relative change = 2.907e-05) \nTopic 1: oper, manag, warn, announc, transport \n Topic 2: water, caus, area, day, build \n Topic 3: person, evacu, rain, heavi, rainfal \n Topic 4: origin, locat, popul, find, direct \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 26 (approx. per word bound = -7.487, relative change = 2.709e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 27 (approx. per word bound = -7.487, relative change = 2.583e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 28 (approx. per word bound = -7.487, relative change = 2.502e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 29 (approx. per word bound = -7.487, relative change = 2.338e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 30 (approx. per word bound = -7.487, relative change = 2.156e-05) \nTopic 1: oper, manag, warn, announc, evacu \n Topic 2: water, caus, area, day, build \n Topic 3: person, rain, evacu, heavi, rainfal \n Topic 4: origin, popul, locat, refer, direct \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 31 (approx. per word bound = -7.486, relative change = 2.033e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 32 (approx. per word bound = -7.486, relative change = 1.908e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 33 (approx. per word bound = -7.486, relative change = 1.771e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 34 (approx. per word bound = -7.486, relative change = 1.652e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 35 (approx. per word bound = -7.486, relative change = 1.584e-05) \nTopic 1: oper, manag, warn, announc, evacu \n Topic 2: water, caus, area, day, build \n Topic 3: person, rain, evacu, heavi, rainfal \n Topic 4: origin, popul, locat, refer, direct \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 36 (approx. per word bound = -7.486, relative change = 1.538e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 37 (approx. per word bound = -7.486, relative change = 1.566e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 38 (approx. per word bound = -7.486, relative change = 1.562e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 39 (approx. per word bound = -7.485, relative change = 1.527e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 40 (approx. per word bound = -7.485, relative change = 1.457e-05) \nTopic 1: oper, manag, warn, announc, evacu \n Topic 2: water, caus, area, day, build \n Topic 3: person, rain, evacu, heavi, rainfal \n Topic 4: origin, popul, refer, locat, direct \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 41 (approx. per word bound = -7.485, relative change = 1.334e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 42 (approx. per word bound = -7.485, relative change = 1.254e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 43 (approx. per word bound = -7.485, relative change = 1.193e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 44 (approx. per word bound = -7.485, relative change = 1.197e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 45 (approx. per word bound = -7.485, relative change = 1.211e-05) \nTopic 1: oper, manag, warn, announc, evacu \n Topic 2: water, caus, area, day, build \n Topic 3: person, rain, evacu, heavi, rainfal \n Topic 4: origin, refer, popul, locat, find \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 46 (approx. per word bound = -7.485, relative change = 1.187e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 47 (approx. per word bound = -7.485, relative change = 1.143e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 48 (approx. per word bound = -7.485, relative change = 1.114e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 49 (approx. per word bound = -7.485, relative change = 1.093e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 50 (approx. per word bound = -7.484, relative change = 1.131e-05) \nTopic 1: oper, manag, warn, evacu, announc \n Topic 2: water, caus, area, day, river \n Topic 3: person, rain, heavi, evacu, rainfal \n Topic 4: origin, refer, popul, locat, find \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 51 (approx. per word bound = -7.484, relative change = 1.165e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 52 (approx. per word bound = -7.484, relative change = 1.174e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 53 (approx. per word bound = -7.484, relative change = 1.132e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 54 (approx. per word bound = -7.484, relative change = 1.113e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 55 (approx. per word bound = -7.484, relative change = 1.113e-05) \nTopic 1: oper, manag, warn, evacu, announc \n Topic 2: water, caus, area, day, river \n Topic 3: person, rain, heavi, evacu, rainfal \n Topic 4: origin, refer, popul, locat, find \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 56 (approx. per word bound = -7.484, relative change = 1.151e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 57 (approx. per word bound = -7.484, relative change = 1.227e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 58 (approx. per word bound = -7.484, relative change = 1.299e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 59 (approx. per word bound = -7.484, relative change = 1.393e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 60 (approx. per word bound = -7.484, relative change = 1.405e-05) \nTopic 1: oper, manag, warn, evacu, announc \n Topic 2: water, caus, area, day, river \n Topic 3: person, rain, heavi, evacu, affect \n Topic 4: origin, refer, popul, locat, find \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 61 (approx. per word bound = -7.483, relative change = 1.284e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 62 (approx. per word bound = -7.483, relative change = 1.154e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 63 (approx. per word bound = -7.483, relative change = 1.093e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 64 (approx. per word bound = -7.483, relative change = 1.072e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 65 (approx. per word bound = -7.483, relative change = 1.087e-05) \nTopic 1: oper, manag, warn, evacu, announc \n Topic 2: water, caus, area, day, river \n Topic 3: person, rain, heavi, evacu, affect \n Topic 4: origin, refer, locat, popul, sourc \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 66 (approx. per word bound = -7.483, relative change = 1.116e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 67 (approx. per word bound = -7.483, relative change = 1.045e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nModel Converged \nBeginning Spectral Initialization \n     Calculating the gram matrix...\n     Finding anchor words...\n    .....\n     Recovering initialization...\n    ............................................................\nInitialization complete.\n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 1 (approx. per word bound = -7.632) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 2 (approx. per word bound = -7.528, relative change = 1.361e-02) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 3 (approx. per word bound = -7.498, relative change = 3.895e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 4 (approx. per word bound = -7.488, relative change = 1.444e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 5 (approx. per word bound = -7.482, relative change = 7.917e-04) \nTopic 1: oper, build, manag, prevent, donat \n Topic 2: caus, water, day, occur, area \n Topic 3: person, rain, evacu, heavi, affect \n Topic 4: origin, locat, oper, manag, direct \n Topic 5: build, area, water, river, caus \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 6 (approx. per word bound = -7.478, relative change = 5.354e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 7 (approx. per word bound = -7.475, relative change = 3.981e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 8 (approx. per word bound = -7.472, relative change = 3.160e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 9 (approx. per word bound = -7.470, relative change = 2.588e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 10 (approx. per word bound = -7.469, relative change = 2.135e-04) \nTopic 1: oper, manag, donat, inform, organ \n Topic 2: caus, water, occur, day, area \n Topic 3: person, rain, evacu, heavi, affect \n Topic 4: origin, locat, popul, establish, find \n Topic 5: build, area, water, caus, river \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 11 (approx. per word bound = -7.467, relative change = 1.778e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 12 (approx. per word bound = -7.466, relative change = 1.491e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 13 (approx. per word bound = -7.465, relative change = 1.296e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 14 (approx. per word bound = -7.465, relative change = 1.177e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 15 (approx. per word bound = -7.464, relative change = 1.106e-04) \nTopic 1: oper, donat, manag, inform, assist \n Topic 2: caus, water, day, occur, area \n Topic 3: person, rain, affect, heavi, evacu \n Topic 4: origin, locat, popul, find, establish \n Topic 5: build, area, water, caus, day \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 16 (approx. per word bound = -7.463, relative change = 9.758e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 17 (approx. per word bound = -7.462, relative change = 8.727e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 18 (approx. per word bound = -7.462, relative change = 7.953e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 19 (approx. per word bound = -7.461, relative change = 7.130e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 20 (approx. per word bound = -7.461, relative change = 6.344e-05) \nTopic 1: oper, donat, inform, manag, assist \n Topic 2: caus, water, day, area, occur \n Topic 3: person, rain, affect, heavi, evacu \n Topic 4: origin, locat, popul, find, direct \n Topic 5: build, area, water, caus, rain \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 21 (approx. per word bound = -7.460, relative change = 5.569e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 22 (approx. per word bound = -7.460, relative change = 4.992e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 23 (approx. per word bound = -7.460, relative change = 4.582e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 24 (approx. per word bound = -7.459, relative change = 3.876e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 25 (approx. per word bound = -7.459, relative change = 3.265e-05) \nTopic 1: oper, donat, inform, assist, manag \n Topic 2: water, caus, day, area, occur \n Topic 3: person, rain, affect, heavi, caus \n Topic 4: origin, locat, popul, find, direct \n Topic 5: area, build, rain, caus, water \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 26 (approx. per word bound = -7.459, relative change = 3.036e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 27 (approx. per word bound = -7.459, relative change = 2.920e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 28 (approx. per word bound = -7.458, relative change = 2.839e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 29 (approx. per word bound = -7.458, relative change = 2.733e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 30 (approx. per word bound = -7.458, relative change = 2.578e-05) \nTopic 1: oper, donat, inform, assist, manag \n Topic 2: water, caus, area, day, occur \n Topic 3: person, rain, affect, heavi, caus \n Topic 4: origin, locat, find, popul, direct \n Topic 5: area, rain, caus, build, day \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 31 (approx. per word bound = -7.458, relative change = 2.396e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 32 (approx. per word bound = -7.458, relative change = 2.298e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 33 (approx. per word bound = -7.457, relative change = 2.236e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 34 (approx. per word bound = -7.457, relative change = 2.165e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 35 (approx. per word bound = -7.457, relative change = 2.115e-05) \nTopic 1: oper, donat, inform, assist, manag \n Topic 2: water, caus, area, day, larg \n Topic 3: person, rain, affect, heavi, caus \n Topic 4: origin, locat, find, direct, refer \n Topic 5: area, rain, caus, day, water \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 36 (approx. per word bound = -7.457, relative change = 2.178e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 37 (approx. per word bound = -7.457, relative change = 1.965e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 38 (approx. per word bound = -7.457, relative change = 1.760e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 39 (approx. per word bound = -7.457, relative change = 1.699e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 40 (approx. per word bound = -7.456, relative change = 1.737e-05) \nTopic 1: oper, inform, donat, assist, manag \n Topic 2: water, caus, area, day, larg \n Topic 3: person, rain, affect, heavi, caus \n Topic 4: origin, locat, find, refer, direct \n Topic 5: rain, area, caus, day, water \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 41 (approx. per word bound = -7.456, relative change = 1.588e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 42 (approx. per word bound = -7.456, relative change = 1.457e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 43 (approx. per word bound = -7.456, relative change = 1.331e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 44 (approx. per word bound = -7.456, relative change = 1.206e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 45 (approx. per word bound = -7.456, relative change = 1.195e-05) \nTopic 1: oper, inform, assist, donat, manag \n Topic 2: water, caus, area, day, larg \n Topic 3: person, rain, affect, heavi, caus \n Topic 4: origin, locat, find, refer, deposit \n Topic 5: rain, area, caus, day, water \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 46 (approx. per word bound = -7.456, relative change = 1.199e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 47 (approx. per word bound = -7.456, relative change = 1.190e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 48 (approx. per word bound = -7.456, relative change = 1.073e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nModel Converged \nBeginning Spectral Initialization \n     Calculating the gram matrix...\n     Finding anchor words...\n    ......\n     Recovering initialization...\n    ............................................................\nInitialization complete.\n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 1 (approx. per word bound = -7.630) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 2 (approx. per word bound = -7.517, relative change = 1.484e-02) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 3 (approx. per word bound = -7.483, relative change = 4.493e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 4 (approx. per word bound = -7.471, relative change = 1.651e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 5 (approx. per word bound = -7.464, relative change = 9.239e-04) \nTopic 1: oper, build, manag, inform, donat \n Topic 2: occur, day, water, caus, area \n Topic 3: evacu, person, rainfal, heavi, rain \n Topic 4: origin, locat, oper, manag, activ \n Topic 5: caus, area, water, river, rain \n Topic 6: protect, warn, evacu, build, close \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 6 (approx. per word bound = -7.459, relative change = 6.176e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 7 (approx. per word bound = -7.456, relative change = 4.529e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 8 (approx. per word bound = -7.453, relative change = 3.577e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 9 (approx. per word bound = -7.451, relative change = 2.848e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 10 (approx. per word bound = -7.449, relative change = 2.307e-04) \nTopic 1: oper, inform, donat, manag, organ \n Topic 2: water, caus, occur, day, area \n Topic 3: person, evacu, heavi, affect, rain \n Topic 4: origin, locat, popul, establish, oper \n Topic 5: area, caus, water, rain, river \n Topic 6: warn, evacu, protect, pressur, oper \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 11 (approx. per word bound = -7.448, relative change = 1.933e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 12 (approx. per word bound = -7.447, relative change = 1.713e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 13 (approx. per word bound = -7.446, relative change = 1.510e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 14 (approx. per word bound = -7.445, relative change = 1.285e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 15 (approx. per word bound = -7.444, relative change = 1.097e-04) \nTopic 1: oper, inform, donat, organ, manag \n Topic 2: caus, water, day, occur, area \n Topic 3: person, evacu, affect, heavi, displac \n Topic 4: origin, popul, locat, direct, develop \n Topic 5: area, caus, water, rain, river \n Topic 6: warn, evacu, weather, oper, pressur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 16 (approx. per word bound = -7.443, relative change = 9.409e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 17 (approx. per word bound = -7.443, relative change = 8.305e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 18 (approx. per word bound = -7.442, relative change = 7.352e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 19 (approx. per word bound = -7.442, relative change = 6.410e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 20 (approx. per word bound = -7.441, relative change = 5.671e-05) \nTopic 1: oper, inform, donat, assist, organ \n Topic 2: water, caus, day, occur, area \n Topic 3: person, displac, evacu, affect, heavi \n Topic 4: origin, direct, popul, find, develop \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, weather, oper, north \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 21 (approx. per word bound = -7.441, relative change = 5.065e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 22 (approx. per word bound = -7.440, relative change = 4.691e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 23 (approx. per word bound = -7.440, relative change = 4.550e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 24 (approx. per word bound = -7.440, relative change = 4.294e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 25 (approx. per word bound = -7.439, relative change = 3.942e-05) \nTopic 1: oper, inform, assist, donat, organ \n Topic 2: water, caus, day, occur, area \n Topic 3: person, displac, kill, affect, heavi \n Topic 4: origin, direct, find, develop, deposit \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, weather, oper, north \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 26 (approx. per word bound = -7.439, relative change = 3.763e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 27 (approx. per word bound = -7.439, relative change = 3.653e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 28 (approx. per word bound = -7.439, relative change = 3.692e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 29 (approx. per word bound = -7.438, relative change = 3.685e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 30 (approx. per word bound = -7.438, relative change = 3.515e-05) \nTopic 1: oper, inform, assist, donat, organ \n Topic 2: water, caus, day, occur, larg \n Topic 3: person, displac, kill, affect, heavi \n Topic 4: origin, direct, find, refer, deposit \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, north, weather, close \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 31 (approx. per word bound = -7.438, relative change = 3.172e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 32 (approx. per word bound = -7.438, relative change = 2.835e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 33 (approx. per word bound = -7.437, relative change = 2.629e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 34 (approx. per word bound = -7.437, relative change = 2.589e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 35 (approx. per word bound = -7.437, relative change = 2.698e-05) \nTopic 1: oper, assist, inform, organ, donat \n Topic 2: water, day, caus, larg, storm \n Topic 3: person, displac, kill, affect, heavi \n Topic 4: origin, direct, refer, find, deposit \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, north, close, weather \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 36 (approx. per word bound = -7.437, relative change = 2.792e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 37 (approx. per word bound = -7.437, relative change = 2.551e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 38 (approx. per word bound = -7.436, relative change = 2.210e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 39 (approx. per word bound = -7.436, relative change = 2.008e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 40 (approx. per word bound = -7.436, relative change = 1.925e-05) \nTopic 1: oper, assist, inform, organ, donat \n Topic 2: water, day, caus, storm, larg \n Topic 3: person, displac, kill, affect, heavi \n Topic 4: origin, direct, refer, find, deposit \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, north, close, move \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 41 (approx. per word bound = -7.436, relative change = 1.836e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 42 (approx. per word bound = -7.436, relative change = 1.739e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 43 (approx. per word bound = -7.436, relative change = 1.613e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 44 (approx. per word bound = -7.436, relative change = 1.482e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 45 (approx. per word bound = -7.436, relative change = 1.355e-05) \nTopic 1: oper, assist, inform, organ, donat \n Topic 2: water, day, caus, storm, dike \n Topic 3: person, kill, displac, affect, heavi \n Topic 4: origin, direct, refer, deposit, find \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, north, close, move \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 46 (approx. per word bound = -7.435, relative change = 1.274e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 47 (approx. per word bound = -7.435, relative change = 1.217e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 48 (approx. per word bound = -7.435, relative change = 1.267e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 49 (approx. per word bound = -7.435, relative change = 1.316e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 50 (approx. per word bound = -7.435, relative change = 1.327e-05) \nTopic 1: oper, assist, inform, organ, manag \n Topic 2: water, day, caus, storm, dike \n Topic 3: person, kill, displac, affect, heavi \n Topic 4: origin, direct, refer, deposit, find \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, north, close, move \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 51 (approx. per word bound = -7.435, relative change = 1.363e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 52 (approx. per word bound = -7.435, relative change = 1.332e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 53 (approx. per word bound = -7.435, relative change = 1.257e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 54 (approx. per word bound = -7.435, relative change = 1.155e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 55 (approx. per word bound = -7.435, relative change = 1.182e-05) \nTopic 1: oper, assist, organ, inform, manag \n Topic 2: water, day, storm, caus, dike \n Topic 3: person, kill, displac, affect, heavi \n Topic 4: origin, refer, direct, deposit, find \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, north, close, move \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 56 (approx. per word bound = -7.435, relative change = 1.205e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 57 (approx. per word bound = -7.434, relative change = 1.169e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nModel Converged \nBeginning Spectral Initialization \n     Calculating the gram matrix...\n     Finding anchor words...\n    .......\n     Recovering initialization...\n    ............................................................\nInitialization complete.\n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 1 (approx. per word bound = -7.629) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 2 (approx. per word bound = -7.507, relative change = 1.605e-02) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 3 (approx. per word bound = -7.468, relative change = 5.129e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 4 (approx. per word bound = -7.457, relative change = 1.565e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 5 (approx. per word bound = -7.450, relative change = 8.501e-04) \nTopic 1: oper, build, inform, manag, organ \n Topic 2: day, water, occur, caus, area \n Topic 3: evacu, rainfal, person, heavi, rain \n Topic 4: origin, locat, oper, activ, natur \n Topic 5: caus, area, rain, water, river \n Topic 6: protect, build, time, day, measur \n Topic 7: assist, manag, oper, develop, donat \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 6 (approx. per word bound = -7.446, relative change = 6.013e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 7 (approx. per word bound = -7.442, relative change = 4.727e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 8 (approx. per word bound = -7.440, relative change = 3.878e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 9 (approx. per word bound = -7.437, relative change = 3.330e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 10 (approx. per word bound = -7.435, relative change = 2.913e-04) \nTopic 1: oper, inform, build, organ, manag \n Topic 2: caus, water, day, occur, area \n Topic 3: person, evacu, displac, heavi, affect \n Topic 4: origin, locat, popul, establish, find \n Topic 5: area, rain, caus, water, river \n Topic 6: protect, warn, measur, pressur, close \n Topic 7: assist, donat, oper, manag, develop \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 11 (approx. per word bound = -7.433, relative change = 2.545e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 12 (approx. per word bound = -7.431, relative change = 2.195e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 13 (approx. per word bound = -7.430, relative change = 1.915e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 14 (approx. per word bound = -7.429, relative change = 1.676e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 15 (approx. per word bound = -7.428, relative change = 1.458e-04) \nTopic 1: oper, inform, organ, restor, build \n Topic 2: water, caus, day, area, occur \n Topic 3: displac, person, kill, affect, august \n Topic 4: origin, locat, popul, find, author \n Topic 5: rain, area, caus, water, river \n Topic 6: warn, protect, pressur, evacu, weather \n Topic 7: assist, donat, unit, oper, develop \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 16 (approx. per word bound = -7.427, relative change = 1.259e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 17 (approx. per word bound = -7.426, relative change = 1.082e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 18 (approx. per word bound = -7.425, relative change = 9.444e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 19 (approx. per word bound = -7.425, relative change = 8.666e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 20 (approx. per word bound = -7.424, relative change = 8.462e-05) \nTopic 1: oper, restor, protect, inform, organ \n Topic 2: water, caus, day, area, larg \n Topic 3: displac, person, august, kill, relief \n Topic 4: origin, locat, find, author, popul \n Topic 5: rain, area, caus, water, river \n Topic 6: warn, protect, pressur, evacu, weather \n Topic 7: assist, donat, unit, nation, oper \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 21 (approx. per word bound = -7.423, relative change = 8.634e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 22 (approx. per word bound = -7.423, relative change = 9.120e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 23 (approx. per word bound = -7.422, relative change = 9.222e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 24 (approx. per word bound = -7.421, relative change = 8.656e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 25 (approx. per word bound = -7.421, relative change = 8.004e-05) \nTopic 1: oper, restor, protect, inform, manag \n Topic 2: water, caus, day, area, larg \n Topic 3: displac, august, kill, person, relief \n Topic 4: origin, locat, find, author, direct \n Topic 5: rain, area, caus, water, river \n Topic 6: warn, protect, evacu, pressur, weather \n Topic 7: assist, donat, nation, unit, develop \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 26 (approx. per word bound = -7.420, relative change = 7.365e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 27 (approx. per word bound = -7.420, relative change = 6.902e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 28 (approx. per word bound = -7.419, relative change = 6.566e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 29 (approx. per word bound = -7.419, relative change = 6.265e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 30 (approx. per word bound = -7.418, relative change = 5.721e-05) \nTopic 1: oper, restor, protect, manag, inform \n Topic 2: water, caus, day, area, larg \n Topic 3: august, displac, kill, relief, person \n Topic 4: origin, locat, find, refer, direct \n Topic 5: rain, area, caus, water, damag \n Topic 6: warn, protect, evacu, move, weather \n Topic 7: assist, nation, donat, unit, develop \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 31 (approx. per word bound = -7.418, relative change = 5.227e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 32 (approx. per word bound = -7.418, relative change = 4.860e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 33 (approx. per word bound = -7.417, relative change = 4.692e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 34 (approx. per word bound = -7.417, relative change = 4.571e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 35 (approx. per word bound = -7.417, relative change = 4.323e-05) \nTopic 1: oper, restor, protect, manag, inform \n Topic 2: water, caus, day, area, larg \n Topic 3: august, displac, kill, relief, hectar \n Topic 4: origin, locat, find, refer, direct \n Topic 5: rain, area, caus, water, person \n Topic 6: warn, evacu, protect, counti, move \n Topic 7: assist, nation, donat, unit, develop \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 36 (approx. per word bound = -7.416, relative change = 4.152e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 37 (approx. per word bound = -7.416, relative change = 3.853e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 38 (approx. per word bound = -7.416, relative change = 3.562e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 39 (approx. per word bound = -7.415, relative change = 3.621e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 40 (approx. per word bound = -7.415, relative change = 3.542e-05) \nTopic 1: oper, protect, restor, manag, inform \n Topic 2: water, caus, day, area, larg \n Topic 3: august, displac, hectar, kill, relief \n Topic 4: origin, find, locat, refer, direct \n Topic 5: rain, area, caus, water, person \n Topic 6: warn, evacu, protect, counti, move \n Topic 7: assist, nation, donat, unit, oper \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 41 (approx. per word bound = -7.415, relative change = 3.391e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 42 (approx. per word bound = -7.415, relative change = 3.270e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 43 (approx. per word bound = -7.414, relative change = 3.180e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 44 (approx. per word bound = -7.414, relative change = 3.073e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 45 (approx. per word bound = -7.414, relative change = 2.948e-05) \nTopic 1: oper, protect, restor, manag, inform \n Topic 2: water, day, caus, larg, area \n Topic 3: august, hectar, china, displac, provinc \n Topic 4: origin, find, locat, refer, direct \n Topic 5: rain, area, caus, person, water \n Topic 6: warn, evacu, protect, counti, move \n Topic 7: assist, nation, donat, unit, oper \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 46 (approx. per word bound = -7.414, relative change = 2.919e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 47 (approx. per word bound = -7.414, relative change = 2.914e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 48 (approx. per word bound = -7.413, relative change = 2.893e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 49 (approx. per word bound = -7.413, relative change = 2.897e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 50 (approx. per word bound = -7.413, relative change = 2.743e-05) \nTopic 1: oper, protect, restor, manag, prevent \n Topic 2: water, day, caus, larg, area \n Topic 3: august, china, hectar, displac, provinc \n Topic 4: origin, find, refer, locat, direct \n Topic 5: rain, caus, area, person, water \n Topic 6: warn, evacu, counti, protect, move \n Topic 7: assist, nation, donat, unit, provid \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 51 (approx. per word bound = -7.413, relative change = 2.459e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 52 (approx. per word bound = -7.413, relative change = 2.324e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 53 (approx. per word bound = -7.412, relative change = 2.378e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 54 (approx. per word bound = -7.412, relative change = 2.414e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 55 (approx. per word bound = -7.412, relative change = 2.438e-05) \nTopic 1: oper, protect, manag, restor, prevent \n Topic 2: water, day, caus, larg, area \n Topic 3: august, china, hectar, typhoon, provinc \n Topic 4: origin, find, refer, locat, deposit \n Topic 5: rain, caus, area, person, water \n Topic 6: warn, evacu, counti, protect, unit \n Topic 7: assist, nation, donat, unit, provid \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 56 (approx. per word bound = -7.412, relative change = 2.403e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 57 (approx. per word bound = -7.412, relative change = 2.383e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 58 (approx. per word bound = -7.411, relative change = 2.188e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 59 (approx. per word bound = -7.411, relative change = 1.983e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 60 (approx. per word bound = -7.411, relative change = 1.821e-05) \nTopic 1: oper, protect, manag, restor, prevent \n Topic 2: water, day, caus, larg, area \n Topic 3: china, august, hectar, typhoon, casualti \n Topic 4: origin, find, refer, locat, deposit \n Topic 5: rain, caus, area, person, water \n Topic 6: warn, evacu, counti, unit, move \n Topic 7: assist, nation, donat, provid, unit \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 61 (approx. per word bound = -7.411, relative change = 1.995e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 62 (approx. per word bound = -7.411, relative change = 2.243e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 63 (approx. per word bound = -7.411, relative change = 1.887e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 64 (approx. per word bound = -7.411, relative change = 1.550e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 65 (approx. per word bound = -7.411, relative change = 1.513e-05) \nTopic 1: oper, protect, manag, prevent, restor \n Topic 2: water, day, caus, larg, area \n Topic 3: china, august, hectar, typhoon, casualti \n Topic 4: origin, find, refer, locat, deposit \n Topic 5: rain, caus, area, person, water \n Topic 6: warn, evacu, counti, unit, move \n Topic 7: assist, nation, donat, provid, unit \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 66 (approx. per word bound = -7.410, relative change = 1.422e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 67 (approx. per word bound = -7.410, relative change = 1.440e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 68 (approx. per word bound = -7.410, relative change = 1.370e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 69 (approx. per word bound = -7.410, relative change = 1.141e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 70 (approx. per word bound = -7.410, relative change = 1.137e-05) \nTopic 1: oper, protect, manag, prevent, restor \n Topic 2: water, day, caus, larg, area \n Topic 3: china, hectar, august, typhoon, casualti \n Topic 4: origin, find, refer, locat, deposit \n Topic 5: rain, caus, area, person, water \n Topic 6: warn, evacu, counti, unit, move \n Topic 7: assist, nation, donat, provid, unit \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 71 (approx. per word bound = -7.410, relative change = 1.112e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 72 (approx. per word bound = -7.410, relative change = 1.151e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 73 (approx. per word bound = -7.410, relative change = 1.189e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 74 (approx. per word bound = -7.410, relative change = 1.147e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 75 (approx. per word bound = -7.410, relative change = 1.133e-05) \nTopic 1: oper, manag, prevent, protect, restor \n Topic 2: water, day, caus, larg, area \n Topic 3: china, hectar, typhoon, august, casualti \n Topic 4: origin, refer, find, locat, deposit \n Topic 5: rain, caus, area, person, water \n Topic 6: warn, evacu, counti, unit, move \n Topic 7: assist, nation, donat, food, provid \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 76 (approx. per word bound = -7.410, relative change = 1.129e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 77 (approx. per word bound = -7.409, relative change = 1.002e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nModel Converged \nBeginning Spectral Initialization \n     Calculating the gram matrix...\n     Finding anchor words...\n    ........\n     Recovering initialization...\n    ............................................................\nInitialization complete.\n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 1 (approx. per word bound = -7.629) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 2 (approx. per word bound = -7.500, relative change = 1.680e-02) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 3 (approx. per word bound = -7.459, relative change = 5.576e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 4 (approx. per word bound = -7.446, relative change = 1.714e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 5 (approx. per word bound = -7.439, relative change = 9.095e-04) \nTopic 1: build, oper, manag, prevent, protect \n Topic 2: occur, area, water, caus, day \n Topic 3: evacu, rainfal, heavi, rain, person \n Topic 4: origin, oper, activ, locat, accumul \n Topic 5: caus, area, person, rain, water \n Topic 6: build, day, break, time, water \n Topic 7: assist, oper, manag, develop, donat \n Topic 8: caus, day, north, storm, water \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 6 (approx. per word bound = -7.434, relative change = 6.241e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 7 (approx. per word bound = -7.431, relative change = 4.950e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 8 (approx. per word bound = -7.428, relative change = 4.245e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 9 (approx. per word bound = -7.425, relative change = 3.888e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 10 (approx. per word bound = -7.422, relative change = 3.546e-04) \nTopic 1: oper, build, manag, protect, inform \n Topic 2: water, area, caus, occur, river \n Topic 3: evacu, rainfal, heavi, south, rain \n Topic 4: origin, oper, activ, accumul, establish \n Topic 5: person, rain, area, caus, damag \n Topic 6: build, foot, unit, counti, day \n Topic 7: assist, oper, donat, manag, develop \n Topic 8: island, caus, protect, day, high \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 11 (approx. per word bound = -7.420, relative change = 3.250e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 12 (approx. per word bound = -7.418, relative change = 2.936e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 13 (approx. per word bound = -7.416, relative change = 2.633e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 14 (approx. per word bound = -7.414, relative change = 2.461e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 15 (approx. per word bound = -7.412, relative change = 2.381e-04) \nTopic 1: oper, protect, build, manag, organ \n Topic 2: water, caus, area, river, day \n Topic 3: august, reservoir, hectar, evacu, displac \n Topic 4: origin, establish, activ, popul, oper \n Topic 5: person, rain, area, caus, evacu \n Topic 6: foot, build, unit, counti, inch \n Topic 7: assist, oper, donat, product, unit \n Topic 8: island, protect, measur, high, level \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 16 (approx. per word bound = -7.410, relative change = 2.276e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 17 (approx. per word bound = -7.409, relative change = 2.077e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 18 (approx. per word bound = -7.407, relative change = 1.749e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 19 (approx. per word bound = -7.406, relative change = 1.481e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 20 (approx. per word bound = -7.405, relative change = 1.290e-04) \nTopic 1: oper, build, protect, manag, restor \n Topic 2: water, caus, area, river, day \n Topic 3: reservoir, august, hectar, annual, displac \n Topic 4: origin, establish, generat, popul, activ \n Topic 5: person, rain, caus, area, evacu \n Topic 6: foot, unit, build, inch, counti \n Topic 7: assist, donat, oper, product, distribut \n Topic 8: island, protect, measur, pressur, strong \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 21 (approx. per word bound = -7.405, relative change = 1.131e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 22 (approx. per word bound = -7.404, relative change = 1.029e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 23 (approx. per word bound = -7.403, relative change = 9.569e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 24 (approx. per word bound = -7.402, relative change = 8.970e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 25 (approx. per word bound = -7.402, relative change = 8.461e-05) \nTopic 1: oper, build, protect, manag, restor \n Topic 2: water, caus, area, river, day \n Topic 3: reservoir, august, hectar, china, annual \n Topic 4: origin, establish, develop, generat, human \n Topic 5: person, rain, caus, area, evacu \n Topic 6: foot, unit, build, inch, counti \n Topic 7: assist, donat, oper, product, distribut \n Topic 8: island, protect, measur, wind, pressur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 26 (approx. per word bound = -7.401, relative change = 7.894e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 27 (approx. per word bound = -7.401, relative change = 7.311e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 28 (approx. per word bound = -7.400, relative change = 6.587e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 29 (approx. per word bound = -7.400, relative change = 6.167e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 30 (approx. per word bound = -7.399, relative change = 5.854e-05) \nTopic 1: oper, protect, build, manag, prevent \n Topic 2: water, caus, area, river, day \n Topic 3: reservoir, august, china, typhoon, hectar \n Topic 4: origin, develop, establish, human, find \n Topic 5: person, rain, caus, area, evacu \n Topic 6: foot, unit, build, evacu, inch \n Topic 7: assist, donat, product, oper, unit \n Topic 8: island, protect, measur, wind, pressur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 31 (approx. per word bound = -7.399, relative change = 5.631e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 32 (approx. per word bound = -7.399, relative change = 5.137e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 33 (approx. per word bound = -7.398, relative change = 4.565e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 34 (approx. per word bound = -7.398, relative change = 4.397e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 35 (approx. per word bound = -7.398, relative change = 4.291e-05) \nTopic 1: oper, protect, build, manag, evacu \n Topic 2: water, caus, area, river, day \n Topic 3: reservoir, china, typhoon, august, annual \n Topic 4: origin, develop, human, find, establish \n Topic 5: person, rain, caus, area, evacu \n Topic 6: foot, evacu, unit, build, inch \n Topic 7: assist, donat, product, unit, oper \n Topic 8: island, protect, wind, measur, sea \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 36 (approx. per word bound = -7.397, relative change = 4.038e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 37 (approx. per word bound = -7.397, relative change = 3.741e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 38 (approx. per word bound = -7.397, relative change = 3.590e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 39 (approx. per word bound = -7.396, relative change = 3.462e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 40 (approx. per word bound = -7.396, relative change = 3.442e-05) \nTopic 1: oper, protect, build, manag, evacu \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, reservoir, august, rainstorm \n Topic 4: origin, human, develop, find, direct \n Topic 5: person, rain, caus, area, affect \n Topic 6: foot, evacu, unit, build, warn \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, wind, protect, measur, sea \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 41 (approx. per word bound = -7.396, relative change = 3.339e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 42 (approx. per word bound = -7.396, relative change = 3.058e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 43 (approx. per word bound = -7.395, relative change = 2.906e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 44 (approx. per word bound = -7.395, relative change = 2.819e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 45 (approx. per word bound = -7.395, relative change = 2.698e-05) \nTopic 1: oper, protect, manag, evacu, build \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, reservoir, august, rainstorm \n Topic 4: origin, human, find, develop, direct \n Topic 5: person, rain, caus, area, affect \n Topic 6: foot, evacu, unit, warn, build \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, wind, protect, sea, measur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 46 (approx. per word bound = -7.395, relative change = 2.619e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 47 (approx. per word bound = -7.395, relative change = 2.708e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 48 (approx. per word bound = -7.394, relative change = 2.896e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 49 (approx. per word bound = -7.394, relative change = 2.577e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 50 (approx. per word bound = -7.394, relative change = 2.270e-05) \nTopic 1: oper, manag, evacu, protect, municip \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, rainstorm, august, reservoir \n Topic 4: origin, find, human, develop, direct \n Topic 5: person, rain, caus, affect, area \n Topic 6: evacu, foot, unit, warn, state \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, wind, protect, sea, tide \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 51 (approx. per word bound = -7.394, relative change = 2.067e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 52 (approx. per word bound = -7.394, relative change = 1.873e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 53 (approx. per word bound = -7.394, relative change = 2.227e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 54 (approx. per word bound = -7.394, relative change = 2.008e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 55 (approx. per word bound = -7.393, relative change = 1.947e-05) \nTopic 1: oper, evacu, manag, municip, protect \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, rainstorm, august, reservoir \n Topic 4: origin, find, human, develop, refer \n Topic 5: person, rain, caus, affect, area \n Topic 6: evacu, foot, warn, state, unit \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, wind, protect, tide, sea \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 56 (approx. per word bound = -7.393, relative change = 1.966e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 57 (approx. per word bound = -7.393, relative change = 1.945e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 58 (approx. per word bound = -7.393, relative change = 1.960e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 59 (approx. per word bound = -7.393, relative change = 1.946e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 60 (approx. per word bound = -7.393, relative change = 1.864e-05) \nTopic 1: oper, municip, evacu, manag, protect \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, rainstorm, august, line \n Topic 4: origin, find, human, develop, refer \n Topic 5: person, rain, caus, affect, area \n Topic 6: evacu, foot, state, warn, unit \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, wind, tide, sea, protect \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 61 (approx. per word bound = -7.393, relative change = 1.710e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 62 (approx. per word bound = -7.392, relative change = 1.623e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 63 (approx. per word bound = -7.392, relative change = 1.519e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 64 (approx. per word bound = -7.392, relative change = 1.471e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 65 (approx. per word bound = -7.392, relative change = 1.317e-05) \nTopic 1: oper, municip, evacu, manag, protect \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, rainstorm, august, annual \n Topic 4: origin, find, human, develop, refer \n Topic 5: person, rain, caus, affect, area \n Topic 6: evacu, foot, state, warn, unit \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, wind, tide, sea, protect \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 66 (approx. per word bound = -7.392, relative change = 1.290e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 67 (approx. per word bound = -7.392, relative change = 1.361e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 68 (approx. per word bound = -7.392, relative change = 1.286e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 69 (approx. per word bound = -7.392, relative change = 1.199e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 70 (approx. per word bound = -7.392, relative change = 1.185e-05) \nTopic 1: oper, municip, evacu, manag, protect \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, rainstorm, august, annual \n Topic 4: origin, find, human, refer, develop \n Topic 5: person, rain, affect, caus, area \n Topic 6: evacu, foot, warn, state, resid \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, tide, wind, sea, protect \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 71 (approx. per word bound = -7.392, relative change = 1.450e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 72 (approx. per word bound = -7.391, relative change = 1.327e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 73 (approx. per word bound = -7.391, relative change = 1.161e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 74 (approx. per word bound = -7.391, relative change = 1.102e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 75 (approx. per word bound = -7.391, relative change = 1.060e-05) \nTopic 1: oper, municip, evacu, manag, protect \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, rainstorm, august, annual \n Topic 4: origin, find, human, refer, develop \n Topic 5: person, rain, affect, caus, area \n Topic 6: evacu, warn, state, foot, resid \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, tide, wind, sea, protect \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 76 (approx. per word bound = -7.391, relative change = 1.056e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 77 (approx. per word bound = -7.391, relative change = 1.046e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nModel Converged \n\n\nCode\nkresult=readRDS(\"data/kresult.RDS\")\nplot(kresult)"
  },
  {
    "objectID": "5_text_analysis.html#choice-of-number-of-classes",
    "href": "5_text_analysis.html#choice-of-number-of-classes",
    "title": "Text analysis",
    "section": "",
    "text": "Code\nwp_texts=wp_words %&gt;% group_by(flood,flood_label) %&gt;% summarise(text=str_c(lemma,collapse=\" \"),.groups=\"drop\")\ntemp=textProcessor(documents=wp_texts$text,\n                   metadata=wp_texts %&gt;% select(-text))\n\n\nBuilding corpus... \nConverting to Lower Case... \nRemoving punctuation... \nRemoving stopwords... \nRemoving numbers... \nStemming... \nCreating Output... \n\n\nCode\nout &lt;- prepDocuments(temp$documents, temp$vocab, temp$meta)\n\n\nRemoving 2543 of 8582 terms (2543 of 191072 tokens) due to frequency \nYour corpus now has 724 documents, 6039 terms and 188529 tokens.\n\n\n\n\nCode\nif(file.exists(\"data/kresult.RDS\")){\n  documents &lt;- out$documents\n  vocab &lt;- out$vocab\n  meta &lt;- out$meta\n  set.seed(02138)\n  K&lt;-c(3:8)\n  kresult &lt;- searchK(documents, vocab, K, data=meta)\n  saveRDS(kresult,\"data/kresult.RDS\")\n\n}\n\n\nBeginning Spectral Initialization \n     Calculating the gram matrix...\n     Finding anchor words...\n    ...\n     Recovering initialization...\n    ............................................................\nInitialization complete.\n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 1 (approx. per word bound = -7.633) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 2 (approx. per word bound = -7.554, relative change = 1.040e-02) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 3 (approx. per word bound = -7.530, relative change = 3.167e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 4 (approx. per word bound = -7.522, relative change = 1.008e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 5 (approx. per word bound = -7.519, relative change = 4.456e-04) \nTopic 1: oper, manag, build, prevent, locat \n Topic 2: water, caus, area, day, river \n Topic 3: evacu, rain, person, heavi, caus \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 6 (approx. per word bound = -7.517, relative change = 2.357e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 7 (approx. per word bound = -7.516, relative change = 1.373e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 8 (approx. per word bound = -7.515, relative change = 8.452e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 9 (approx. per word bound = -7.515, relative change = 5.523e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 10 (approx. per word bound = -7.515, relative change = 3.758e-05) \nTopic 1: oper, manag, organ, prevent, build \n Topic 2: water, caus, area, day, build \n Topic 3: evacu, person, rain, heavi, caus \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 11 (approx. per word bound = -7.514, relative change = 2.630e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 12 (approx. per word bound = -7.514, relative change = 1.907e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 13 (approx. per word bound = -7.514, relative change = 1.415e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 14 (approx. per word bound = -7.514, relative change = 1.088e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nModel Converged \nBeginning Spectral Initialization \n     Calculating the gram matrix...\n     Finding anchor words...\n    ....\n     Recovering initialization...\n    ............................................................\nInitialization complete.\n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 1 (approx. per word bound = -7.632) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 2 (approx. per word bound = -7.535, relative change = 1.263e-02) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 3 (approx. per word bound = -7.510, relative change = 3.333e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 4 (approx. per word bound = -7.502, relative change = 1.045e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 5 (approx. per word bound = -7.499, relative change = 4.989e-04) \nTopic 1: oper, build, manag, warn, organ \n Topic 2: water, caus, area, day, damag \n Topic 3: rain, evacu, person, heavi, caus \n Topic 4: locat, origin, find, local, natur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 6 (approx. per word bound = -7.497, relative change = 2.847e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 7 (approx. per word bound = -7.495, relative change = 1.872e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 8 (approx. per word bound = -7.494, relative change = 1.351e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 9 (approx. per word bound = -7.493, relative change = 1.035e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 10 (approx. per word bound = -7.493, relative change = 8.591e-05) \nTopic 1: oper, manag, build, warn, organ \n Topic 2: water, caus, area, day, build \n Topic 3: evacu, rain, person, heavi, rainfal \n Topic 4: locat, origin, find, popul, natur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 11 (approx. per word bound = -7.492, relative change = 7.525e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 12 (approx. per word bound = -7.492, relative change = 6.670e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 13 (approx. per word bound = -7.491, relative change = 6.024e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 14 (approx. per word bound = -7.491, relative change = 5.601e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 15 (approx. per word bound = -7.490, relative change = 5.244e-05) \nTopic 1: oper, manag, warn, organ, transport \n Topic 2: water, caus, area, day, build \n Topic 3: evacu, rain, person, heavi, rainfal \n Topic 4: origin, locat, popul, find, natur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 16 (approx. per word bound = -7.490, relative change = 4.867e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 17 (approx. per word bound = -7.490, relative change = 4.636e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 18 (approx. per word bound = -7.489, relative change = 4.516e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 19 (approx. per word bound = -7.489, relative change = 4.347e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 20 (approx. per word bound = -7.489, relative change = 4.049e-05) \nTopic 1: oper, manag, warn, announc, transport \n Topic 2: water, caus, area, day, build \n Topic 3: evacu, person, rain, heavi, rainfal \n Topic 4: origin, locat, popul, find, natur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 21 (approx. per word bound = -7.488, relative change = 3.752e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 22 (approx. per word bound = -7.488, relative change = 3.456e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 23 (approx. per word bound = -7.488, relative change = 3.456e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 24 (approx. per word bound = -7.488, relative change = 3.329e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 25 (approx. per word bound = -7.488, relative change = 2.907e-05) \nTopic 1: oper, manag, warn, announc, transport \n Topic 2: water, caus, area, day, build \n Topic 3: person, evacu, rain, heavi, rainfal \n Topic 4: origin, locat, popul, find, direct \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 26 (approx. per word bound = -7.487, relative change = 2.709e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 27 (approx. per word bound = -7.487, relative change = 2.583e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 28 (approx. per word bound = -7.487, relative change = 2.502e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 29 (approx. per word bound = -7.487, relative change = 2.338e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 30 (approx. per word bound = -7.487, relative change = 2.156e-05) \nTopic 1: oper, manag, warn, announc, evacu \n Topic 2: water, caus, area, day, build \n Topic 3: person, rain, evacu, heavi, rainfal \n Topic 4: origin, popul, locat, refer, direct \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 31 (approx. per word bound = -7.486, relative change = 2.033e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 32 (approx. per word bound = -7.486, relative change = 1.908e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 33 (approx. per word bound = -7.486, relative change = 1.771e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 34 (approx. per word bound = -7.486, relative change = 1.652e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 35 (approx. per word bound = -7.486, relative change = 1.584e-05) \nTopic 1: oper, manag, warn, announc, evacu \n Topic 2: water, caus, area, day, build \n Topic 3: person, rain, evacu, heavi, rainfal \n Topic 4: origin, popul, locat, refer, direct \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 36 (approx. per word bound = -7.486, relative change = 1.538e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 37 (approx. per word bound = -7.486, relative change = 1.566e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 38 (approx. per word bound = -7.486, relative change = 1.562e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 39 (approx. per word bound = -7.485, relative change = 1.527e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 40 (approx. per word bound = -7.485, relative change = 1.457e-05) \nTopic 1: oper, manag, warn, announc, evacu \n Topic 2: water, caus, area, day, build \n Topic 3: person, rain, evacu, heavi, rainfal \n Topic 4: origin, popul, refer, locat, direct \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 41 (approx. per word bound = -7.485, relative change = 1.334e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 42 (approx. per word bound = -7.485, relative change = 1.254e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 43 (approx. per word bound = -7.485, relative change = 1.193e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 44 (approx. per word bound = -7.485, relative change = 1.197e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 45 (approx. per word bound = -7.485, relative change = 1.211e-05) \nTopic 1: oper, manag, warn, announc, evacu \n Topic 2: water, caus, area, day, build \n Topic 3: person, rain, evacu, heavi, rainfal \n Topic 4: origin, refer, popul, locat, find \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 46 (approx. per word bound = -7.485, relative change = 1.187e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 47 (approx. per word bound = -7.485, relative change = 1.143e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 48 (approx. per word bound = -7.485, relative change = 1.114e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 49 (approx. per word bound = -7.485, relative change = 1.093e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 50 (approx. per word bound = -7.484, relative change = 1.131e-05) \nTopic 1: oper, manag, warn, evacu, announc \n Topic 2: water, caus, area, day, river \n Topic 3: person, rain, heavi, evacu, rainfal \n Topic 4: origin, refer, popul, locat, find \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 51 (approx. per word bound = -7.484, relative change = 1.165e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 52 (approx. per word bound = -7.484, relative change = 1.174e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 53 (approx. per word bound = -7.484, relative change = 1.132e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 54 (approx. per word bound = -7.484, relative change = 1.113e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 55 (approx. per word bound = -7.484, relative change = 1.113e-05) \nTopic 1: oper, manag, warn, evacu, announc \n Topic 2: water, caus, area, day, river \n Topic 3: person, rain, heavi, evacu, rainfal \n Topic 4: origin, refer, popul, locat, find \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 56 (approx. per word bound = -7.484, relative change = 1.151e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 57 (approx. per word bound = -7.484, relative change = 1.227e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 58 (approx. per word bound = -7.484, relative change = 1.299e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 59 (approx. per word bound = -7.484, relative change = 1.393e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 60 (approx. per word bound = -7.484, relative change = 1.405e-05) \nTopic 1: oper, manag, warn, evacu, announc \n Topic 2: water, caus, area, day, river \n Topic 3: person, rain, heavi, evacu, affect \n Topic 4: origin, refer, popul, locat, find \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 61 (approx. per word bound = -7.483, relative change = 1.284e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 62 (approx. per word bound = -7.483, relative change = 1.154e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 63 (approx. per word bound = -7.483, relative change = 1.093e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 64 (approx. per word bound = -7.483, relative change = 1.072e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 65 (approx. per word bound = -7.483, relative change = 1.087e-05) \nTopic 1: oper, manag, warn, evacu, announc \n Topic 2: water, caus, area, day, river \n Topic 3: person, rain, heavi, evacu, affect \n Topic 4: origin, refer, locat, popul, sourc \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 66 (approx. per word bound = -7.483, relative change = 1.116e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 67 (approx. per word bound = -7.483, relative change = 1.045e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nModel Converged \nBeginning Spectral Initialization \n     Calculating the gram matrix...\n     Finding anchor words...\n    .....\n     Recovering initialization...\n    ............................................................\nInitialization complete.\n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 1 (approx. per word bound = -7.632) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 2 (approx. per word bound = -7.528, relative change = 1.361e-02) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 3 (approx. per word bound = -7.498, relative change = 3.895e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 4 (approx. per word bound = -7.488, relative change = 1.444e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 5 (approx. per word bound = -7.482, relative change = 7.917e-04) \nTopic 1: oper, build, manag, prevent, donat \n Topic 2: caus, water, day, occur, area \n Topic 3: person, rain, evacu, heavi, affect \n Topic 4: origin, locat, oper, manag, direct \n Topic 5: build, area, water, river, caus \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 6 (approx. per word bound = -7.478, relative change = 5.354e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 7 (approx. per word bound = -7.475, relative change = 3.981e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 8 (approx. per word bound = -7.472, relative change = 3.160e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 9 (approx. per word bound = -7.470, relative change = 2.588e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 10 (approx. per word bound = -7.469, relative change = 2.135e-04) \nTopic 1: oper, manag, donat, inform, organ \n Topic 2: caus, water, occur, day, area \n Topic 3: person, rain, evacu, heavi, affect \n Topic 4: origin, locat, popul, establish, find \n Topic 5: build, area, water, caus, river \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 11 (approx. per word bound = -7.467, relative change = 1.778e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 12 (approx. per word bound = -7.466, relative change = 1.491e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 13 (approx. per word bound = -7.465, relative change = 1.296e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 14 (approx. per word bound = -7.465, relative change = 1.177e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 15 (approx. per word bound = -7.464, relative change = 1.106e-04) \nTopic 1: oper, donat, manag, inform, assist \n Topic 2: caus, water, day, occur, area \n Topic 3: person, rain, affect, heavi, evacu \n Topic 4: origin, locat, popul, find, establish \n Topic 5: build, area, water, caus, day \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 16 (approx. per word bound = -7.463, relative change = 9.758e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 17 (approx. per word bound = -7.462, relative change = 8.727e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 18 (approx. per word bound = -7.462, relative change = 7.953e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 19 (approx. per word bound = -7.461, relative change = 7.130e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 20 (approx. per word bound = -7.461, relative change = 6.344e-05) \nTopic 1: oper, donat, inform, manag, assist \n Topic 2: caus, water, day, area, occur \n Topic 3: person, rain, affect, heavi, evacu \n Topic 4: origin, locat, popul, find, direct \n Topic 5: build, area, water, caus, rain \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 21 (approx. per word bound = -7.460, relative change = 5.569e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 22 (approx. per word bound = -7.460, relative change = 4.992e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 23 (approx. per word bound = -7.460, relative change = 4.582e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 24 (approx. per word bound = -7.459, relative change = 3.876e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 25 (approx. per word bound = -7.459, relative change = 3.265e-05) \nTopic 1: oper, donat, inform, assist, manag \n Topic 2: water, caus, day, area, occur \n Topic 3: person, rain, affect, heavi, caus \n Topic 4: origin, locat, popul, find, direct \n Topic 5: area, build, rain, caus, water \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 26 (approx. per word bound = -7.459, relative change = 3.036e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 27 (approx. per word bound = -7.459, relative change = 2.920e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 28 (approx. per word bound = -7.458, relative change = 2.839e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 29 (approx. per word bound = -7.458, relative change = 2.733e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 30 (approx. per word bound = -7.458, relative change = 2.578e-05) \nTopic 1: oper, donat, inform, assist, manag \n Topic 2: water, caus, area, day, occur \n Topic 3: person, rain, affect, heavi, caus \n Topic 4: origin, locat, find, popul, direct \n Topic 5: area, rain, caus, build, day \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 31 (approx. per word bound = -7.458, relative change = 2.396e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 32 (approx. per word bound = -7.458, relative change = 2.298e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 33 (approx. per word bound = -7.457, relative change = 2.236e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 34 (approx. per word bound = -7.457, relative change = 2.165e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 35 (approx. per word bound = -7.457, relative change = 2.115e-05) \nTopic 1: oper, donat, inform, assist, manag \n Topic 2: water, caus, area, day, larg \n Topic 3: person, rain, affect, heavi, caus \n Topic 4: origin, locat, find, direct, refer \n Topic 5: area, rain, caus, day, water \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 36 (approx. per word bound = -7.457, relative change = 2.178e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 37 (approx. per word bound = -7.457, relative change = 1.965e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 38 (approx. per word bound = -7.457, relative change = 1.760e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 39 (approx. per word bound = -7.457, relative change = 1.699e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 40 (approx. per word bound = -7.456, relative change = 1.737e-05) \nTopic 1: oper, inform, donat, assist, manag \n Topic 2: water, caus, area, day, larg \n Topic 3: person, rain, affect, heavi, caus \n Topic 4: origin, locat, find, refer, direct \n Topic 5: rain, area, caus, day, water \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 41 (approx. per word bound = -7.456, relative change = 1.588e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 42 (approx. per word bound = -7.456, relative change = 1.457e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 43 (approx. per word bound = -7.456, relative change = 1.331e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 44 (approx. per word bound = -7.456, relative change = 1.206e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 45 (approx. per word bound = -7.456, relative change = 1.195e-05) \nTopic 1: oper, inform, assist, donat, manag \n Topic 2: water, caus, area, day, larg \n Topic 3: person, rain, affect, heavi, caus \n Topic 4: origin, locat, find, refer, deposit \n Topic 5: rain, area, caus, day, water \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 46 (approx. per word bound = -7.456, relative change = 1.199e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 47 (approx. per word bound = -7.456, relative change = 1.190e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 48 (approx. per word bound = -7.456, relative change = 1.073e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nModel Converged \nBeginning Spectral Initialization \n     Calculating the gram matrix...\n     Finding anchor words...\n    ......\n     Recovering initialization...\n    ............................................................\nInitialization complete.\n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 1 (approx. per word bound = -7.630) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 2 (approx. per word bound = -7.517, relative change = 1.484e-02) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 3 (approx. per word bound = -7.483, relative change = 4.493e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 4 (approx. per word bound = -7.471, relative change = 1.651e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 5 (approx. per word bound = -7.464, relative change = 9.239e-04) \nTopic 1: oper, build, manag, inform, donat \n Topic 2: occur, day, water, caus, area \n Topic 3: evacu, person, rainfal, heavi, rain \n Topic 4: origin, locat, oper, manag, activ \n Topic 5: caus, area, water, river, rain \n Topic 6: protect, warn, evacu, build, close \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 6 (approx. per word bound = -7.459, relative change = 6.176e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 7 (approx. per word bound = -7.456, relative change = 4.529e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 8 (approx. per word bound = -7.453, relative change = 3.577e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 9 (approx. per word bound = -7.451, relative change = 2.848e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 10 (approx. per word bound = -7.449, relative change = 2.307e-04) \nTopic 1: oper, inform, donat, manag, organ \n Topic 2: water, caus, occur, day, area \n Topic 3: person, evacu, heavi, affect, rain \n Topic 4: origin, locat, popul, establish, oper \n Topic 5: area, caus, water, rain, river \n Topic 6: warn, evacu, protect, pressur, oper \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 11 (approx. per word bound = -7.448, relative change = 1.933e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 12 (approx. per word bound = -7.447, relative change = 1.713e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 13 (approx. per word bound = -7.446, relative change = 1.510e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 14 (approx. per word bound = -7.445, relative change = 1.285e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 15 (approx. per word bound = -7.444, relative change = 1.097e-04) \nTopic 1: oper, inform, donat, organ, manag \n Topic 2: caus, water, day, occur, area \n Topic 3: person, evacu, affect, heavi, displac \n Topic 4: origin, popul, locat, direct, develop \n Topic 5: area, caus, water, rain, river \n Topic 6: warn, evacu, weather, oper, pressur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 16 (approx. per word bound = -7.443, relative change = 9.409e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 17 (approx. per word bound = -7.443, relative change = 8.305e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 18 (approx. per word bound = -7.442, relative change = 7.352e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 19 (approx. per word bound = -7.442, relative change = 6.410e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 20 (approx. per word bound = -7.441, relative change = 5.671e-05) \nTopic 1: oper, inform, donat, assist, organ \n Topic 2: water, caus, day, occur, area \n Topic 3: person, displac, evacu, affect, heavi \n Topic 4: origin, direct, popul, find, develop \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, weather, oper, north \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 21 (approx. per word bound = -7.441, relative change = 5.065e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 22 (approx. per word bound = -7.440, relative change = 4.691e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 23 (approx. per word bound = -7.440, relative change = 4.550e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 24 (approx. per word bound = -7.440, relative change = 4.294e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 25 (approx. per word bound = -7.439, relative change = 3.942e-05) \nTopic 1: oper, inform, assist, donat, organ \n Topic 2: water, caus, day, occur, area \n Topic 3: person, displac, kill, affect, heavi \n Topic 4: origin, direct, find, develop, deposit \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, weather, oper, north \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 26 (approx. per word bound = -7.439, relative change = 3.763e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 27 (approx. per word bound = -7.439, relative change = 3.653e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 28 (approx. per word bound = -7.439, relative change = 3.692e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 29 (approx. per word bound = -7.438, relative change = 3.685e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 30 (approx. per word bound = -7.438, relative change = 3.515e-05) \nTopic 1: oper, inform, assist, donat, organ \n Topic 2: water, caus, day, occur, larg \n Topic 3: person, displac, kill, affect, heavi \n Topic 4: origin, direct, find, refer, deposit \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, north, weather, close \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 31 (approx. per word bound = -7.438, relative change = 3.172e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 32 (approx. per word bound = -7.438, relative change = 2.835e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 33 (approx. per word bound = -7.437, relative change = 2.629e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 34 (approx. per word bound = -7.437, relative change = 2.589e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 35 (approx. per word bound = -7.437, relative change = 2.698e-05) \nTopic 1: oper, assist, inform, organ, donat \n Topic 2: water, day, caus, larg, storm \n Topic 3: person, displac, kill, affect, heavi \n Topic 4: origin, direct, refer, find, deposit \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, north, close, weather \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 36 (approx. per word bound = -7.437, relative change = 2.792e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 37 (approx. per word bound = -7.437, relative change = 2.551e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 38 (approx. per word bound = -7.436, relative change = 2.210e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 39 (approx. per word bound = -7.436, relative change = 2.008e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 40 (approx. per word bound = -7.436, relative change = 1.925e-05) \nTopic 1: oper, assist, inform, organ, donat \n Topic 2: water, day, caus, storm, larg \n Topic 3: person, displac, kill, affect, heavi \n Topic 4: origin, direct, refer, find, deposit \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, north, close, move \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 41 (approx. per word bound = -7.436, relative change = 1.836e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 42 (approx. per word bound = -7.436, relative change = 1.739e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 43 (approx. per word bound = -7.436, relative change = 1.613e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 44 (approx. per word bound = -7.436, relative change = 1.482e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 45 (approx. per word bound = -7.436, relative change = 1.355e-05) \nTopic 1: oper, assist, inform, organ, donat \n Topic 2: water, day, caus, storm, dike \n Topic 3: person, kill, displac, affect, heavi \n Topic 4: origin, direct, refer, deposit, find \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, north, close, move \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 46 (approx. per word bound = -7.435, relative change = 1.274e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 47 (approx. per word bound = -7.435, relative change = 1.217e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 48 (approx. per word bound = -7.435, relative change = 1.267e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 49 (approx. per word bound = -7.435, relative change = 1.316e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 50 (approx. per word bound = -7.435, relative change = 1.327e-05) \nTopic 1: oper, assist, inform, organ, manag \n Topic 2: water, day, caus, storm, dike \n Topic 3: person, kill, displac, affect, heavi \n Topic 4: origin, direct, refer, deposit, find \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, north, close, move \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 51 (approx. per word bound = -7.435, relative change = 1.363e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 52 (approx. per word bound = -7.435, relative change = 1.332e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 53 (approx. per word bound = -7.435, relative change = 1.257e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 54 (approx. per word bound = -7.435, relative change = 1.155e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 55 (approx. per word bound = -7.435, relative change = 1.182e-05) \nTopic 1: oper, assist, organ, inform, manag \n Topic 2: water, day, storm, caus, dike \n Topic 3: person, kill, displac, affect, heavi \n Topic 4: origin, refer, direct, deposit, find \n Topic 5: area, caus, rain, water, river \n Topic 6: warn, evacu, north, close, move \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 56 (approx. per word bound = -7.435, relative change = 1.205e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 57 (approx. per word bound = -7.434, relative change = 1.169e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nModel Converged \nBeginning Spectral Initialization \n     Calculating the gram matrix...\n     Finding anchor words...\n    .......\n     Recovering initialization...\n    ............................................................\nInitialization complete.\n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 1 (approx. per word bound = -7.629) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 2 (approx. per word bound = -7.507, relative change = 1.605e-02) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 3 (approx. per word bound = -7.468, relative change = 5.129e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 4 (approx. per word bound = -7.457, relative change = 1.565e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 5 (approx. per word bound = -7.450, relative change = 8.501e-04) \nTopic 1: oper, build, inform, manag, organ \n Topic 2: day, water, occur, caus, area \n Topic 3: evacu, rainfal, person, heavi, rain \n Topic 4: origin, locat, oper, activ, natur \n Topic 5: caus, area, rain, water, river \n Topic 6: protect, build, time, day, measur \n Topic 7: assist, manag, oper, develop, donat \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 6 (approx. per word bound = -7.446, relative change = 6.013e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 7 (approx. per word bound = -7.442, relative change = 4.727e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 8 (approx. per word bound = -7.440, relative change = 3.878e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 9 (approx. per word bound = -7.437, relative change = 3.330e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 10 (approx. per word bound = -7.435, relative change = 2.913e-04) \nTopic 1: oper, inform, build, organ, manag \n Topic 2: caus, water, day, occur, area \n Topic 3: person, evacu, displac, heavi, affect \n Topic 4: origin, locat, popul, establish, find \n Topic 5: area, rain, caus, water, river \n Topic 6: protect, warn, measur, pressur, close \n Topic 7: assist, donat, oper, manag, develop \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 11 (approx. per word bound = -7.433, relative change = 2.545e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 12 (approx. per word bound = -7.431, relative change = 2.195e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 13 (approx. per word bound = -7.430, relative change = 1.915e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 14 (approx. per word bound = -7.429, relative change = 1.676e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 15 (approx. per word bound = -7.428, relative change = 1.458e-04) \nTopic 1: oper, inform, organ, restor, build \n Topic 2: water, caus, day, area, occur \n Topic 3: displac, person, kill, affect, august \n Topic 4: origin, locat, popul, find, author \n Topic 5: rain, area, caus, water, river \n Topic 6: warn, protect, pressur, evacu, weather \n Topic 7: assist, donat, unit, oper, develop \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 16 (approx. per word bound = -7.427, relative change = 1.259e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 17 (approx. per word bound = -7.426, relative change = 1.082e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 18 (approx. per word bound = -7.425, relative change = 9.444e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 19 (approx. per word bound = -7.425, relative change = 8.666e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 20 (approx. per word bound = -7.424, relative change = 8.462e-05) \nTopic 1: oper, restor, protect, inform, organ \n Topic 2: water, caus, day, area, larg \n Topic 3: displac, person, august, kill, relief \n Topic 4: origin, locat, find, author, popul \n Topic 5: rain, area, caus, water, river \n Topic 6: warn, protect, pressur, evacu, weather \n Topic 7: assist, donat, unit, nation, oper \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 21 (approx. per word bound = -7.423, relative change = 8.634e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 22 (approx. per word bound = -7.423, relative change = 9.120e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 23 (approx. per word bound = -7.422, relative change = 9.222e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 24 (approx. per word bound = -7.421, relative change = 8.656e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 25 (approx. per word bound = -7.421, relative change = 8.004e-05) \nTopic 1: oper, restor, protect, inform, manag \n Topic 2: water, caus, day, area, larg \n Topic 3: displac, august, kill, person, relief \n Topic 4: origin, locat, find, author, direct \n Topic 5: rain, area, caus, water, river \n Topic 6: warn, protect, evacu, pressur, weather \n Topic 7: assist, donat, nation, unit, develop \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 26 (approx. per word bound = -7.420, relative change = 7.365e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 27 (approx. per word bound = -7.420, relative change = 6.902e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 28 (approx. per word bound = -7.419, relative change = 6.566e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 29 (approx. per word bound = -7.419, relative change = 6.265e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 30 (approx. per word bound = -7.418, relative change = 5.721e-05) \nTopic 1: oper, restor, protect, manag, inform \n Topic 2: water, caus, day, area, larg \n Topic 3: august, displac, kill, relief, person \n Topic 4: origin, locat, find, refer, direct \n Topic 5: rain, area, caus, water, damag \n Topic 6: warn, protect, evacu, move, weather \n Topic 7: assist, nation, donat, unit, develop \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 31 (approx. per word bound = -7.418, relative change = 5.227e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 32 (approx. per word bound = -7.418, relative change = 4.860e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 33 (approx. per word bound = -7.417, relative change = 4.692e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 34 (approx. per word bound = -7.417, relative change = 4.571e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 35 (approx. per word bound = -7.417, relative change = 4.323e-05) \nTopic 1: oper, restor, protect, manag, inform \n Topic 2: water, caus, day, area, larg \n Topic 3: august, displac, kill, relief, hectar \n Topic 4: origin, locat, find, refer, direct \n Topic 5: rain, area, caus, water, person \n Topic 6: warn, evacu, protect, counti, move \n Topic 7: assist, nation, donat, unit, develop \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 36 (approx. per word bound = -7.416, relative change = 4.152e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 37 (approx. per word bound = -7.416, relative change = 3.853e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 38 (approx. per word bound = -7.416, relative change = 3.562e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 39 (approx. per word bound = -7.415, relative change = 3.621e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 40 (approx. per word bound = -7.415, relative change = 3.542e-05) \nTopic 1: oper, protect, restor, manag, inform \n Topic 2: water, caus, day, area, larg \n Topic 3: august, displac, hectar, kill, relief \n Topic 4: origin, find, locat, refer, direct \n Topic 5: rain, area, caus, water, person \n Topic 6: warn, evacu, protect, counti, move \n Topic 7: assist, nation, donat, unit, oper \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 41 (approx. per word bound = -7.415, relative change = 3.391e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 42 (approx. per word bound = -7.415, relative change = 3.270e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 43 (approx. per word bound = -7.414, relative change = 3.180e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 44 (approx. per word bound = -7.414, relative change = 3.073e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 45 (approx. per word bound = -7.414, relative change = 2.948e-05) \nTopic 1: oper, protect, restor, manag, inform \n Topic 2: water, day, caus, larg, area \n Topic 3: august, hectar, china, displac, provinc \n Topic 4: origin, find, locat, refer, direct \n Topic 5: rain, area, caus, person, water \n Topic 6: warn, evacu, protect, counti, move \n Topic 7: assist, nation, donat, unit, oper \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 46 (approx. per word bound = -7.414, relative change = 2.919e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 47 (approx. per word bound = -7.414, relative change = 2.914e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 48 (approx. per word bound = -7.413, relative change = 2.893e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 49 (approx. per word bound = -7.413, relative change = 2.897e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 50 (approx. per word bound = -7.413, relative change = 2.743e-05) \nTopic 1: oper, protect, restor, manag, prevent \n Topic 2: water, day, caus, larg, area \n Topic 3: august, china, hectar, displac, provinc \n Topic 4: origin, find, refer, locat, direct \n Topic 5: rain, caus, area, person, water \n Topic 6: warn, evacu, counti, protect, move \n Topic 7: assist, nation, donat, unit, provid \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 51 (approx. per word bound = -7.413, relative change = 2.459e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 52 (approx. per word bound = -7.413, relative change = 2.324e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 53 (approx. per word bound = -7.412, relative change = 2.378e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 54 (approx. per word bound = -7.412, relative change = 2.414e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 55 (approx. per word bound = -7.412, relative change = 2.438e-05) \nTopic 1: oper, protect, manag, restor, prevent \n Topic 2: water, day, caus, larg, area \n Topic 3: august, china, hectar, typhoon, provinc \n Topic 4: origin, find, refer, locat, deposit \n Topic 5: rain, caus, area, person, water \n Topic 6: warn, evacu, counti, protect, unit \n Topic 7: assist, nation, donat, unit, provid \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 56 (approx. per word bound = -7.412, relative change = 2.403e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 57 (approx. per word bound = -7.412, relative change = 2.383e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 58 (approx. per word bound = -7.411, relative change = 2.188e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 59 (approx. per word bound = -7.411, relative change = 1.983e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 60 (approx. per word bound = -7.411, relative change = 1.821e-05) \nTopic 1: oper, protect, manag, restor, prevent \n Topic 2: water, day, caus, larg, area \n Topic 3: china, august, hectar, typhoon, casualti \n Topic 4: origin, find, refer, locat, deposit \n Topic 5: rain, caus, area, person, water \n Topic 6: warn, evacu, counti, unit, move \n Topic 7: assist, nation, donat, provid, unit \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 61 (approx. per word bound = -7.411, relative change = 1.995e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 62 (approx. per word bound = -7.411, relative change = 2.243e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 63 (approx. per word bound = -7.411, relative change = 1.887e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 64 (approx. per word bound = -7.411, relative change = 1.550e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 65 (approx. per word bound = -7.411, relative change = 1.513e-05) \nTopic 1: oper, protect, manag, prevent, restor \n Topic 2: water, day, caus, larg, area \n Topic 3: china, august, hectar, typhoon, casualti \n Topic 4: origin, find, refer, locat, deposit \n Topic 5: rain, caus, area, person, water \n Topic 6: warn, evacu, counti, unit, move \n Topic 7: assist, nation, donat, provid, unit \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 66 (approx. per word bound = -7.410, relative change = 1.422e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 67 (approx. per word bound = -7.410, relative change = 1.440e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 68 (approx. per word bound = -7.410, relative change = 1.370e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 69 (approx. per word bound = -7.410, relative change = 1.141e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 70 (approx. per word bound = -7.410, relative change = 1.137e-05) \nTopic 1: oper, protect, manag, prevent, restor \n Topic 2: water, day, caus, larg, area \n Topic 3: china, hectar, august, typhoon, casualti \n Topic 4: origin, find, refer, locat, deposit \n Topic 5: rain, caus, area, person, water \n Topic 6: warn, evacu, counti, unit, move \n Topic 7: assist, nation, donat, provid, unit \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 71 (approx. per word bound = -7.410, relative change = 1.112e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 72 (approx. per word bound = -7.410, relative change = 1.151e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 73 (approx. per word bound = -7.410, relative change = 1.189e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 74 (approx. per word bound = -7.410, relative change = 1.147e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 75 (approx. per word bound = -7.410, relative change = 1.133e-05) \nTopic 1: oper, manag, prevent, protect, restor \n Topic 2: water, day, caus, larg, area \n Topic 3: china, hectar, typhoon, august, casualti \n Topic 4: origin, refer, find, locat, deposit \n Topic 5: rain, caus, area, person, water \n Topic 6: warn, evacu, counti, unit, move \n Topic 7: assist, nation, donat, food, provid \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 76 (approx. per word bound = -7.410, relative change = 1.129e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 77 (approx. per word bound = -7.409, relative change = 1.002e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nModel Converged \nBeginning Spectral Initialization \n     Calculating the gram matrix...\n     Finding anchor words...\n    ........\n     Recovering initialization...\n    ............................................................\nInitialization complete.\n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 1 (approx. per word bound = -7.629) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 2 (approx. per word bound = -7.500, relative change = 1.680e-02) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 3 (approx. per word bound = -7.459, relative change = 5.576e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 4 (approx. per word bound = -7.446, relative change = 1.714e-03) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 5 (approx. per word bound = -7.439, relative change = 9.095e-04) \nTopic 1: build, oper, manag, prevent, protect \n Topic 2: occur, area, water, caus, day \n Topic 3: evacu, rainfal, heavi, rain, person \n Topic 4: origin, oper, activ, locat, accumul \n Topic 5: caus, area, person, rain, water \n Topic 6: build, day, break, time, water \n Topic 7: assist, oper, manag, develop, donat \n Topic 8: caus, day, north, storm, water \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 6 (approx. per word bound = -7.434, relative change = 6.241e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 7 (approx. per word bound = -7.431, relative change = 4.950e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 8 (approx. per word bound = -7.428, relative change = 4.245e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 9 (approx. per word bound = -7.425, relative change = 3.888e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 10 (approx. per word bound = -7.422, relative change = 3.546e-04) \nTopic 1: oper, build, manag, protect, inform \n Topic 2: water, area, caus, occur, river \n Topic 3: evacu, rainfal, heavi, south, rain \n Topic 4: origin, oper, activ, accumul, establish \n Topic 5: person, rain, area, caus, damag \n Topic 6: build, foot, unit, counti, day \n Topic 7: assist, oper, donat, manag, develop \n Topic 8: island, caus, protect, day, high \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 11 (approx. per word bound = -7.420, relative change = 3.250e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 12 (approx. per word bound = -7.418, relative change = 2.936e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 13 (approx. per word bound = -7.416, relative change = 2.633e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 14 (approx. per word bound = -7.414, relative change = 2.461e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 15 (approx. per word bound = -7.412, relative change = 2.381e-04) \nTopic 1: oper, protect, build, manag, organ \n Topic 2: water, caus, area, river, day \n Topic 3: august, reservoir, hectar, evacu, displac \n Topic 4: origin, establish, activ, popul, oper \n Topic 5: person, rain, area, caus, evacu \n Topic 6: foot, build, unit, counti, inch \n Topic 7: assist, oper, donat, product, unit \n Topic 8: island, protect, measur, high, level \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 16 (approx. per word bound = -7.410, relative change = 2.276e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 17 (approx. per word bound = -7.409, relative change = 2.077e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 18 (approx. per word bound = -7.407, relative change = 1.749e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 19 (approx. per word bound = -7.406, relative change = 1.481e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 20 (approx. per word bound = -7.405, relative change = 1.290e-04) \nTopic 1: oper, build, protect, manag, restor \n Topic 2: water, caus, area, river, day \n Topic 3: reservoir, august, hectar, annual, displac \n Topic 4: origin, establish, generat, popul, activ \n Topic 5: person, rain, caus, area, evacu \n Topic 6: foot, unit, build, inch, counti \n Topic 7: assist, donat, oper, product, distribut \n Topic 8: island, protect, measur, pressur, strong \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 21 (approx. per word bound = -7.405, relative change = 1.131e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 22 (approx. per word bound = -7.404, relative change = 1.029e-04) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 23 (approx. per word bound = -7.403, relative change = 9.569e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 24 (approx. per word bound = -7.402, relative change = 8.970e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 25 (approx. per word bound = -7.402, relative change = 8.461e-05) \nTopic 1: oper, build, protect, manag, restor \n Topic 2: water, caus, area, river, day \n Topic 3: reservoir, august, hectar, china, annual \n Topic 4: origin, establish, develop, generat, human \n Topic 5: person, rain, caus, area, evacu \n Topic 6: foot, unit, build, inch, counti \n Topic 7: assist, donat, oper, product, distribut \n Topic 8: island, protect, measur, wind, pressur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 26 (approx. per word bound = -7.401, relative change = 7.894e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 27 (approx. per word bound = -7.401, relative change = 7.311e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 28 (approx. per word bound = -7.400, relative change = 6.587e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 29 (approx. per word bound = -7.400, relative change = 6.167e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 30 (approx. per word bound = -7.399, relative change = 5.854e-05) \nTopic 1: oper, protect, build, manag, prevent \n Topic 2: water, caus, area, river, day \n Topic 3: reservoir, august, china, typhoon, hectar \n Topic 4: origin, develop, establish, human, find \n Topic 5: person, rain, caus, area, evacu \n Topic 6: foot, unit, build, evacu, inch \n Topic 7: assist, donat, product, oper, unit \n Topic 8: island, protect, measur, wind, pressur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 31 (approx. per word bound = -7.399, relative change = 5.631e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 32 (approx. per word bound = -7.399, relative change = 5.137e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 33 (approx. per word bound = -7.398, relative change = 4.565e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 34 (approx. per word bound = -7.398, relative change = 4.397e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 35 (approx. per word bound = -7.398, relative change = 4.291e-05) \nTopic 1: oper, protect, build, manag, evacu \n Topic 2: water, caus, area, river, day \n Topic 3: reservoir, china, typhoon, august, annual \n Topic 4: origin, develop, human, find, establish \n Topic 5: person, rain, caus, area, evacu \n Topic 6: foot, evacu, unit, build, inch \n Topic 7: assist, donat, product, unit, oper \n Topic 8: island, protect, wind, measur, sea \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 36 (approx. per word bound = -7.397, relative change = 4.038e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 37 (approx. per word bound = -7.397, relative change = 3.741e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 38 (approx. per word bound = -7.397, relative change = 3.590e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 39 (approx. per word bound = -7.396, relative change = 3.462e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 40 (approx. per word bound = -7.396, relative change = 3.442e-05) \nTopic 1: oper, protect, build, manag, evacu \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, reservoir, august, rainstorm \n Topic 4: origin, human, develop, find, direct \n Topic 5: person, rain, caus, area, affect \n Topic 6: foot, evacu, unit, build, warn \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, wind, protect, measur, sea \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 41 (approx. per word bound = -7.396, relative change = 3.339e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 42 (approx. per word bound = -7.396, relative change = 3.058e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 43 (approx. per word bound = -7.395, relative change = 2.906e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 44 (approx. per word bound = -7.395, relative change = 2.819e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 45 (approx. per word bound = -7.395, relative change = 2.698e-05) \nTopic 1: oper, protect, manag, evacu, build \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, reservoir, august, rainstorm \n Topic 4: origin, human, find, develop, direct \n Topic 5: person, rain, caus, area, affect \n Topic 6: foot, evacu, unit, warn, build \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, wind, protect, sea, measur \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 46 (approx. per word bound = -7.395, relative change = 2.619e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 47 (approx. per word bound = -7.395, relative change = 2.708e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 48 (approx. per word bound = -7.394, relative change = 2.896e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 49 (approx. per word bound = -7.394, relative change = 2.577e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 50 (approx. per word bound = -7.394, relative change = 2.270e-05) \nTopic 1: oper, manag, evacu, protect, municip \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, rainstorm, august, reservoir \n Topic 4: origin, find, human, develop, direct \n Topic 5: person, rain, caus, affect, area \n Topic 6: evacu, foot, unit, warn, state \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, wind, protect, sea, tide \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 51 (approx. per word bound = -7.394, relative change = 2.067e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 52 (approx. per word bound = -7.394, relative change = 1.873e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 53 (approx. per word bound = -7.394, relative change = 2.227e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 54 (approx. per word bound = -7.394, relative change = 2.008e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 55 (approx. per word bound = -7.393, relative change = 1.947e-05) \nTopic 1: oper, evacu, manag, municip, protect \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, rainstorm, august, reservoir \n Topic 4: origin, find, human, develop, refer \n Topic 5: person, rain, caus, affect, area \n Topic 6: evacu, foot, warn, state, unit \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, wind, protect, tide, sea \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 56 (approx. per word bound = -7.393, relative change = 1.966e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 57 (approx. per word bound = -7.393, relative change = 1.945e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 58 (approx. per word bound = -7.393, relative change = 1.960e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 59 (approx. per word bound = -7.393, relative change = 1.946e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 60 (approx. per word bound = -7.393, relative change = 1.864e-05) \nTopic 1: oper, municip, evacu, manag, protect \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, rainstorm, august, line \n Topic 4: origin, find, human, develop, refer \n Topic 5: person, rain, caus, affect, area \n Topic 6: evacu, foot, state, warn, unit \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, wind, tide, sea, protect \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 61 (approx. per word bound = -7.393, relative change = 1.710e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 62 (approx. per word bound = -7.392, relative change = 1.623e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 63 (approx. per word bound = -7.392, relative change = 1.519e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 64 (approx. per word bound = -7.392, relative change = 1.471e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 65 (approx. per word bound = -7.392, relative change = 1.317e-05) \nTopic 1: oper, municip, evacu, manag, protect \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, rainstorm, august, annual \n Topic 4: origin, find, human, develop, refer \n Topic 5: person, rain, caus, affect, area \n Topic 6: evacu, foot, state, warn, unit \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, wind, tide, sea, protect \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 66 (approx. per word bound = -7.392, relative change = 1.290e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 67 (approx. per word bound = -7.392, relative change = 1.361e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 68 (approx. per word bound = -7.392, relative change = 1.286e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 69 (approx. per word bound = -7.392, relative change = 1.199e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 70 (approx. per word bound = -7.392, relative change = 1.185e-05) \nTopic 1: oper, municip, evacu, manag, protect \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, rainstorm, august, annual \n Topic 4: origin, find, human, refer, develop \n Topic 5: person, rain, affect, caus, area \n Topic 6: evacu, foot, warn, state, resid \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, tide, wind, sea, protect \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 71 (approx. per word bound = -7.392, relative change = 1.450e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 72 (approx. per word bound = -7.391, relative change = 1.327e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 73 (approx. per word bound = -7.391, relative change = 1.161e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 74 (approx. per word bound = -7.391, relative change = 1.102e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 75 (approx. per word bound = -7.391, relative change = 1.060e-05) \nTopic 1: oper, municip, evacu, manag, protect \n Topic 2: water, caus, area, river, day \n Topic 3: china, typhoon, rainstorm, august, annual \n Topic 4: origin, find, human, refer, develop \n Topic 5: person, rain, affect, caus, area \n Topic 6: evacu, warn, state, foot, resid \n Topic 7: assist, donat, product, unit, distribut \n Topic 8: island, tide, wind, sea, protect \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 76 (approx. per word bound = -7.391, relative change = 1.056e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nCompleting Iteration 77 (approx. per word bound = -7.391, relative change = 1.046e-05) \n.......................................................................................................\nCompleted E-Step (0 seconds). \nCompleted M-Step. \nModel Converged \n\n\nCode\nkresult=readRDS(\"data/kresult.RDS\")\nplot(kresult)"
  },
  {
    "objectID": "5_join_data.html",
    "href": "5_join_data.html",
    "title": "Wikidata Map",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nwd_events=readRDS(\"data/wd_events.RDS\")\nflood_class=readRDS(\"data/wp_pages_class.RDS\") %&gt;% \n  select(flood,class,class_name,color,n,spec) %&gt;% \n  group_by(flood) %&gt;% \n  slice_max(spec,n=1) %&gt;% \n  ungroup()\nwm_full=readRDS(\"data/wm_full.RDS\")\nwp_20_words_per_event=readRDS(\"data/wp_20_words_per_event.RDS\")\nwp_words_spec=readRDS(\"data/wp_words_spec.RDS\")\nwm_full=wm_full %&gt;% \n  left_join(wp_20_words_per_event %&gt;% select(flood,words),\n            by=\"flood\") %&gt;% \n  left_join(wp_words_spec %&gt;%\n              select(flood,specific_words),by=\"flood\") %&gt;% \n  left_join(flood_class,\n            by=\"flood\") %&gt;% \n  select(-starts_with(\"what\"),\n         -starts_with(\"start\"),\n         -starts_with(\"end\"))\n\n\nWarning in left_join(., flood_class, by = \"flood\"): Detected an unexpected many-to-many relationship between `x` and `y`.\nℹ Row 933 of `x` matches multiple rows in `y`.\nℹ Row 207 of `y` matches multiple rows in `x`.\nℹ If a many-to-many relationship is expected, set `relationship =\n  \"many-to-many\"` to silence this warning."
  },
  {
    "objectID": "5_join_data.html#data-from-the-dartmouth-flood-observatory",
    "href": "5_join_data.html#data-from-the-dartmouth-flood-observatory",
    "title": "Wikidata Map",
    "section": "Data from the Dartmouth Flood Observatory",
    "text": "Data from the Dartmouth Flood Observatory\n\n\nCode\navdate=function(date1,date2){\n  date1=as.numeric(date1)\n  date2=as.numeric(date2)\n  result=as.Date(mean(c(date1,date2)))\n  return(result)\n}\n\n\n\n\nCode\ndfo_raw=readr::read_csv(\"data/FloodArchive.csv\",\n    locale = locale(decimal_mark = \",\"))\ncolnames(dfo_raw)=c(\"index\",\"GlideNumber\",\"dfo_country\",\"dfo_other_country\",\n           \"dfo_centroid_x\",\"dfo_centroid_y\",\"area\",\"dfo_began\",\"dfo_ended\",\n           \"validation\",\"dfo_dead\",\"displaced\",\"maincause\",\"severity\")\ndfo_raw=dfo_raw %&gt;%\n  mutate(start=lubridate::dmy(dfo_began),\n         end=lubridate::dmy(dfo_ended)) %&gt;%\n  mutate(flood=as.character(index),\n         flood_label=as.character(index),\n         country_label=dfo_country,\n         deathtoll=dfo_dead,\n         coords=paste0(\"Point(\",dfo_centroid_x,\" \",dfo_centroid_y,\")\"))\n\ndfo_comp=dfo_raw %&gt;%\n  select(flood,flood_label,country_label,start,end,deathtoll,coords) %&gt;%\n  mutate(date=purrr::map2(start,end,avdate)) %&gt;%\n  tidyr::unnest(date)%&gt;%\n  sf::st_as_sf(wkt=\"coords\") %&gt;%\n  sf::st_set_crs(4326)\nsaveRDS(dfo_comp,\"data/dfo_comp_befcorrection.RDS\")\nsource(\"scripts/correct_dfo_countries.R\")\ndfo_comp=readRDS(\"data/dfo_comp.RDS\")\n\n\nThis dataset documents 5129 flood events that occurred between 1985-01-01 and 2021-10-09.\n\n\nCode\nwm_comp=wm_map %&gt;%\n  select(flood,flood_label,deathtoll, date,popup) %&gt;%\n  filter(date&gt;lubridate::ymd(\"1985-01-01\") &\n         date&lt;lubridate::ymd(\"2021-12-31\")) %&gt;%\n  mutate(source=\"wd\")\nsaveRDS(wm_comp,\"data/wm_comp.RDS\")\n\n\n\n\nCode\ndfo_comp=dfo_comp %&gt;%\n   mutate(source=\"dfo\",\n          geometry=coords) %&gt;%\n   select(-coords) %&gt;%\n   mutate(popup=glue::glue(\"&lt;h1&gt;{flood_label}&lt;/h1&gt;\n                            &lt;p&gt;date: {date}&lt;/p&gt;\n                            &lt;p&gt;deathtoll:{deathtoll}&lt;/p&gt;\"))\nwm_dfo=bind_rows(wm_comp,dfo_comp)\nsaveRDS(wm_dfo,\"data/wm_dfo.RDS\")"
  },
  {
    "objectID": "5_join_data.html#basic-stats",
    "href": "5_join_data.html#basic-stats",
    "title": "Wikidata Map",
    "section": "Basic stats",
    "text": "Basic stats\nBased on the spatial and temporal data in both datasets, we try to find correspondences between the events described in Wikidata and those described in the Dartmouth Flood Observatory.\n\n\nCode\nfind_corresponding_flood=function(flood_id,tib=wm_dfo){\n  tib_sub=tib %&gt;% filter(flood==flood_id)\n  tib_dist=tib %&gt;%\n    mutate(disttime=abs(tib$date-tib_sub$date),\n           distspace=sf::st_distance(tib,tib_sub)[,1]) %&gt;%\n    mutate(disttime=as.numeric(disttime),\n           distspace=as.numeric(distspace)) %&gt;%\n    filter(flood!=flood_id) %&gt;%\n    mutate(cond1=disttime&lt;395 & distspace&lt;400000,\n           cond2=disttime&lt;395 & str_detect(country_label,tib_sub$country_label)) %&gt;%\n    filter(cond1|cond2) %&gt;%\n    select(floodcorr=flood,\n           disttime,\n           distspace,\n           sourcecorr=source,\n           country_corr=country_label,\n           deathtoll_corr=deathtoll) %&gt;%\n    sf::st_drop_geometry()\n  if(nrow(tib_dist)==0){\n    tib_dist=tibble::tibble(floodcorr=NA,\n                            disttime=NA,\n                            distspace=NA,\n                            sourcecorr=NA,\n                            countrycorr=NA,\n                            deathtollcorr=NA)\n  }else{\n    tib_dist=tib_dist %&gt;%\n    filter(disttime==min(disttime,na.rm=TRUE))\n  }\n\n  return(tib_dist)\n}\n\n\nFor each flood event defined in the WD dataset, we filter the DFO dataset to only keep the event corresponding to the minimum distance in space and time, then we consider the events concur if they occurred less than 400 days apart and 400 kms away. This is a rather loose correspondence which is explained by the sometimes low precision in the WD information corresponding to time or coordinates of occurrence (not to mention the inherent difficulty, for contributors of both datasets, of associating a flood event to a precise time and place).\n\n\nCode\nif(!file.exists(\"data/wm_dfo_corr.RDS\")){\n  wm_dfo_proj= wm_dfo %&gt;%\n    sf::st_set_crs(4326) %&gt;%\n    sf::st_transform(3857)\n  wm_dfo_corr= wm_dfo_proj%&gt;%\n    mutate(data=purrr::map(flood,\n                           find_corresponding_flood,\n                           tib=wm_dfo_proj)) %&gt;%\n    tidyr::unnest(data) %&gt;%\n    filter(source==\"wd\" & sourcecorr==\"dfo\") %&gt;%\n    sf::st_transform(4326)\n  saveRDS(wm_dfo_corr,\n        \"data/wm_dfo_corr.RDS\")\n}\nwm_dfo_corr=readRDS(\"data/wm_dfo_corr.RDS\")\n\n\nWe create lines to join events from one dataset to the other.\n\n\nCode\nwm_dfo_corr=readRDS(\"data/wm_dfo_corr.RDS\") %&gt;%\n  sf::st_drop_geometry()\njoined_events=bind_rows(\n  tibble::tibble(id=1:nrow(wm_dfo_corr),flood=wm_dfo_corr$flood),\n  tibble::tibble(id=1:nrow(wm_dfo_corr),flood=wm_dfo_corr$floodcorr)) %&gt;%\n  arrange(id)\njoined_events=wm_dfo %&gt;%\n  left_join(joined_events, by=\"flood\") %&gt;%\n  select(id)%&gt;%\n  filter(!is.na(id)) %&gt;%\n  arrange(id)%&gt;%\n  group_by(id) %&gt;%\n  summarise(m =mean(id),do_union=FALSE) %&gt;%\n  sf::st_cast(\"LINESTRING\")\njoined_events=joined_events[1:(nrow(joined_events)-1),]\nsaveRDS(joined_events,\"data/joined_events.RDS\")"
  },
  {
    "objectID": "5_join_data.html#number-of-correspondences",
    "href": "5_join_data.html#number-of-correspondences",
    "title": "Wikidata Map",
    "section": "Number of correspondences",
    "text": "Number of correspondences\n\n\nCode\nNwd_in_range=wd_events %&gt;%\n  filter(year&gt;=1985 & year&lt;=2021) %&gt;%\n  sf::st_drop_geometry() %&gt;%\n  summarise(n=length(unique(flood))) %&gt;%\n  pull(n)\n\n\nBased on the dates of observations for the DFO data base, 414 out of the 1018 flood events in our Wikidata base might fall into it.\n\n\nCode\nnb_wm=wm_comp %&gt;% group_by(flood) %&gt;% tally() %&gt;% nrow()\nnb_wm_in_dfo=wm_dfo_corr %&gt;% group_by(flood) %&gt;% tally() %&gt;% nrow()\nnb_dfo=dfo_comp %&gt;% group_by(flood) %&gt;% tally() %&gt;% nrow()\nnb_dfo_in_wd=wm_dfo_corr %&gt;% group_by(floodcorr) %&gt;% tally() %&gt;% nrow()\n\n\nOut of 387 flood events documented in the WD comparison data subset, 296 have at least one correspondence in the DFO comparison data subset (76.49%).\nOut of 5129 flood events documented in the DFO comparison data subset, 281 have at least one correspondence in the WD comparison data subset (5.48%)."
  },
  {
    "objectID": "5_join_data.html#why-are-flood-events-documented-in-wikidata",
    "href": "5_join_data.html#why-are-flood-events-documented-in-wikidata",
    "title": "Wikidata Map",
    "section": "Why are flood events documented in Wikidata",
    "text": "Why are flood events documented in Wikidata\n1st hypothesis: number of dead explains the occurrence of the event in WD. =&gt; nope, actually it’s the opposite because events are documented in rich countries in which the number of dead is lower. How to account for this effect?\n\n\nCode\n#severity\ndfo_raw %&gt;%  pull(severity) %&gt;% mean()\n\n\n[1] 1.242495\n\n\nCode\ndfo_raw %&gt;% filter(flood %in% wm_dfo_corr$floodcorr) %&gt;% pull(severity) %&gt;% mean()\n\n\n[1] 1.492883\n\n\nCode\n#deathtoll\ndfo_raw %&gt;%  pull(deathtoll) %&gt;% mean()\n\n\n[1] 134.199\n\n\nCode\ndfo_raw %&gt;% filter(flood %in% wm_dfo_corr$floodcorr) %&gt;% pull(deathtoll) %&gt;% mean()\n\n\n[1] 102.089\n\n\n\n\nCode\nmean(dfo_comp$deathtoll)\n\n\n[1] 134.2184\n\n\n\n\nCode\ntib_wd_in_dfo=wm_dfo_corr %&gt;%\n  select(country_label,flood) %&gt;%\n  unique() %&gt;%\n  group_by(country_label) %&gt;%\n  summarise(n_wd_in_dfo=n())\n\ntib_dfo=dfo_comp %&gt;%\n  mutate(country_label=stringr::str_trim(country_label)) %&gt;%\n  tidyr::separate_longer_delim(country_label, delim=\"   \") %&gt;%\n  select(country_label,flood) %&gt;%\n  unique() %&gt;%\n  group_by(country_label) %&gt;%\n  summarise(n_dfo=n())\n\ntruc=left_join(tib_dfo,tib_wd_in_dfo,by=\"country_label\") %&gt;%\n  mutate(prop=n_wd_in_dfo/n_dfo)"
  },
  {
    "objectID": "5_join_data.html#map-comparison",
    "href": "5_join_data.html#map-comparison",
    "title": "Wikidata Map",
    "section": "Map comparison",
    "text": "Map comparison\n\n\nCode\nlibrary(leaflet) \n# Définition d'une échelle colorée \n# (en fonction de date de sortie) \n# Création de la carte \npal=colorFactor(c(\"red\",\"blue\"), domain=c(\"wd\",\"dfo\"))\ncomp_map=leaflet(wm_dfo)  %&gt;%\n  addProviderTiles(providers$Esri.WorldTopoMap) %&gt;% # ajout fond de carte\n  addCircleMarkers(col=~pal(source),\n                   popup =~popup,\n                   radius =~log(deathtoll+2)\n                   )  %&gt;%\n  addPolylines(data=joined_events,color=\"green\")\n\n\n\n\nCode\ncomp_map"
  },
  {
    "objectID": "4_text_analysis.html",
    "href": "4_text_analysis.html",
    "title": "Text analysis",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(stm)\nlibrary(tidytext)\nwd_raw=readRDS(\"data/wd_raw.RDS\")\nwp_words=readRDS(\"data/wp_words.RDS\") %&gt;% \n  filter(flood %in% wd_raw$flood)\n\n\n\n\nCode\nwp_words_freq=wp_words %&gt;%\n  group_by(lemma) %&gt;% \n  tally() %&gt;% \n  arrange(desc(n)) %&gt;% \n  slice_max(n,n=30)\n\nggplot(wp_words_freq,aes(x=forcats::fct_reorder(lemma,n),\n                         y=n) )+\n  geom_col()+\n  coord_flip()+\n  labs(x=\"lemma\",y=\"frequency\")\n\n\n\n\n\n\n\nCode\ntib_sparse=wp_words %&gt;% \n  group_by(lemma) %&gt;% # compte pour chaque lemme...\n  mutate(n=n()) %&gt;% # ...son nombre d'occurrences puis\n  filter(n&gt;20) %&gt;%  # retire ceux représentés moins de 20 fois dans le corpus\n  ungroup() %&gt;% \n  cast_sparse(row=flood, column=lemma, value=n)\n\n\n\n\nCode\nif(!file.exists(\"data/topic_model.RDS\")){\nset.seed(123)\ntopic_model&lt;-stm(tib_sparse,K=6, verbose=FALSE)\nsaveRDS(topic_model,\"data/topic_model.RDS\")\n}\ntopic_model=readRDS(\"data/topic_model.RDS\")\n\n\n\n\nCode\ntermes_thematiques=tidy(topic_model, matrix=\"beta\") %&gt;% \n  group_by(topic) %&gt;% \n  slice_max(beta,n=30) %&gt;%  \n  mutate(rank=row_number()) %&gt;% \n  arrange(topic,desc(beta)) %&gt;% \n  ungroup()\ntermes_thematiques\n\n\n# A tibble: 180 × 4\n   topic term       beta  rank\n   &lt;int&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;int&gt;\n 1     1 area     0.0149     1\n 2     1 rain     0.0146     2\n 3     1 cause    0.0145     3\n 4     1 heavy    0.0138     4\n 5     1 rainfall 0.0131     5\n 6     1 record   0.0129     6\n 7     1 water    0.0129     7\n 8     1 damage   0.0125     8\n 9     1 occur    0.0117     9\n10     1 hour     0.0114    10\n# ℹ 170 more rows\n\n\n\n\nCode\ntopics=tibble::tribble(~topic,~topic_label,\n                       1,\"1) spatial range\",\n                       2,\"2) weather\",\n                       3,\"3) hydrology\",\n                       4,\"4) management\",\n                       5,\"5) historical importance\",\n                       6,\"6) human toll\")\n\ntermes_thematiques=termes_thematiques %&gt;% \n  left_join(topics,by=\"topic\")\nsaveRDS(termes_thematiques,\"data/termes_thematiques.RDS\")\n\n\n\n\nCode\ntib_gamma &lt;- tidy(topic_model, matrix = \"gamma\") %&gt;% \n  left_join(wp_words %&gt;%\n              group_by(flood) %&gt;%\n              summarise(nwords=n()) %&gt;%\n              mutate(document=1:n()),by=\"document\") %&gt;% \n  arrange(flood,desc(gamma)) %&gt;% \n  left_join(topics,by=\"topic\")\nsaveRDS(tib_gamma,\"data/tib_gamma.RDS\")\n\n\n\n\n\n\nCode\nwp_texts=wp_words %&gt;% group_by(flood,flood_label) %&gt;% summarise(text=str_c(lemma,collapse=\" \"),.groups=\"drop\")\ntemp=textProcessor(documents=wp_texts$text,\n                   metadata=wp_texts %&gt;% select(-text))\n\n\nBuilding corpus... \nConverting to Lower Case... \nRemoving punctuation... \nRemoving stopwords... \nRemoving numbers... \nStemming... \nCreating Output... \n\n\nCode\nout &lt;- prepDocuments(temp$documents, temp$vocab, temp$meta)\n\n\nRemoving 2396 of 8271 terms (2396 of 183240 tokens) due to frequency \nYour corpus now has 712 documents, 5875 terms and 180844 tokens.\n\n\n\n\nCode\nif(!file.exists(\"data/kresult.RDS\")){\n  documents &lt;- out$documents\n  vocab &lt;- out$vocab\n  meta &lt;- out$meta\n  set.seed(02138)\n  K&lt;-c(3:8)\n  kresult &lt;- searchK(documents, vocab, K, data=meta)\n  saveRDS(kresult,\"data/kresult.RDS\")\n\n}\nkresult=readRDS(\"data/kresult.RDS\")\nplot(kresult)\n\n\n\n\n\n\n\n\n\n\nCode\nwm_full=readRDS(\"data/wm_full.RDS\") %&gt;% \n  filter(flood %in% wd_raw$flood)\nwp_words2=wp_words %&gt;% \n  left_join(wm_full %&gt;% select(flood,date,country_label),by=\"flood\") %&gt;% \n  mutate(year=lubridate::year(date)) %&gt;% \n  mutate(recent=year&gt;2000) %&gt;% \n  mutate(age=case_when(recent~\"recent\",\n                          !recent~\"old\"))\n\n\nWarning in left_join(., wm_full %&gt;% select(flood, date, country_label), : Detected an unexpected many-to-many relationship between `x` and `y`.\nℹ Row 1 of `x` matches multiple rows in `y`.\nℹ Row 17402 of `y` matches multiple rows in `x`.\nℹ If a many-to-many relationship is expected, set `relationship =\n  \"many-to-many\"` to silence this warning.\n\n\nCode\nlibrary(mixr)\ntib_spec &lt;- tidy_specificities(wp_words2,cat1=lemma, cat2=country_label, min_spec=2)\nhead(tib_spec)\n\n\n# A tibble: 6 × 4\n  lemma      country_label  spec     n\n  &lt;chr&gt;      &lt;chr&gt;         &lt;dbl&gt; &lt;int&gt;\n1 avert      Austria         Inf  1242\n2 gauge      Austria         Inf  1457\n3 manner     Austria         Inf  1242\n4 ore        Austria         Inf  1377\n5 vote       Austria         Inf  1242\n6 accelerate Belgium         Inf  1056"
  },
  {
    "objectID": "4_text_analysis.html#choice-of-number-of-classes",
    "href": "4_text_analysis.html#choice-of-number-of-classes",
    "title": "Text analysis",
    "section": "",
    "text": "Code\nwp_texts=wp_words %&gt;% group_by(flood,flood_label) %&gt;% summarise(text=str_c(lemma,collapse=\" \"),.groups=\"drop\")\ntemp=textProcessor(documents=wp_texts$text,\n                   metadata=wp_texts %&gt;% select(-text))\n\n\nBuilding corpus... \nConverting to Lower Case... \nRemoving punctuation... \nRemoving stopwords... \nRemoving numbers... \nStemming... \nCreating Output... \n\n\nCode\nout &lt;- prepDocuments(temp$documents, temp$vocab, temp$meta)\n\n\nRemoving 2396 of 8271 terms (2396 of 183240 tokens) due to frequency \nYour corpus now has 712 documents, 5875 terms and 180844 tokens.\n\n\n\n\nCode\nif(!file.exists(\"data/kresult.RDS\")){\n  documents &lt;- out$documents\n  vocab &lt;- out$vocab\n  meta &lt;- out$meta\n  set.seed(02138)\n  K&lt;-c(3:8)\n  kresult &lt;- searchK(documents, vocab, K, data=meta)\n  saveRDS(kresult,\"data/kresult.RDS\")\n\n}\nkresult=readRDS(\"data/kresult.RDS\")\nplot(kresult)"
  },
  {
    "objectID": "4_text_analysis.html#specificities",
    "href": "4_text_analysis.html#specificities",
    "title": "Text analysis",
    "section": "",
    "text": "Code\nwm_full=readRDS(\"data/wm_full.RDS\") %&gt;% \n  filter(flood %in% wd_raw$flood)\nwp_words2=wp_words %&gt;% \n  left_join(wm_full %&gt;% select(flood,date,country_label),by=\"flood\") %&gt;% \n  mutate(year=lubridate::year(date)) %&gt;% \n  mutate(recent=year&gt;2000) %&gt;% \n  mutate(age=case_when(recent~\"recent\",\n                          !recent~\"old\"))\n\n\nWarning in left_join(., wm_full %&gt;% select(flood, date, country_label), : Detected an unexpected many-to-many relationship between `x` and `y`.\nℹ Row 1 of `x` matches multiple rows in `y`.\nℹ Row 17402 of `y` matches multiple rows in `x`.\nℹ If a many-to-many relationship is expected, set `relationship =\n  \"many-to-many\"` to silence this warning.\n\n\nCode\nlibrary(mixr)\ntib_spec &lt;- tidy_specificities(wp_words2,cat1=lemma, cat2=country_label, min_spec=2)\nhead(tib_spec)\n\n\n# A tibble: 6 × 4\n  lemma      country_label  spec     n\n  &lt;chr&gt;      &lt;chr&gt;         &lt;dbl&gt; &lt;int&gt;\n1 avert      Austria         Inf  1242\n2 gauge      Austria         Inf  1457\n3 manner     Austria         Inf  1242\n4 ore        Austria         Inf  1377\n5 vote       Austria         Inf  1242\n6 accelerate Belgium         Inf  1056"
  },
  {
    "objectID": "index.html#map-comparison-to-dfo",
    "href": "index.html#map-comparison-to-dfo",
    "title": "Online reports and narrations of flood events",
    "section": "Map comparison to DFO",
    "text": "Map comparison to DFO\nWe tried to find the correspondence between events documented in Wikidata and events documented in the DFO dataset. To do that, for each WD event, we searched for all events in the DFO dataset occurring less than a year and 30 days apart and less than 400 kms away OR occurring less than a year and 30 days apart and in the same country. The limit of one year and 30 days accounts for the sometimes low precision of date (e.g., year) in Wikidata.\n\n\nCode\n# library(leaflet) \n# # Définition d'une échelle colorée \n# # (en fonction de date de sortie) \n# # Création de la carte \n# joined_events=readRDS(\"data/joined_events.RDS\")\n# pal=colorFactor(c(\"red\",\"blue\"), domain=c(\"wd\",\"dfo\"))\n# comp_map=leaflet(wm_dfo)  %&gt;%\n#   addProviderTiles(providers$Esri.WorldTopoMap) %&gt;% # ajout fond de carte\n#   addCircleMarkers(col=~pal(source),\n#                    popup =~popup,\n#                    radius=3) %&gt;% \n#   addPolylines(data=joined_events,color=\"green\")\n#   \n\n\n\n\nCode\n# #| label: fig-map_comp\n# #| fig-cap: \"Comparison of events defined in DFO (red) and Wikidata/Wikipedia (blue). The attempts at finding the correspondence between a Wikidata/Wikipedia event and a corresponding one in the DFO dataset correspond to the lines.\"\n# comp_map\n\n\noui je sais ces résultats sont assez vilains pour le moment. Je vais essayer de trouver une meilleure représentation + il faudra discuter les raisons pour lesquelles il est difficile de faire une correspondance -définition des événements différent, souvent dans Wikipedia plusieurs événements sont regroupés par exemple “Inondations de telle année en Europe centrale”-)"
  },
  {
    "objectID": "index.html#wikipedia-content",
    "href": "index.html#wikipedia-content",
    "title": "Online reports and narrations of flood events",
    "section": "Wikipedia content",
    "text": "Wikipedia content\n\nNews or encyclopedia?\n\n\nCode\nflood_date_precision=readRDS(\"data/wm_full.RDS\") %&gt;% select(flood,date_precision) %&gt;% unique()\ntruc=wp_revisions %&gt;%\n  left_join(wp_pages %&gt;% select(flood,article),\n            by=\"article\") %&gt;% \n  left_join(wd_events %&gt;% select(flood,date),by=\"flood\") %&gt;%\n  left_join(flood_date_precision,by=\"flood\") %&gt;% \n  mutate(timestamp=as.POSIXct(timestamp)) %&gt;% \n  mutate(timestamp=lubridate::ymd(timestamp)) %&gt;% \n  mutate(diff=difftime(timestamp,date,units=\"days\")) %&gt;% \n  mutate(delay=as.numeric(diff)) %&gt;% \n  mutate(delay=delay/365.25) %&gt;% \n  mutate(year=lubridate::year(date)) %&gt;% \n  mutate(year=cut(year,c(-Inf,2000,2004,2008,2012,2018,2022,2024))) %&gt;% \n  mutate(delay=cut(delay,c(-Inf,0,0.125,0.25,0.5,1,2,5,10,15,25,+Inf))) %&gt;% \n  group_by(year) %&gt;% \n  mutate(ntot=n()) %&gt;% \n  ungroup() %&gt;% \n  group_by(year,delay,ntot,date_precision) %&gt;% \n  summarise(n=n(),.groups=\"drop\") %&gt;% \n  mutate(prop=n/ntot) %&gt;% \n  na.omit()\nggplot(truc ,aes(x=delay,y=prop,fill=date_precision))+\n  geom_col()+\n  facet_grid(rows=vars(year))\n\n\n\n\n\nFigure 3: Time delay (in years) between events and revisions to the Wikipedia articles documenting them. The delay might be negative (the edits about an event began before the recorded, average date for the event, hinting to an event with long duration). The color indicates the precision of the event date as stated by Wikidata (it can be accurate to the day, month or year).\n\n\n\n\nFigure 3 shows that most of the writing of Wikipedia articles related to flood events take place during the month of their occurrence (except of course when Wikipedia did not exist (before 2001) or when it was still moderately used to document current events. This highlights the fact that Wikipedia articles about recent flood events can be viewed as news rather than encyclopedic reports on past events. Conversely, one can argue that articles exhibiting a large proportion of revisions implemented a long time after the occurrence of the event could be indicative of an ongoing debate or controversy, or be the ongoing focus of some social or human interest.\n\n\nTopics\n\n\n\nCode\nres=readRDS(\"data/res_rainette_wp.RDS\")\ncorpus=readRDS(\"data/corpus.RDS\")\ndtm=readRDS(\"data/dtm.RDS\")\n\n#rainette_explor(res,dtm,corpus)\nrainette_plot(\n  res, dtm, k = 6,\n  n_terms = 20,\n  free_scales = TRUE,\n  measure = \"chi2\",\n  show_negative = FALSE,\n  text_size = 12\n)\n\n\n\n\n\n\n\nCode\ntib_classes=wp_segments %&gt;% select(class_name,color) %&gt;% unique()\ntib=wp_segments %&gt;% \n  group_by(article,class_name) %&gt;% \n  tally() %&gt;% \n  ungroup() %&gt;% \n  group_by(article) %&gt;% \n  mutate(ntot=sum(n)) %&gt;% \n  ungroup() %&gt;% \n  mutate(ntotcat=cut(ntot,breaks=quantile(ntot,seq(0,1,by=0.25)))) %&gt;% \n  group_by(ntotcat,class_name) %&gt;% \n  summarise(n=sum(n),.groups=\"drop\") %&gt;% \n  na.omit()\nggplot(tib,aes(x=class_name,y=n))+\n  geom_col(aes(fill=class_name))+\n  facet_grid(rows=vars(ntotcat),scales=\"free\")+\n  scale_fill_manual(breaks=tib_classes$class_name, values=tib_classes$color)+\n  coord_flip()+\n  theme(legend.position=\"none\")\n\n\n\n\n\nFigure 4: Topics identified by an STM process for the Wikipedia articles’ corpus\n\n\n\n\nFigure 4 shows that the length of the article is probably a very important factor in the topics addressed (or conversely, the topics addressed determine the length of the article), with shorter articles corresponding to factual statements regarding physical features of the event (weather, hydrology), and justifying reporting that event based on the damage it caused, while longer articles might convey more extensive reports on the management of the crisis (anticipation, governance, relief).\n\n\nCode\nreadRDS(\"data/wp_pages.RDS\") %&gt;% \n  group_by(local) %&gt;% \n  summarise(meanlength=mean(length,na.rm=TRUE))\n\n\n# A tibble: 2 × 2\n  local meanlength\n  &lt;lgl&gt;      &lt;dbl&gt;\n1 FALSE      3159.\n2 TRUE       6911.\n\n\nCode\ntib\n\n\n# A tibble: 24 × 3\n   ntotcat class_name       n\n   &lt;fct&gt;   &lt;fct&gt;        &lt;int&gt;\n 1 (1,8]   anticipation    28\n 2 (1,8]   damage        1032\n 3 (1,8]   governance     211\n 4 (1,8]   hydrology      748\n 5 (1,8]   relief         493\n 6 (1,8]   weather       1547\n 7 (8,17]  anticipation    29\n 8 (8,17]  damage        1741\n 9 (8,17]  governance     677\n10 (8,17]  hydrology     1552\n# ℹ 14 more rows\n\n\n\n\nControversies\n\n\nCode\ntib=wp_revisions %&gt;% \n  mutate(date_page=lubridate::ymd(as.POSIXct(timestamp))) %&gt;% \n  group_by(article) %&gt;%\n  summarise(date_page=min(date_page),\n            nedits=n()) %&gt;% \n  left_join(wp_pages %&gt;% select(article,length,lang,local),by=\"article\") %&gt;% \n  unique() %&gt;% \n  mutate(simple=lang==\"simple\")\ntibfitted=tib %&gt;% \n  filter(nedits&gt;10) %&gt;% \n  na.omit()\nmylm=lm(log(length)~log(nedits)*simple,data=tibfitted)\ntibfitted=tibfitted %&gt;% \n  mutate(fitted=exp(predict(mylm,data=tibfitted))) \n  \ntib=tib %&gt;% \n  arrange(nedits,simple) %&gt;% \n  left_join(tibfitted %&gt;% select(article,fitted),by=\"article\") %&gt;% \n  mutate(def_length=-(log(length)-log(fitted))) \nwp_pages=left_join(wp_pages,tib %&gt;% select(article,date_page,def_length),\n                   by=\"article\",\n                   relationship=\"many-to-many\")\nsaveRDS(wp_pages,\"data/wp_pages_def_length.RDS\")\nggplot(tib, aes(x=nedits,y=length,col=simple))+\n  geom_point(alpha=0.1)+\n  scale_x_log10()+\n  scale_y_log10()+\n  geom_path(data=tibfitted, aes(x=nedits,y=fitted))\n\n\nWarning: Removed 335 rows containing missing values (`geom_point()`).\n\n\n\n\n\nFigure 5: Length of articles as a function of number of revisions. Beyond a few edits (here, we consider the threshold is 10), there is a linear correlation between length of the article and length of the article. We consider that the difference between observed length and length predicted based on number of edits to represent a deficit in length.\n\n\n\n\n\n\nCode\ntib=tib %&gt;% \n  mutate(age_page=as.numeric(today()-date_page))\nmylm=lm(def_length~age_page,data=tib)\ntib=tib %&gt;% \n  mutate(controversy=def_length-predict(mylm,data=tib))%&gt;% \n  mutate(controversy=case_when(controversy&gt;0~controversy/max(controversy,na.rm=TRUE),\n                              controversy&lt;=0~controversy/max(-controversy,na.rm=TRUE),\n                              TRUE~controversy))\n\n\nWarning: There was 1 warning in `mutate()`.\nℹ In argument: `controversy = def_length - predict(mylm, data = tib)`.\nCaused by warning in `def_length - predict(mylm, data = tib)`:\n! la taille d'un objet plus long n'est pas multiple de la taille d'un objet plus court\n\n\nCode\nwp_pages=wp_pages %&gt;% \n  left_join(tib %&gt;% select(article,controversy),\n            by=\"article\",relationship=\"many-to-many\") %&gt;% \n  unique()\nsaveRDS(wp_pages,\"wp_pages_controversy.RDS\")\nggplot(tib, aes(x=age_page, y=def_length,col=controversy))+\n  geom_point()+\n  geom_smooth(method=\"lm\")+\n  scale_color_gradient2(low=\"blue\",mid=\"yellow\",high=\"red\")\n\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\nWarning: Removed 908 rows containing non-finite values (`stat_smooth()`).\n\n\nWarning: The following aesthetics were dropped during statistical transformation: colour\nℹ This can happen when ggplot fails to infer the correct grouping structure in\n  the data.\nℹ Did you forget to specify a `group` aesthetic or to convert a numerical\n  variable into a factor?\n\n\nWarning: Removed 908 rows containing missing values (`geom_point()`).\n\n\n\n\n\nFigure 6: Relationship between age of the Wikipedia page (in days) and deficit in length. Older pages tend to correspond to a more important deficit in length: there is a tendency towards more synthesis as the page ‘matures’. The residuals of this relationship is considered to be a way to quantify how controversial the edition of the page might have been."
  },
  {
    "objectID": "index.html#geographies-of-wikimedia",
    "href": "index.html#geographies-of-wikimedia",
    "title": "Online reports and narrations of flood events",
    "section": "Geographies of Wikimedia",
    "text": "Geographies of Wikimedia\nLike many volunteered mapping platforms, the Wikimedia projects are receiving growing interest from the research community (Farda-Sarbas and Müller-Birn 2019). As such, they are used in various projects: on the one hand, the content is employed directly as a data source, e.g. in history, literacy studies, archeology, philosophy (Zhao 2023), linguistics (Turki et al. 2017), medical and biological sciences (Farda-Sarbas and Müller-Birn 2019; Burgstaller-Muehlbacher et al. 2016), etc. or as an indicator of public interest (Mittermeier et al. 2021). On the other hand, studies consider the Wikimedia projects as a research object, e.g. analyzing the contributors’ motivations (Antin 2011), comparing their data to traditional databases (Lorini et al. 2020), evaluating completeness (Royal and Kapila 2009), accuracy (Giles 2005), topic coverage (Halavais and Lackaff 2008), local (Ballatore, Graham, and Sen 2017; Ballatore and De Sabbata 2020) and global distribution [Graham, De Sabbata, and Zook (2015); kollektiv_orangotango_uneven_2018], analyzing knowledge construction (Oeberst et al. 2014) and social network dynamics (Iba et al. 2010), etc. However, using a worldwide, crowdsourced, open database implies characterizing its contributors. Firstly, studies show that UGC is unequally distributed on a global scale: it is generally skewed towards countries from the Global North, whether it be in terms of participation, representation or access (Graham et al. 2018; Graham, De Sabbata, and Zook 2015; Ballatore, Graham, and Sen 2017). Research conducted on Wikipedia suggests that the platform follows the same pattern. For example, Graham (2014) shows that Europe and North America get the greatest number of articles per person. Secondly, participation tends to be skewed towards “a more wealthy, more educated, more Western, more white and more male demographic” (Crampton et al. 2013, 132). For example, research on OpenStreetMap – an open and crowdsourced mapping platform – suggests that it reproduces the socio-economical structures (Bittner 2017). The risk is that these crowdsourced platforms reproduce the inequalities, leaving economically and socially deprived areas also digitally deprived (Mashhadi, Quattrone, and Capra 2015). There is also a strong gender asymmetry on the web, contributing to biased data (Stephens 2013; Gardner et al. 2020).\nIdentifying the data distribution is capital for interpretation and analysis, given that the Wikimedia projects are a part of UGC and are therefore subjects to its biases. The question “who produces the data?” must then be addressed. Lorini et al. (2020) studied the report of floods on Wikipedia. However, to our knowledge, no study using multiple Wikimedia projects and analyzing the data distribution and production in time as well as in space, using quantitative and textometric methods, has been conducted on this subject."
  },
  {
    "objectID": "2_use_wikipedia.html#classification-of-segments-topics",
    "href": "2_use_wikipedia.html#classification-of-segments-topics",
    "title": "Use Wikipedia to complete Wikidata",
    "section": "",
    "text": "Code\nif(!file.exists(\"data/wp_segments.RDS\")){\n  library(quanteda)\n  library(rainette)\n  library(mixr)\n    lexicon_en=get_lexicon(\"en\")\n    wp_segments=readRDS(\"data/wp_pages.RDS\") %&gt;%\n    tidytext::unnest_tokens(output=\"word\",input=\"textt\",token=\"words\") %&gt;%\n    left_join(lexicon_en,by=c(\"word\")) %&gt;%\n    mutate(keep=(type!=\"sw\" & lemma!=\"flood\")) %&gt;% \n    group_by(flood,flood_label,article) %&gt;%\n    mutate(lemma=case_when(is.na(lemma)|(!keep)~\"\",\n                           TRUE~lemma)) %&gt;% \n    mutate(keep=as.numeric(keep)) %&gt;% \n    mutate(num_lemma=case_when(is.na(keep)~0,\n                     TRUE~keep)) %&gt;% \n    mutate(num_lemma=cumsum(num_lemma)) %&gt;% \n    mutate(num_segment=ceiling(num_lemma/10+0.000001)) %&gt;% \n    ungroup() %&gt;% \n    group_by(flood,flood_label,article,num_segment) %&gt;% \n    summarise(text_all=paste0(word, collapse=\" \"),\n              text_sig=paste0(lemma,collapse=\" \"),\n              .groups=\"drop\") %&gt;% \n    mutate(num_segment=paste0(article,\"_\",num_segment)) %&gt;% \n    mutate(text_sig_dontkeep=text_sig)\n\n  corpus=corpus(wp_segments,docid_field=\"num_segment\",text_field=\"text_sig_dontkeep\")\n  tok &lt;- tokens(corpus, remove_punct = TRUE, remove_numbers = TRUE)\n  dtm &lt;- dfm(tok)\n  dtm &lt;- dfm_trim(dtm, min_docfreq = 30)\n  set.seed(123)\n  res=rainette(dtm,k=10,min_split_members=10)\n  saveRDS(res,\"data/res_rainette_wp.RDS\")\n  saveRDS(corpus,\"data/corpus.RDS\")\n  saveRDS(dtm,\"data/dtm.RDS\")\n}\nres=readRDS(\"data/res_rainette_wp.RDS\")\ncorpus=readRDS(\"data/corpus.RDS\")\ndtm=readRDS(\"data/dtm.RDS\")\n#rainette_explor(res,dtm,corpus)\n\n\n\n\nCode\nrainette_plot(\n  res, dtm, k = 6,\n  n_terms = 20,\n  free_scales = TRUE,\n  measure = \"chi2\",\n  show_negative = FALSE,\n  text_size = 12\n)\n\n\n\n\n\n\n\nCode\nif(!file.exists(\"data/wp_segments.RDS\")){\n  corpus$class=paste0(\"class_\",cutree_rainette(res, k = 6))\n  \n  tib_classes=tibble::tribble(~class,~class_name,~color,\n                  \"class_1\",\"governance\",\"#4E79A7\",\n                  \"class_2\",\"relief\",\"#F28E2B\",\n                  \"class_3\",\"damage\",\"#E15759\",\n                  \"class_4\",\"hydrology\", \"#76B7B2\", \n                  \"class_5\",\"anticipation\",\"#59A14F\",\n                  \"class_6\",\"weather\",\"#EDC948\")\n  wp_segments=docvars(corpus) %&gt;% \n    left_join(tib_classes,by=\"class\") %&gt;% \n    mutate(class=as.factor(class),\n           class_name=as.factor(class_name)) %&gt;% \n    select(-flood,-flood_label)\n  saveRDS(wp_segments,\"data/wp_segments.RDS\")\n}"
  },
  {
    "objectID": "index.html#datasets",
    "href": "index.html#datasets",
    "title": "Online reports and narrations of flood events",
    "section": "Datasets",
    "text": "Datasets\nWe have gathered and curated tables of data organized as follows:\n\n\nCode\nsource(\"scripts/show_table.R\")\nset.seed(123)\n\n\n\nwd_events\n\n\nCode\nwd_events=readRDS(\"data/wd_events.RDS\")\nknitr::kable(show_table(wd_events,provide_key=\"flood\"))\n\n\n\n\n\nvar\nkey\nclass\nn_distinct\nexample\n\n\n\n\nflood\n*\ncharacter\n792\nwd:Q18991372\n\n\nflood_label\n\ncharacter\n698\n1966 Kaetsu flood\n\n\ndate\n\nDate\n615\n1966-07-17\n\n\ncountry\n\ncharacter\n154\nwd:Q17\n\n\ncountry_label\n\ncharacter\n154\nJapan\n\n\nyear\n\nnumeric\n236\n1966\n\n\n\n\n\n\n\nwp_pages\n\n\nCode\nwp_pages=readRDS(\"data/wp_pages.RDS\")\nknitr::kable(show_table(wp_pages,provide_key=c(\"article\")))\n\n\n\n\n\n\n\n\n\n\n\n\nvar\nkey\nclass\nn_distinct\nexample\n\n\n\n\nflood\n\ncharacter\n727\nwd:Q524797\n\n\narticle\n*\ncharacter\n2630\nhttps://uk.wikipedia.org/wiki/%D0%9F%D0%BE%D0%B2%D1%96%D0%B4%D1%8C_%D0%A1%D0%B2%D1%8F%D1%82%D0%BE%D1%97_%D0%84%D0%BB%D0%B8%D0%B7%D0%B0%D0%B2%D0%B5%D1%82%D0%B8_(1421)\n\n\nlang\n\ncharacter\n122\nuk\n\n\ntitle\n\ncharacter\n2544\nПовідь Святої Єлизавети (1421)\n\n\ntranslated_title\n\ncharacter\n2067\nLeash of Saint Elizabeth (1421)\n\n\ntext\n\ncharacter\n2614\nПовідь Святої Єлизавети (нід. Sint-Elisabethsvloed, 18 листопада — 19 листопада 1421 року; також Дру… [truncated]\n\n\ntextt\n\ncharacter\n2447\nSt. Elizabeth’s Leash (n. Sint-Elisabethsvloed, 18 November – 19 November 1421; also Second St. Eliz… [truncated]\n\n\nlength\n\nnumeric\n1999\n1483\n\n\nlocal\n\nlogical\n2\nFALSE\n\n\n\n\n\n\n\nwp_revisions\n\n\nCode\nwp_revisions=readRDS(\"data/wp_revisions.RDS\")\nknitr::kable(show_table(wp_revisions,provide_key=\"article\"))\n\n\n\n\n\n\n\n\n\n\n\n\nvar\nkey\nclass\nn_distinct\nexample\n\n\n\n\narticle\n*\ncharacter\n2790\nhttps://eu.wikipedia.org/wiki/2010eko_Pakistango_uholdeak\n\n\nid\n\ninteger\n195484\n1688053\n\n\ntimestamp\n\ncharacter\n192838\n2010-09-03T06:02:23Z\n\n\nminor\n\nlogical\n3\nTRUE\n\n\nsize\n\ninteger\n61689\n3619\n\n\ncomment\n\ncharacter\n94509\nrobota Erantsia: [[fa:سیل پاکستان (۲۰۱۰)]]\n\n\ndelta\n\ninteger\n7182\n40\n\n\nuser_id\n\ninteger\n25752\n15795\n\n\nuser_name\n\ncharacter\n44109\nEmausBot\n\n\n\n\n\n\n\nwp_segments\n\n\nCode\nwp_segments=readRDS(\"data/wp_segments.RDS\")\nknitr::kable(show_table(wp_segments,provide_key=\"article\"))\n\n\n\n\n\n\n\n\n\n\n\n\nvar\nkey\nclass\nn_distinct\nexample\n\n\n\n\narticle\n*\ncharacter\n2630\nhttps://de.wikipedia.org/wiki/Februarflut_1825\n\n\ntext_all\n\ncharacter\n64198\ndike on the ostland which was not yet connected to the western part of the island broke so that the entire agricultural area there was flooded on juist there were also large dune\n\n\ntext_sig\n\ncharacter\n64147\ndike connect western part island break entire area large dune\n\n\nclass\n\nfactor\n7\nclass_4\n\n\nclass_name\n\nfactor\n7\nhydrology\n\n\ncolor\n\ncharacter\n7\n#76B7B2\n\n\n\n\n\n\n\ncountries\n\n\nCode\ncountries=readRDS(\"data/countries.RDS\")\nknitr::kable(show_table(countries, provide_key=c(\"country\",\"country_label\")))\n\n\n\n\n\nvar\nkey\nclass\nn_distinct\nexample\n\n\n\n\ncountry\n*\ncharacter\n110\nwd:Q29\n\n\ncountry_label\n*\ncharacter\n110\nSpain\n\n\ncoords_country\n\ncharacter\n110\nPoint(-3.5 40.2)\n\n\nHDI\n\nnumeric\n101\n0.905\n\n\nlang_type\n\ncharacter\n2\nused\n\n\nlanguage\n\ncharacter\n442\nBasque\n\n\nlanguage_code\n\ncharacter\n441\neu"
  },
  {
    "objectID": "index.html#basic-metrics",
    "href": "index.html#basic-metrics",
    "title": "Online reports and narrations of flood events",
    "section": "Basic metrics",
    "text": "Basic metrics\n\n\nCode\nNwde_with_wpp=wp_pages %&gt;% \n  group_by(flood) %&gt;% \n  tally() %&gt;% \n  nrow()\nn_pages_in_english=wp_pages %&gt;% filter(lang==\"en\") %&gt;% nrow()\nn_pages_not_in_english=nrow(wp_pages)-n_pages_in_english\nn_pages_untranslatable=wp_pages %&gt;% filter(!is.na(text) & is.na(textt)) %&gt;% nrow()\n\n\nwpp_length_average=wp_pages %&gt;% pull(length) %&gt;% mean(na.rm=TRUE)\nwpp_length_quant10=wp_pages %&gt;% pull(length) %&gt;% quantile(0.1,na.rm=TRUE)\nwpp_length_quant90=wp_pages %&gt;% pull(length) %&gt;% quantile(0.9,na.rm=TRUE)\n\nwp_revisions=readRDS(\"data/wp_revisions.RDS\")\nNwpr=nrow(wp_revisions)\n\nwp_revisions=wp_revisions %&gt;% \n  mutate(bot=stringr::str_detect(user_name,\"B|bot\"))\nNwpr_humans=wp_revisions %&gt;% \n  filter(!bot) %&gt;% \n  nrow()\n\nNwpu=wp_revisions %&gt;%\n  select(user_name) %&gt;%\n  unique() %&gt;% \n  nrow()\nNwpuh=wp_revisions %&gt;% \n  filter(!bot) %&gt;% \n  select(user_name) %&gt;%\n  unique() %&gt;% \n  nrow()\n\n\nThe initial query provided 1018 Wikidata flood events. There are 2630 Wikipedia pages associated to these events (i.e. on average 2.58 Wikipedia pages per event). 727 flood events are associated to at least one Wikipedia page.\n455 Wikipedia pages are in English. Out of the 2175 remaining pages, we could translate most pages to English, except 175 pages which were in languages that Google Translate did not support. We based all subsequent textometric analyses on the texts in English, either natively so or translated.\nThe average length of articles (in English or translated to English) is 4348 characters. The 10% shortest articles represent less than 448 characters and the 10% longest ones are more than 9362 characters long.\nThere are 216245 revisions that produced the Wikipedia pages as they appear to this date, which represents an average 82 revisions per page. 175107 (80.98%) of these revisions appear to have been done by human editors and not bots (Wikipedia usernames do not contain the strings “bot” or “Bot”). There are 44109 distinct editors, 40101 (90.91%) of which appear to be humans. On average, each human editor in our corpus is responsible for 4.37 edits. The number of articles (in the corpus) edited by each human editor is distributed as follows:\n\n\nCode\nwp_revisions %&gt;% \n  filter(!bot) %&gt;% \n  group_by(user_name) %&gt;% \n  summarise(number_of_articles_edited=n_distinct(article),.groups=\"drop\") %&gt;%\n  mutate(nusertot=n()) %&gt;% \n  mutate(number_of_articles_edited=cut(number_of_articles_edited,\n                                       c(0,1,2,5,10,100,400))) %&gt;% \n  group_by(number_of_articles_edited,nusertot) %&gt;% \n  summarise(number_of_editors=n(),.groups=\"drop\") %&gt;% \n  mutate(proportion_of_editors=round(number_of_editors/nusertot*100,2)) %&gt;% \n  select(number_of_articles_edited,number_of_editors,proportion_of_editors) %&gt;% \n  knitr::kable()\n\n\n\n\n\nnumber_of_articles_edited\nnumber_of_editors\nproportion_of_editors\n\n\n\n\n(0,1]\n27372\n68.26\n\n\n(1,2]\n8396\n20.94\n\n\n(2,5]\n2976\n7.42\n\n\n(5,10]\n862\n2.15\n\n\n(10,100]\n487\n1.21\n\n\n(100,400]\n8\n0.02"
  },
  {
    "objectID": "2_use_wikipedia.html#add-classif-results-summary-to-wp_pages",
    "href": "2_use_wikipedia.html#add-classif-results-summary-to-wp_pages",
    "title": "Use Wikipedia to complete Wikidata",
    "section": "",
    "text": "Code\nwp_segments=readRDS(\"data/wp_segments.RDS\")\nwp_segments_summary=wp_segments %&gt;% \n  group_by(article,class,class_name,color) %&gt;% \n  tally()\nspec=mixr::tidy_specificities(wp_segments,\n                              article,\n                              class_name)\nwp_pages_class=wp_pages %&gt;% \n  left_join(wp_segments_summary,\n            by=\"article\") %&gt;% \n  left_join(spec,by=c(\"article\",\"class_name\",\"n\"))\n\nsaveRDS(wp_pages_class,\"data/wp_pages_class.RDS\")"
  },
  {
    "objectID": "index.html#online-app",
    "href": "index.html#online-app",
    "title": "Online reports and narrations of flood events",
    "section": "Online app",
    "text": "Online app\nThe results and tables can be consulted here:\nlink to app\nThe app provides maps and plots regarding all events (i.e. at the global scale) but also displays, for each event in the database, all the raw data included in the analyses."
  },
  {
    "objectID": "2_use_wikipedia.html#is-language-local",
    "href": "2_use_wikipedia.html#is-language-local",
    "title": "Use Wikipedia to complete Wikidata",
    "section": "",
    "text": "Code\nis_language_local=function(lang_id,data){\n  result=countries %&gt;% \n    filter(country %in% data$country) %&gt;% \n    filter(lang_id==language_code)\n  result=case_when(nrow(result)&gt;=1~TRUE,\n                   nrow(result)==0~FALSE)\n  return(result)\n}\n\ncountries=readRDS(\"data/countries.RDS\") %&gt;% \n  select(country,language_code) %&gt;% \n  unique()\nwp_pages=readRDS(\"data/wp_pages.RDS\") %&gt;% \n  unique()\nif(!(\"local\" %in% colnames(wp_pages))){\n    wd_events=readRDS(\"data/wd_events.RDS\") \n    wp_pages_local_articles=wd_events %&gt;% select(flood,country) %&gt;% \n      group_by(flood) %&gt;% \n      tidyr::nest() %&gt;% \n      left_join(wp_pages %&gt;% select(flood,article,lang),\n                by=\"flood\",relationship=\"many-to-many\") %&gt;% \n      mutate(local=purrr::map2_lgl(lang,data,is_language_local)) %&gt;% \n      select(article,local)\n    wp_pages=wp_pages %&gt;% \n      left_join(wp_pages_local_articles,by=c(\"flood\",\"article\"))\n    saveRDS(wp_pages,\"data/wp_pages.RDS\")\n}"
  },
  {
    "objectID": "2_use_wikipedia.html#section",
    "href": "2_use_wikipedia.html#section",
    "title": "Use Wikipedia to complete Wikidata",
    "section": "",
    "text": "Code\nclean_banners=function(text){\n  banner=str_detect(text,\"This article|this banner|your knowledge\")\n  if(banner & !is.na(text)){\n  result=text %&gt;% \n    str_replace(\"This article is.*\\\\n\",\"\") %&gt;% \n    str_replace(\"This article is a draft concerning.*\\\\.\\\\n\\\\n\",\"\") %&gt;% \n    str_replace(\"\\\\nedit - edit code - edit Wikidata\\\\n\",\"\") %&gt;% \n    str_replace(\"You can share your knowledge by.*\\\\.\",\"\") %&gt;% \n    str_replace(\"This article is based.*$\",\"\") %&gt;% \n    str_replace(\"^(.|\\\\n)*If you think these points have been resolved, you can remove this banner and improve the formatting of another article\\\\.\",\"\")%&gt;% \n    str_replace(\"This .*article.*\\\\. You can help Wikipedia by expanding it\\\\.\") %&gt;% \n    str_replace(\"\\\\..*\\\\}\",\"\")\n  }else{result=text}\n  return(result)\n}\n\n\n\n\nCode\nif(!file.exists(\"data/wikisites_text.RDS\")){\n  library(rvest)\n  # Get text paragraphs from all Wikipedia articles\n  tmp=Sys.time()\n  wikisites_text=wikisites %&gt;%\n    mutate(html=purrr::map(article,read_html)) %&gt;% \n    mutate(html=purrr::map(html,~html_nodes(.x,\"p\"))) %&gt;%\n    mutate(text=purrr::map(html,html_text)) %&gt;% \n    select(-html) %&gt;% \n    mutate(text=purrr::map(text,~paste0(.x,collapse=\"\\n\"))) %&gt;% \n  tmp-Sys.time()\n  \n  # Translate them all to English with Google Translate (if possible)\n  wikisites_textt=wikisites_text %&gt;% \n    mutate(textt=NA)\n  tmp=Sys.time()\n  for(i in 1:nrow(wikisites_textt)){\n    print(i)\n    result=translate(i)\n    if(length(result)&gt;0){\n    wikisites_textt$textt[i]=result}\n  }  \n  print(Sys.time()-tmp) \nsaveRDS(wikisites_textt,\"data/wp_pages.RDS\")\n\n  wp_pages=wikisites_textt %&gt;% \n    mutate(textt=purrr::map_chr(textt,clean_banners)) %&gt;% \n    mutate(textt=stringr::str_replace(textt,\"mw-parser-output.*$\",\"\")) %&gt;% \n    mutate(length=map_dbl(textt,str_length)) %&gt;% \n    select(-flood_label)\n  saveRDS(wp_pages,\"data/wp_pages.RDS\")\n}\n\n\n\nwp_pages=readRDS(\"data/wp_pages.RDS\") %&gt;% \n  filter(flood %in% wd_raw$flood)"
  },
  {
    "objectID": "2_use_wikipedia.html#search-for-deathtoll-in-text",
    "href": "2_use_wikipedia.html#search-for-deathtoll-in-text",
    "title": "Use Wikipedia to complete Wikidata",
    "section": "",
    "text": "Code\n# dat %&gt;% \n#   mutate(mentions_death=stringr::str_detect(text_all,\"dead|death|decease\")) %&gt;% \n#   filter(mentions_death) %&gt;%"
  },
  {
    "objectID": "index.html#controversies",
    "href": "index.html#controversies",
    "title": "Online reports and narrations of flood events",
    "section": "Controversies",
    "text": "Controversies\n\n\nCode\ntib=wp_revisions %&gt;% \n  mutate(date_page=lubridate::ymd(as.POSIXct(timestamp))) %&gt;% \n  group_by(article) %&gt;%\n  summarise(date_page=min(date_page),\n            nedits=n()) %&gt;% \n  left_join(wp_pages %&gt;% select(article,length,lang,local),by=\"article\") %&gt;% \n  unique() %&gt;% \n  mutate(simple=lang==\"simple\")\ntibfitted=tib %&gt;% \n  filter(nedits&gt;10) %&gt;% \n  na.omit()\nmylm=lm(log(length)~log(nedits)*simple,data=tibfitted)\ntibfitted=tibfitted %&gt;% \n  mutate(fitted=exp(predict(mylm,data=tibfitted))) \n  \ntib=tib %&gt;% \n  arrange(nedits,simple) %&gt;% \n  left_join(tibfitted %&gt;% select(article,fitted),by=\"article\") %&gt;% \n  mutate(def_length=-(log(length)-log(fitted))) \nwp_pages=left_join(wp_pages,tib %&gt;% select(article,date_page,def_length),\n                   by=\"article\",\n                   relationship=\"many-to-many\")\nsaveRDS(wp_pages,\"data/wp_pages_def_length.RDS\")\nggplot(tib, aes(x=nedits,y=length,col=simple))+\n  geom_point(alpha=0.1)+\n  scale_x_log10()+\n  scale_y_log10()+\n  geom_path(data=tibfitted, aes(x=nedits,y=fitted))\n\n\nWarning: Removed 335 rows containing missing values (`geom_point()`).\n\n\n\n\n\nFigure 1: Length of articles as a function of number of revisions. Beyond a few edits (here, we consider the threshold is 10), there is a linear correlation between length of the article and length of the article. We consider that the difference between observed length and length predicted based on number of edits to represent a deficit in length.\n\n\n\n\n\n\nCode\ntib=tib %&gt;% \n  mutate(age_page=as.numeric(today()-date_page))\nmylm=lm(def_length~age_page,data=tib)\ntib=tib %&gt;% \n  mutate(controversy=def_length-predict(mylm,data=tib))%&gt;% \n  mutate(controversy=case_when(controversy&gt;0~controversy/max(controversy,na.rm=TRUE),\n                              controversy&lt;=0~controversy/max(-controversy,na.rm=TRUE),\n                              TRUE~controversy))\n\n\nWarning: There was 1 warning in `mutate()`.\nℹ In argument: `controversy = def_length - predict(mylm, data = tib)`.\nCaused by warning in `def_length - predict(mylm, data = tib)`:\n! la taille d'un objet plus long n'est pas multiple de la taille d'un objet plus court\n\n\nCode\nwp_pages=wp_pages %&gt;% \n  left_join(tib %&gt;% select(article,controversy),\n            by=\"article\",relationship=\"many-to-many\") %&gt;% \n  unique()\nsaveRDS(wp_pages,\"wp_pages_controversy.RDS\")\nggplot(tib, aes(x=age_page, y=def_length,col=controversy))+\n  geom_point()+\n  geom_smooth(method=\"lm\")+\n  scale_color_gradient2(low=\"blue\",mid=\"yellow\",high=\"red\")\n\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\nWarning: Removed 908 rows containing non-finite values (`stat_smooth()`).\n\n\nWarning: The following aesthetics were dropped during statistical transformation: colour\nℹ This can happen when ggplot fails to infer the correct grouping structure in\n  the data.\nℹ Did you forget to specify a `group` aesthetic or to convert a numerical\n  variable into a factor?\n\n\nWarning: Removed 908 rows containing missing values (`geom_point()`).\n\n\n\n\n\nFigure 2: Relationship between age of the Wikipedia page (in days) and deficit in length. Older pages tend to correspond to a more important deficit in length: there is a tendency towards more synthesis as the page ‘matures’. The residuals of this relationship is considered to be a way to quantify how controversial the edition of the page might have been.\n\n\n\n\nComparing\n\n\nCode\nwp_pages_controversy=readRDS(\"data/wp_pages_controversy.RDS\") %&gt;% \n  na.omit()\n# library(randomForest)\n# tibrf=wp_pages_controversy %&gt;% na.omit() %&gt;% \n#   select(flood,lang,length,local,controversy)\n# rf=randomForest(tibrf %&gt;% select(-controversy),\n#                 tibrf$controversy)\nflood_controversy=wp_pages_controversy%&gt;% \n  select(flood,article,controversy) %&gt;% \n  unique() %&gt;% \n  group_by(flood) %&gt;% \n  mutate(n=n()) %&gt;% \n  filter(n&gt;5) %&gt;% \n  ungroup()\n\nmod=lm(controversy~flood,data=flood_controversy)\nsummary(mod)\n\n\n\nCall:\nlm(formula = controversy ~ flood, data = flood_controversy)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-0.53339 -0.12215 -0.01696  0.10337  0.99138 \n\nCoefficients:\n                    Estimate Std. Error t value  Pr(&gt;|t|)    \n(Intercept)         0.048178   0.059697   0.807   0.41988    \nfloodwd:Q107596384  0.023923   0.088545   0.270   0.78709    \nfloodwd:Q107695056 -0.109372   0.086321  -1.267   0.20552    \nfloodwd:Q110184654 -0.309498   0.103398  -2.993   0.00285 ** \nfloodwd:Q110932715 -0.034862   0.088545  -0.394   0.69389    \nfloodwd:Q111598844 -0.097844   0.091188  -1.073   0.28360    \nfloodwd:Q112947091  0.021830   0.103398   0.211   0.83284    \nfloodwd:Q113288859 -0.180399   0.077068  -2.341   0.01949 *  \nfloodwd:Q1135487    0.032999   0.103398   0.319   0.74970    \nfloodwd:Q1142904    0.020426   0.094389   0.216   0.82873    \nfloodwd:Q1145882   -0.113669   0.080092  -1.419   0.15622    \nfloodwd:Q1147270    0.031960   0.088545   0.361   0.71823    \nfloodwd:Q1150973   -0.080239   0.072170  -1.112   0.26656    \nfloodwd:Q118433941 -0.123978   0.103398  -1.199   0.23087    \nfloodwd:Q119123254 -0.303271   0.074834  -4.053 0.0000557 ***\nfloodwd:Q120182     0.017037   0.103398   0.165   0.86916    \nfloodwd:Q120669170 -0.239596   0.098351  -2.436   0.01506 *  \nfloodwd:Q122311648 -0.204711   0.072624  -2.819   0.00494 ** \nfloodwd:Q129151    -0.102288   0.075511  -1.355   0.17593    \nfloodwd:Q1337934   -0.006147   0.077970  -0.079   0.93718    \nfloodwd:Q13415210  -0.060222   0.082785  -0.727   0.46716    \nfloodwd:Q13507070   0.013416   0.086321   0.155   0.87653    \nfloodwd:Q13765056  -0.133190   0.103398  -1.288   0.19808    \nfloodwd:Q1434437   -0.049756   0.086321  -0.576   0.56451    \nfloodwd:Q15215530  -0.004399   0.098351  -0.045   0.96434    \nfloodwd:Q15276827  -0.028816   0.088545  -0.325   0.74493    \nfloodwd:Q1549050   -0.161634   0.091188  -1.773   0.07669 .  \nfloodwd:Q16879871  -0.109973   0.075511  -1.456   0.14568    \nfloodwd:Q1758546    0.073934   0.098351   0.752   0.45243    \nfloodwd:Q181481    -0.088949   0.077970  -1.141   0.25429    \nfloodwd:Q20088998  -0.060921   0.082785  -0.736   0.46201    \nfloodwd:Q20871     -0.072707   0.094389  -0.770   0.44136    \nfloodwd:Q21528743   0.062408   0.094389   0.661   0.50869    \nfloodwd:Q2372799    0.009425   0.098351   0.096   0.92368    \nfloodwd:Q2380859    0.089290   0.098351   0.908   0.36422    \nfloodwd:Q24287229  -0.045531   0.084424  -0.539   0.58982    \nfloodwd:Q24805491   0.073060   0.103398   0.707   0.48003    \nfloodwd:Q26234218   0.077118   0.091188   0.846   0.39798    \nfloodwd:Q2712444    0.002703   0.103398   0.026   0.97915    \nfloodwd:Q2732058    0.058682   0.091188   0.644   0.52007    \nfloodwd:Q2741550   -0.067324   0.091188  -0.738   0.46055    \nfloodwd:Q2742723    0.035415   0.098351   0.360   0.71888    \nfloodwd:Q282940    -0.140942   0.094389  -1.493   0.13578    \nfloodwd:Q3005548   -0.042385   0.094389  -0.449   0.65352    \nfloodwd:Q3115081   -0.138054   0.098351  -1.404   0.16080    \nfloodwd:Q315494    -0.218029   0.086321  -2.526   0.01174 *  \nfloodwd:Q333349    -0.139738   0.091188  -1.532   0.12582    \nfloodwd:Q333363     0.054252   0.091188   0.595   0.55205    \nfloodwd:Q333463     0.063681   0.071351   0.892   0.37240    \nfloodwd:Q3505936    0.084019   0.098351   0.854   0.39321    \nfloodwd:Q3612703   -0.051469   0.091188  -0.564   0.57263    \nfloodwd:Q3643277   -0.061736   0.103398  -0.597   0.55063    \nfloodwd:Q36687031  -0.097863   0.084424  -1.159   0.24673    \nfloodwd:Q38130629  -0.114717   0.088545  -1.296   0.19550    \nfloodwd:Q42408449  -0.072015   0.103398  -0.696   0.48633    \nfloodwd:Q493534     0.063967   0.088545   0.722   0.47024    \nfloodwd:Q493565     0.068249   0.088545   0.771   0.44107    \nfloodwd:Q499799     0.049211   0.084424   0.583   0.56013    \nfloodwd:Q504934    -0.070684   0.074213  -0.952   0.34116    \nfloodwd:Q524797     0.043521   0.091188   0.477   0.63330    \nfloodwd:Q537183    -0.037378   0.103398  -0.361   0.71783    \nfloodwd:Q55410283  -0.093656   0.077970  -1.201   0.23004    \nfloodwd:Q56044878   0.048779   0.084424   0.578   0.56357    \nfloodwd:Q62521190  -0.132548   0.086321  -1.536   0.12506    \nfloodwd:Q6740      -0.029994   0.091188  -0.329   0.74230    \nfloodwd:Q6752       0.029839   0.082785   0.360   0.71861    \nfloodwd:Q688380     0.070022   0.088545   0.791   0.42929    \nfloodwd:Q691404     0.095744   0.088545   1.081   0.27989    \nfloodwd:Q80630429  -0.087965   0.098351  -0.894   0.37138    \nfloodwd:Q837833     0.144868   0.075511   1.918   0.05541 .  \nfloodwd:Q851523    -0.133700   0.098351  -1.359   0.17440    \nfloodwd:Q854898     0.138533   0.075511   1.835   0.06694 .  \nfloodwd:Q859770    -0.078221   0.088545  -0.883   0.37729    \nfloodwd:Q86929     -0.007156   0.077068  -0.093   0.92604    \nfloodwd:Q926626     0.037836   0.080092   0.472   0.63677    \nfloodwd:Q96784050  -0.173953   0.098351  -1.769   0.07733 .  \nfloodwd:Q96981356  -0.083328   0.084424  -0.987   0.32394    \nfloodwd:Q98929935  -0.060206   0.103398  -0.582   0.56055    \nfloodwd:Q993582    -0.322631   0.098351  -3.280   0.00108 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.2068 on 792 degrees of freedom\nMultiple R-squared:  0.2135,    Adjusted R-squared:  0.136 \nF-statistic: 2.756 on 78 and 792 DF,  p-value: 0.00000000000152\n\n\nCode\nsummary(mod)$coeff %&gt;%\n  as.data.frame() %&gt;%\n  rownames_to_column() %&gt;%\n  as_tibble() %&gt;%\n  arrange(desc(Estimate))\n\n\n# A tibble: 79 × 5\n   rowname           Estimate `Std. Error` `t value` `Pr(&gt;|t|)`\n   &lt;chr&gt;                &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;\n 1 floodwd:Q837833     0.145        0.0755     1.92      0.0554\n 2 floodwd:Q854898     0.139        0.0755     1.83      0.0669\n 3 floodwd:Q691404     0.0957       0.0885     1.08      0.280 \n 4 floodwd:Q2380859    0.0893       0.0984     0.908     0.364 \n 5 floodwd:Q3505936    0.0840       0.0984     0.854     0.393 \n 6 floodwd:Q26234218   0.0771       0.0912     0.846     0.398 \n 7 floodwd:Q1758546    0.0739       0.0984     0.752     0.452 \n 8 floodwd:Q24805491   0.0731       0.103      0.707     0.480 \n 9 floodwd:Q688380     0.0700       0.0885     0.791     0.429 \n10 floodwd:Q493565     0.0682       0.0885     0.771     0.441 \n# ℹ 69 more rows"
  },
  {
    "objectID": "2_use_wikipedia.html#clean-text",
    "href": "2_use_wikipedia.html#clean-text",
    "title": "Use Wikipedia to complete Wikidata",
    "section": "",
    "text": "Code\nclean_banners=function(text){\n  banner=str_detect(text,\"This article|this banner|your knowledge\")\n  if(banner & !is.na(text)){\n  result=text %&gt;% \n    str_replace(\"This article is.*\\\\n\",\"\") %&gt;% \n    str_replace(\"This article is a draft concerning.*\\\\.\\\\n\\\\n\",\"\") %&gt;% \n    str_replace(\"\\\\nedit - edit code - edit Wikidata\\\\n\",\"\") %&gt;% \n    str_replace(\"You can share your knowledge by.*\\\\.\",\"\") %&gt;% \n    str_replace(\"This article is based.*$\",\"\") %&gt;% \n    str_replace(\"^(.|\\\\n)*If you think these points have been resolved, you can remove this banner and improve the formatting of another article\\\\.\",\"\")%&gt;% \n    str_replace(\"This .*article.*\\\\. You can help Wikipedia by expanding it\\\\.\") %&gt;% \n    str_replace(\"\\\\..*\\\\}\",\"\")\n  }else{result=text}\n  return(result)\n}\n\n\n\n\nCode\nif(!file.exists(\"data/wikisites_text.RDS\")){\n  library(rvest)\n  # Get text paragraphs from all Wikipedia articles\n\n  get_text=function(html){\n    html_nodes(html,\"h1, h2, h3, h4, h5, h6, p\") %&gt;%\n    purrr::map(html_text) %&gt;% \n    stringr::str_replace(\"\\\\[.*\\\\]$\",\"\")\n  }\n  wikisites_text=wikisites %&gt;%\n    mutate(html=purrr::map(article,read_html)) %&gt;% \n    mutate(text=purrr::map(html,safely(get_text))) %&gt;% \n    mutate(text=purrr::map(text,\"result\")) %&gt;% \n    select(-html) %&gt;% \n    mutate(text=purrr::map(text,~paste0(.x,collapse=\"\\n\"))) \n\n  \n  # Translate them all to English with Google Translate (if possible)\n  wikisites_textt=wikisites_text %&gt;% \n    mutate(textt=NA)\n  tmp=Sys.time()\n  for(i in 1:nrow(wikisites_textt)){\n    print(i)\n    result=translate(i)\n    if(length(result)&gt;0){\n    wikisites_textt$textt[i]=result}\n  }  \n  print(Sys.time()-tmp) \nsaveRDS(wikisites_textt,\"data/wp_pages.RDS\")\n\n  wp_pages=wikisites_textt %&gt;% \n    mutate(textt=purrr::map_chr(textt,clean_banners)) %&gt;% \n    mutate(textt=stringr::str_replace(textt,\"mw-parser-output.*$\",\"\")) %&gt;% \n    mutate(length=map_dbl(textt,str_length)) %&gt;% \n    select(-flood_label)\n  saveRDS(wp_pages,\"data/wp_pages.RDS\")\n}\n\n\n\nwp_pages=readRDS(\"data/wp_pages.RDS\")"
  },
  {
    "objectID": "3_curate_wikidata.html#basic-query",
    "href": "3_curate_wikidata.html#basic-query",
    "title": "Curate wikidata",
    "section": "Basic query",
    "text": "Basic query\nWe query the Wikidata Triplestore through the {glitter} R package (ref).\n\n\nCode\nquery=spq_init() %&gt;%\n    spq_add(\"?flood wdt:P31/wdt:P279* wd:Q8068\") %&gt;% \n    spq_add(\"?flood wdt:P31 ?what\") %&gt;%\n    spq_add(\"?flood wdt:P625 ?coords\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P17 ?country\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P1120 ?deathtoll\",.required=FALSE) %&gt;%\n    spq_add(\"?flood wdt:P276 ?loc\",.required=FALSE) %&gt;% \n    spq_add(\"?loc wdt:P17 ?country_loc\") %&gt;% \n    spq_add(\"?article schema:about ?flood\",.required=FALSE) %&gt;% \n    spq_label(flood,country,what) \npng(\"figure/fig-graph_query.png\",width=600,height=500)\nplot_query(query, labelling=TRUE)\ndev.off()\n\n\npng \n  2 \n\n\nHere are the initial results we get when performing this query:\n\n\nCode\nif(!file.exists(\"data/wd_raw.RDS\")){\n  wd_raw=query %&gt;%\n    spq_perform(replace_prefixes=TRUE) %&gt;% \n    mutate(deathtoll=as.numeric(deathtoll))\n  saveRDS(wd_raw,\"data/wd_raw.RDS\")\n}\nwd_raw=readRDS(\"data/wd_raw.RDS\")\n\n\nwd_weird_events=wd_raw %&gt;% \n  mutate(weird=(what_label %in% c(\"Bible story\",\n                                  \"deluge myth\",\n                                  \"creation myth\",\n                                  \"episode in Greek mythology\",\n                                  \"reflective writing\",\n                                  \"non-water flood\"))) %&gt;% \n  group_by(flood) %&gt;% \n  summarise(any_weird=any(weird), .groups=\"drop\") %&gt;% \n  filter(any_weird)\n\nwd_raw = wd_raw %&gt;%\n  filter(!(flood %in% wd_weird_events$flood))\n\nsaveRDS(wd_raw, \"data/wd_raw.RDS\")\nkableExtra::kable(wd_raw %&gt;% head(20))\n\n\n\n\n\nwhat\nflood\nloc\ndeathtoll\ncountry\ncountry_label\nflood_label\nwhat_label\ncoords\n\n\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6886\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q7788\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q15175\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q19206\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q43934\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q45208\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6401352\n85\nwd:Q148\nPeople's Republic of China\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6886\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q7788\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q15175\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q19206\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q43934\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q45208\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q14628797\nwd:Q6401352\n85\nwd:Q159\nRussia\n2013 China–Russia floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q119109771\nwd:Q790\n51\nwd:Q790\nHaiti\n2023 Haiti floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q122311510\nwd:Q10388860\n47\nwd:Q155\nBrazil\n2023 Rio Grande do Sul floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q1599758\nwd:Q183\n16\nwd:Q183\nGermany\nflood disaster\nnatural disaster\nPoint(9.44786 51.6426)\n\n\nwd:Q8065\nwd:Q113288859\nwd:Q843\n1666\nwd:Q843\nPakistan\n2022 Pakistan floods\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q20630431\nwd:Q1061\n70\nwd:Q668\nIndia\n2015 Gujarat flood\nnatural disaster\nNA\n\n\nwd:Q8065\nwd:Q118433941\nwd:Q1263\n17\nwd:Q38\nItaly\n2023 Emilia-Romagna floods\nnatural disaster\nNA\n\n\n\n\n\n\n\nThis table has 1516 rows and documents 792 flood events."
  },
  {
    "objectID": "index.html#text-analysis-of-wikipedia-pages",
    "href": "index.html#text-analysis-of-wikipedia-pages",
    "title": "Online reports and narrations of flood events",
    "section": "Text analysis of Wikipedia pages",
    "text": "Text analysis of Wikipedia pages\nWe scraped the text (all the textual content in headers from level one (h1) to level 6 (h6) as well as paragraphs) from all listed Wikipedia pages, using the rvest R package (Wickham 2024). We then translated them to English (if necessary) through Google Translate using the polyglotr R package (Iwan 2024).\nWe tokenized the texts with the tidytext R package (Silge and Robinson 2016), lemmatized words and filtered out stop words based on the Iramuteq English dictionnary [ref]. We could then identify textual specificities based on various partitions of the corpus Loiseau et al. (2022)."
  },
  {
    "objectID": "index.html#wikipedia-on-floods",
    "href": "index.html#wikipedia-on-floods",
    "title": "Online reports and narrations of flood events",
    "section": "Wikipedia on floods",
    "text": "Wikipedia on floods\n\n\nCode\nNwde_with_wpp=wp_pages %&gt;% \n  group_by(flood) %&gt;% \n  tally() %&gt;% \n  nrow()\nn_pages_in_english=wp_pages %&gt;% filter(lang==\"en\") %&gt;% nrow()\nn_pages_not_in_english=nrow(wp_pages)-n_pages_in_english\nn_pages_untranslatable=wp_pages %&gt;% filter(!is.na(text) & is.na(textt)) %&gt;% nrow()\n\n\nwpp_length_average=wp_pages %&gt;% pull(length) %&gt;% mean(na.rm=TRUE)\nwpp_length_quant10=wp_pages %&gt;% pull(length) %&gt;% quantile(0.1,na.rm=TRUE)\nwpp_length_quant90=wp_pages %&gt;% pull(length) %&gt;% quantile(0.9,na.rm=TRUE)\n\nwp_revisions=readRDS(\"data/wp_revisions.RDS\")\nNwpr=nrow(wp_revisions)\n\nwp_revisions=wp_revisions %&gt;% \n  mutate(bot=stringr::str_detect(user_name,\"B|bot\"))\nNwpr_humans=wp_revisions %&gt;% \n  filter(!bot) %&gt;% \n  nrow()\n\nNwpu=wp_revisions %&gt;%\n  select(user_name) %&gt;%\n  unique() %&gt;% \n  nrow()\nNwpuh=wp_revisions %&gt;% \n  filter(!bot) %&gt;% \n  select(user_name) %&gt;%\n  unique() %&gt;% \n  nrow()\n\n\nThere are 2630 Wikipedia pages associated to these events (i.e. on average 2.58 Wikipedia pages per event). 727 flood events are associated to at least one Wikipedia page.\n455 Wikipedia pages are in English. Out of the 2175 remaining pages, we could translate most pages to English, except 175 pages which were in languages that Google Translate did not support. We based all subsequent textometric analyses on the texts in English, either natively so or translated.\nThe average length of articles (in English or translated to English) is 4348 characters. The 10% shortest articles represent less than 448 characters and the 10% longest ones are more than 9362 characters long.\nThere are 216245 revisions that produced the Wikipedia pages as they appear to this date, which represents an average 82 revisions per page. 175107 (80.98%) of these revisions appear to have been done by human editors and not bots (Wikipedia usernames do not contain the strings “bot” or “Bot”). There are 44109 distinct editors, 40101 (90.91%) of which appear to be humans. On average, each human editor in our corpus is responsible for 4.37 edits. The number of articles (in the corpus) edited by each human editor is distributed as follows:\n\n\nCode\nwp_revisions %&gt;% \n  filter(!bot) %&gt;% \n  group_by(user_name) %&gt;% \n  summarise(number_of_articles_edited=n_distinct(article),.groups=\"drop\") %&gt;%\n  mutate(nusertot=n()) %&gt;% \n  mutate(number_of_articles_edited=cut(number_of_articles_edited,\n                                       c(0,1,2,5,10,100,400))) %&gt;% \n  group_by(number_of_articles_edited,nusertot) %&gt;% \n  summarise(number_of_editors=n(),.groups=\"drop\") %&gt;% \n  mutate(proportion_of_editors=round(number_of_editors/nusertot*100,2)) %&gt;% \n  select(number_of_articles_edited,number_of_editors,proportion_of_editors) %&gt;% \n  knitr::kable()\n\n\n\n\n\nnumber_of_articles_edited\nnumber_of_editors\nproportion_of_editors\n\n\n\n\n(0,1]\n27372\n68.26\n\n\n(1,2]\n8396\n20.94\n\n\n(2,5]\n2976\n7.42\n\n\n(5,10]\n862\n2.15\n\n\n(10,100]\n487\n1.21\n\n\n(100,400]\n8\n0.02\n\n\n\n\n\n\n\nCode\nwm_full=readRDS(\"data/wm_full.RDS\")\n\n\n\n\nCode\nwd_events_freq=wd_events %&gt;% \n  mutate(cat_year=cut(year,breaks=c(1000,1200,1400,1600,1800,1950,\n                                    2000,2023),dig.lab=10)) %&gt;% \n  group_by(cat_year) %&gt;% tally()\np1=ggplot(wd_events_freq, aes(x=cat_year,y=n))+\n  geom_col()\np2=ggplot(wd_events %&gt;% filter(year&gt;=2000), aes(x=year))+\n  geom_histogram(breaks=2000:2023)\nfigure &lt;- ggarrange(p1,p2,\n                    labels = c(\"A\", \"B\"),\n                    ncol = 1, nrow = 2)\nfigure"
  }
]